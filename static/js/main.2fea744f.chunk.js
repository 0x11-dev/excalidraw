(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{263:function(e,t,n){},264:function(e,t,n){},265:function(e,t,n){"use strict";n.r(t);var r=n(26),o=n(2),a=n(3),l=n(7),i=n(6),c=n(8),s=n(0),u=n.n(s),h=n(21),f=n.n(h),d=n(20);function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function p(e,t){t.sort((function(e,t){return e-t}));var n=!0;t.forEach((function(t,r){(n=n&&t===r)||v(e,t-1,t)}))}function m(e,t){var n=t.sort((function(e,t){return t-e})),r=!0;n.forEach((function(t,n){(r=r&&t===e.length-n-1)||v(e,t+1,t)}))}function g(e,t){t.sort((function(e,t){return e-t}));var n=t.map((function(t){return e[t]})),r=t.reverse().concat([0]);r.forEach((function(t,n){if(0!==n)for(var o=r[n-1]-1;o>=t;--o)e[o+n]=e[o]})),n.forEach((function(t,n){e[n]=t}))}function y(e,t){var n=t.sort((function(e,t){return t-e})),r=n.map((function(t){return e[t]}));(t=n.reverse().concat([e.length])).forEach((function(n,r){if(0!==r)for(var o=t[r-1]+1;o<n;++o)e[o-r]=e[o]})),r.forEach((function(t,n){e[e.length-n-1]=t}))}function E(){return Math.floor(Math.random()*Math.pow(2,31))}function w(e,t){var n=Math.random;Math.random=function(e){return function(){return(Math.pow(2,31)-1&(e=Math.imul(48271,e)))/Math.pow(2,31)}}(e);var r=t();return Math.random=n,r}function k(e,t,n,r,o,a,l,i,c){var s=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,h={type:e,x:t,y:n,width:s,height:u,isSelected:!1,strokeColor:r,backgroundColor:o,fillStyle:a,strokeWidth:l,roughness:i,opacity:c,seed:E(),draw:function(e,t,n){}};return h}var S=n(5);function C(e,t,n,r,o,a){var l,i,c=o-n,s=a-r,u=c*c+s*s,h=-1;0!==u&&(h=((e-n)*c+(t-r)*s)/u),h<0?(l=n,i=r):h>1?(l=o,i=a):(l=n+h*c,i=r+h*s);var f=e-l,d=t-i;return Math.hypot(f,d)}function x(e,t,n,r,o){return[(e-n)*Math.cos(o)-(t-r)*Math.sin(o)+n,(e-n)*Math.sin(o)+(t-r)*Math.cos(o)+r]}function b(e){return e.width>=0?e.x:e.x+e.width}function O(e){return e.width>=0?e.x+e.width:e.x}function M(e){return e.height>=0?e.y:e.y+e.height}function R(e){return e.height>=0?e.y+e.height:e.y}function A(e){var t=Math.floor(e.width/2)+1,n=e.width,r=Math.floor(e.height/2)+1;return[t,0,n,r,t,e.height,0,r]}function B(e){var t=e.width,n=e.height,r=Math.hypot(t-0,n-0),o=Math.min(30,r/2),a=t-(t-0)/r*o,l=n-(n-0)/r*o,i=x(a,l,t,n,-20*Math.PI/180),c=Object(S.a)(i,2),s=c[0],u=c[1],h=x(a,l,t,n,20*Math.PI/180),f=Object(S.a)(h,2);return[0,0,t,n,s,u,f[0],f[1]]}function Y(e,t){var n=e.x,r=e.x+e.width,o=e.y,a=e.y+e.height,l={},i=e.width<0?8:-8,c=e.height<0?8:-8;return Math.abs(r-n)>40&&(l.n=[n+(r-n)/2+t.scrollX-4,o-4+t.scrollY+c,8,8],l.s=[n+(r-n)/2+t.scrollX-4,a-4+t.scrollY-c,8,8]),Math.abs(a-o)>40&&(l.w=[n-4+t.scrollX+i,o+(a-o)/2+t.scrollY-4,8,8],l.e=[r-4+t.scrollX-i,o+(a-o)/2+t.scrollY-4,8,8]),l.nw=[n-4+t.scrollX+i,o-4+t.scrollY+c,8,8],l.ne=[r-4+t.scrollX-i,o-4+t.scrollY+c,8,8],l.sw=[n-4+t.scrollX+i,a-4+t.scrollY-c,8,8],l.se=[r-4+t.scrollX-i,a-4+t.scrollY-c,8,8],"arrow"===e.type?{nw:l.nw,se:l.se}:l}function D(e,t,n){if("ellipse"===e.type){var r=Math.abs(t-e.x-e.width/2),o=Math.abs(n-e.y-e.height/2),a=.707,l=.707,i=Math.abs(e.width)/2,c=Math.abs(e.height)/2;return[0,1,2,3].forEach((function(e){var t=i*a,n=c*l,s=(i*i-c*c)*Math.pow(a,3)/i,u=(c*c-i*i)*Math.pow(l,3)/c,h=t-s,f=n-u,d=r-s,v=o-u,p=Math.hypot(f,h),m=Math.hypot(v,d);a=Math.min(1,Math.max(0,(d*p/m+s)/i)),l=Math.min(1,Math.max(0,(v*p/m+u)/c));var g=Math.hypot(l,a);a/=g,l/=g})),Math.hypot(i*a-r,c*l-o)<10}if("rectangle"===e.type){var s=b(e),u=O(e),h=M(e),f=R(e);return C(t,n,s,h,u,h)<10||C(t,n,u,h,u,f)<10||C(t,n,u,f,s,f)<10||C(t,n,s,f,s,h)<10}if("diamond"===e.type){t-=e.x,n-=e.y;var d=A(e),v=Object(S.a)(d,8),p=v[0],m=v[1],g=v[2],y=v[3],E=v[4],w=v[5],k=v[6],x=v[7];return C(t,n,p,m,g,y)<10||C(t,n,g,y,E,w)<10||C(t,n,E,w,k,x)<10||C(t,n,k,x,p,m)<10}if("arrow"===e.type){var Y=B(e),D=Object(S.a)(Y,8),X=D[0],T=D[1],L=D[2],N=D[3],P=D[4],W=D[5],j=D[6],U=D[7];return C(t-=e.x,n-=e.y,P,W,L,N)<10||C(t,n,X,T,L,N)<10||C(t,n,j,U,L,N)<10}if("text"===e.type){var F=b(e),K=O(e),H=M(e),z=R(e);return t>=F&&t<=K&&n>=H&&n<=z}if("selection"===e.type)return console.warn("This should not happen, we need to investigate why it does."),!1;throw new Error("Unimplemented type "+e.type)}function X(e,t,n,r){if("text"===e.type)return!1;var o=Y(e,r),a=Object.keys(o).filter((function(e){var a=o[e];return t+r.scrollX>=a[0]&&t+r.scrollX<=a[0]+a[2]&&n+r.scrollY>=a[1]&&n+r.scrollY<=a[1]+a[3]}));return a.length>0&&a[0]}function T(e){return"text"===e.type}var L=d.a.generator(null,null);function N(e){if("selection"===e.type)e.draw=function(t,n,r){var o=r.scrollX,a=r.scrollY,l=n.fillStyle;n.fillStyle="rgba(0, 0, 255, 0.10)",n.fillRect(e.x+o,e.y+a,e.width,e.height),n.fillStyle=l};else if("rectangle"===e.type){var t=w(e.seed,(function(){return L.rectangle(0,0,e.width,e.height,{stroke:e.strokeColor,fill:e.backgroundColor,fillStyle:e.fillStyle,strokeWidth:e.strokeWidth,roughness:e.roughness})}));e.draw=function(n,r,o){var a=o.scrollX,l=o.scrollY;r.globalAlpha=e.opacity/100,r.translate(e.x+a,e.y+l),n.draw(t),r.translate(-e.x-a,-e.y-l),r.globalAlpha=1}}else if("diamond"===e.type){var n=w(e.seed,(function(){var t=A(e),n=Object(S.a)(t,8),r=n[0],o=n[1],a=n[2],l=n[3],i=n[4],c=n[5],s=n[6],u=n[7];return L.polygon([[r,o],[a,l],[i,c],[s,u]],{stroke:e.strokeColor,fill:e.backgroundColor,fillStyle:e.fillStyle,strokeWidth:e.strokeWidth,roughness:e.roughness})}));e.draw=function(t,r,o){var a=o.scrollX,l=o.scrollY;r.globalAlpha=e.opacity/100,r.translate(e.x+a,e.y+l),t.draw(n),r.translate(-e.x-a,-e.y-l),r.globalAlpha=1}}else if("ellipse"===e.type){var r=w(e.seed,(function(){return L.ellipse(e.width/2,e.height/2,e.width,e.height,{stroke:e.strokeColor,fill:e.backgroundColor,fillStyle:e.fillStyle,strokeWidth:e.strokeWidth,roughness:e.roughness})}));e.draw=function(t,n,o){var a=o.scrollX,l=o.scrollY;n.globalAlpha=e.opacity/100,n.translate(e.x+a,e.y+l),t.draw(r),n.translate(-e.x-a,-e.y-l),n.globalAlpha=1}}else{if("arrow"===e.type){var o=B(e),a=Object(S.a)(o,8),l=a[0],i=a[1],c=a[2],s=a[3],u=a[4],h=a[5],f=a[6],d=a[7],v={stroke:e.strokeColor,strokeWidth:e.strokeWidth,roughness:e.roughness},p=w(e.seed,(function(){return[L.line(u,h,c,s,v),L.line(l,i,c,s,v),L.line(f,d,c,s,v)]}));return void(e.draw=function(t,n,r){var o=r.scrollX,a=r.scrollY;n.globalAlpha=e.opacity/100,n.translate(e.x+o,e.y+a),p.forEach((function(e){return t.draw(e)})),n.translate(-e.x-o,-e.y-a),n.globalAlpha=1})}if(!T(e))throw new Error("Unimplemented type "+e.type);e.draw=function(t,n,r){var o=r.scrollX,a=r.scrollY;n.globalAlpha=e.opacity/100;var l=n.font;n.font=e.font;var i=n.fillStyle;n.fillStyle=e.strokeColor,n.fillText(e.text,e.x+o,e.y+e.actualBoundingBoxAscent+a),n.fillStyle=i,n.font=l,n.globalAlpha=1}}}function P(e,t,n){var r=document.createElement("input");function o(e){e.stopPropagation()}function a(){r.value&&n(r.value),l()}function l(){window.removeEventListener("wheel",o,!0),document.body.removeChild(r)}Object.assign(r.style,{position:"absolute",top:t-8+"px",left:e+"px",transform:"translate(-50%, -50%)",boxShadow:"none",textAlign:"center",width:2*(window.innerWidth-e)+"px",fontSize:"20px",fontFamily:"Virgil",border:"none",background:"transparent"}),r.onkeydown=function(e){e.key!==ye.ESCAPE?e.key===ye.ENTER&&a():l()},r.onblur=a,window.addEventListener("wheel",o,!0),document.body.appendChild(r),r.focus()}function W(e,t,n,r,o){var a=1/0,l=0,i=1/0,c=0;e.forEach((function(e){a=Math.min(a,b(e)),l=Math.max(l,O(e)),i=Math.min(i,M(e)),c=Math.max(c,R(e))})),a+=r,l+=r,i+=o,c+=o;var s=Math.max(-a,0),u=Math.max(-(t-l),0),h=Math.max(-i,0),f=Math.max(-(n-c),0),d=null;(s||u)&&(d={x:Math.min(s+4,t-15-4),y:n-6-4,width:Math.max(t-u-s-8,15),height:6});var v=null;return(h||f)&&(v={x:t-6-4,y:Math.min(h+4,n-15-4),width:6,height:Math.max(n-f-h-12,15)}),{horizontal:d,vertical:v}}var j=n(38);function U(e,t,n,r,o,a){e.beginPath(),e.moveTo(t+a,n),e.lineTo(t+r-a,n),e.quadraticCurveTo(t+r,n,t+r,n+a),e.lineTo(t+r,n+o-a),e.quadraticCurveTo(t+r,n+o,t+r-a,n+o),e.lineTo(t+a,n+o),e.quadraticCurveTo(t,n+o,t,n+o-a),e.lineTo(t,n+a),e.quadraticCurveTo(t,n,t+a,n),e.closePath(),e.fill(),e.stroke()}function F(e){e.forEach((function(e){e.isSelected=!1}))}function K(e){for(var t=e.length-1;t>=0;--t)e[t].isSelected&&e.splice(t,1)}function H(e){var t=[];return e.forEach((function(e,n){e.isSelected&&t.push(n)})),t}var z=function(e){return e.some((function(e){return e.isSelected}))};function I(e,t){var n=Array.from(new Set(e.filter((function(e){return e.isSelected})).map((function(e){return t(e)}))));return 1===n.length?n[0]:null}function J(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=o.offsetX,l=o.offsetY,i=o.renderScrollbars,c=void 0===i||i,s=o.renderSelection,u=void 0===s||s;if(n){var h=n.getContext("2d"),f=h.fillStyle;"string"===typeof r.viewBackgroundColor?(h.fillStyle=r.viewBackgroundColor,h.fillRect(0,0,n.width,n.height)):h.clearRect(0,0,n.width,n.height),h.fillStyle=f;var d=H(e);if(r=Object(j.a)({},r,{scrollX:"number"===typeof a?a:r.scrollX,scrollY:"number"===typeof l?l:r.scrollY}),e.forEach((function(e){if(e.draw(t,h,r),u&&e.isSelected){var n=b(e),o=O(e),a=M(e),l=R(e),i=h.getLineDash();if(h.setLineDash([8,4]),h.strokeRect(n-4+r.scrollX,a-4+r.scrollY,o-n+8,l-a+8),h.setLineDash(i),"text"!==e.type&&1===d.length){var c=Y(e,r);Object.values(c).forEach((function(e){h.strokeRect(e[0],e[1],e[2],e[3])}))}}})),c){var v=W(e,h.canvas.width/window.devicePixelRatio,h.canvas.height/window.devicePixelRatio,r.scrollX,r.scrollY),p=h.strokeStyle;h.fillStyle="rgba(0,0,0,0.3)",h.strokeStyle="rgba(255,255,255,0.8)",[v.horizontal,v.vertical].forEach((function(e){e&&U(h,e.x,e.y,e.width,e.height,3)})),h.strokeStyle=p,h.fillStyle=f}}}function _(e,t){var n=document.createElement("a");n.setAttribute("download",e),n.setAttribute("href",t),n.click(),n.remove()}function q(e,t,n){try{return t&&(e.splice.apply(e,[0,e.length].concat(Object(r.a)("string"===typeof t?JSON.parse(t):t))),e.forEach((function(e){e.fillStyle=e.fillStyle||"hachure",e.strokeWidth=e.strokeWidth||1,e.roughness=e.roughness||1,e.opacity=null===e.opacity||void 0===e.opacity?100:e.opacity,N(e)}))),n?JSON.parse(n):null}catch(o){return e.splice(0,e.length),null}}function V(e,t){localStorage.setItem("excalidraw",JSON.stringify(e)),localStorage.setItem("excalidraw-state",JSON.stringify(t))}function G(e,t){var n=[JSON.stringify(e),JSON.stringify(t)].map(btoa).join(":");document.location.replace("#"+n)}function Z(e,t,n){for(var r=null,o=e.length-1;o>=0;--o)if(D(e[o],t,n)){r=e[o];break}return r}function Q(e){return e.charAt(0).toUpperCase()+e.slice(1)}function $(e){return e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement}var ee=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(i.a)(t).call(this,e))).state={value:e.value,edit:!1},n}return Object(c.a)(t,e),Object(a.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({value:e.value})}},{key:"handleEdit",value:function(e){this.setState({value:e.target.value})}},{key:"handleBlur",value:function(){var e=this.state.value;e?(this.props.onChange(e),this.setState({edit:!1})):this.setState({value:this.props.value,edit:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.value,r=t.edit;return u.a.createElement(s.Fragment,null,r?u.a.createElement("input",{className:"project-name-input",name:"name",maxLength:25,value:n,onChange:function(t){return e.handleEdit(t)},onBlur:function(){return e.handleBlur()},onKeyDown:function(t){"Enter"===t.key&&e.handleBlur()},autoFocus:!0}):u.a.createElement("span",{onClick:function(){return e.setState({edit:!0})},className:"project-name"},n))}}]),t}(s.Component);function te(e){var t=e.options,n=e.value,r=e.onChange;return u.a.createElement("div",{className:"buttonList"},t.map((function(e){return u.a.createElement("button",{key:e.text,onClick:function(){return r(e.value)},className:n===e.value?"active":""},e.text)})))}var ne=n(92);function re(e){var t=e.children,n=e.left,r=e.onCloseRequest,o=e.top;return u.a.createElement("div",{className:"popover",style:{top:o,left:n}},u.a.createElement("div",{className:"cover",onClick:r,onContextMenu:function(e){e.preventDefault(),r&&r()}}),t)}function oe(e){var t=e.color,n=e.onChange,r=u.a.useState(!1),o=Object(S.a)(r,2),a=o[0],l=o[1];return u.a.createElement("div",null,u.a.createElement("button",{className:"swatch",style:t?{backgroundColor:t}:void 0,onClick:function(){return l(!a)}}),a?u.a.createElement(re,{onCloseRequest:function(){return l(!1)}},u.a.createElement(ne.TwitterPicker,{colors:["#000000","#ABB8C3","#FFFFFF","#FF6900","#FCB900","#00D084","#8ED1FC","#0693E3","#EB144C","#F78DA7","#9900EF"],width:"205px",color:t||void 0,onChange:function(e){n(e.hex)}})):null,u.a.createElement("input",{type:"text",className:"swatch-input",value:t||"",onPaste:function(e){return n(e.clipboardData.getData("text"))},onChange:function(e){return n(e.target.value)}}))}var ae=[{icon:u.a.createElement("svg",{viewBox:"0 0 320 512"},u.a.createElement("path",{d:"M302.189 329.126H196.105l55.831 135.993c3.889 9.428-.555 19.999-9.444 23.999l-49.165 21.427c-9.165 4-19.443-.571-23.332-9.714l-53.053-129.136-86.664 89.138C18.729 472.71 0 463.554 0 447.977V18.299C0 1.899 19.921-6.096 30.277 5.443l284.412 292.542c11.472 11.179 3.007 31.141-12.5 31.141z"})),value:"selection"},{icon:u.a.createElement("svg",{viewBox:"0 0 448 512"},u.a.createElement("path",{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"})),value:"rectangle"},{icon:u.a.createElement("svg",{viewBox:"0 0 223.646 223.646"},u.a.createElement("path",{d:"M111.823 0L16.622 111.823 111.823 223.646 207.025 111.823z"})),value:"diamond"},{icon:u.a.createElement("svg",{viewBox:"0 0 512 512"},u.a.createElement("path",{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"})),value:"ellipse"},{icon:u.a.createElement("svg",{viewBox:"0 0 448 512"},u.a.createElement("path",{d:"M313.941 216H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12h301.941v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.569 0-33.941l-86.059-86.059c-15.119-15.119-40.971-4.411-40.971 16.971V216z"})),value:"arrow"},{icon:u.a.createElement("svg",{viewBox:"0 0 448 512"},u.a.createElement("path",{d:"M432 416h-23.41L277.88 53.69A32 32 0 0 0 247.58 32h-47.16a32 32 0 0 0-30.3 21.69L39.41 416H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16h-19.58l23.3-64h152.56l23.3 64H304a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM176.85 272L224 142.51 271.15 272z"})),value:"text"}],le=ae.map((function(e){return e.value[0]}));function ie(e){return ae.reduce((function(t,n){return n.value[0]!==e?t:n.value}),"selection")}var ce,se=function(){function e(){Object(o.a)(this,e),this.recording=!0,this.stateHistory=[],this.redoStack=[]}return Object(a.a)(e,[{key:"generateCurrentEntry",value:function(e){return JSON.stringify(e.map((function(e){return Object(j.a)({},e,{isSelected:!1})})))}},{key:"pushEntry",value:function(e){this.stateHistory.length>0&&this.stateHistory[this.stateHistory.length-1]===e||this.stateHistory.push(e)}},{key:"restoreEntry",value:function(e,t){var n=JSON.parse(t);e.splice(0,e.length),n.forEach((function(t){N(t),e.push(t)})),this.skipRecording()}},{key:"clearRedoStack",value:function(){this.redoStack.splice(0,this.redoStack.length)}},{key:"redoOnce",value:function(e){var t=this.generateCurrentEntry(e),n=this.redoStack.pop();void 0!==n&&(this.restoreEntry(e,n),this.stateHistory.push(t))}},{key:"undoOnce",value:function(e){var t=this.generateCurrentEntry(e),n=this.stateHistory.pop();t===n&&(n=this.stateHistory.pop()),void 0!==n&&(this.restoreEntry(e,n),this.redoStack.push(t))}},{key:"isRecording",value:function(){return this.recording}},{key:"skipRecording",value:function(){this.recording=!1}},{key:"resumeRecording",value:function(){this.recording=!0}}]),e}();n(263),n(264);function ue(e){var t=e.options,n=e.onCloseRequest,r=e.top,o=e.left;return u.a.createElement(re,{onCloseRequest:n,top:r,left:o},u.a.createElement("ul",{className:"context-menu",onContextMenu:function(e){return e.preventDefault()}},t.map((function(e,t){return u.a.createElement("li",{key:t,className:"context-menu__option",onClick:n},u.a.createElement(he,e))}))))}function he(e){var t=e.label,n=e.action;return u.a.createElement("button",{className:"context-menu-option",onClick:n},t)}function fe(){if(ce)return ce;var e=document.createElement("div");return document.body.appendChild(e),ce=e}function de(){Object(h.unmountComponentAtNode)(fe())}var ve=function(e){var t=Array.of();e.options.forEach((function(e){e&&t.push(e)})),t.length&&Object(h.render)(u.a.createElement(ue,{top:e.top,left:e.left,options:t,onCloseRequest:de}),fe())};n.d(t,"KEYS",(function(){return ye}));var pe={elements:Array.of()}.elements,me={history:new se}.history,ge="excalidraw-".concat(function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),o=e.getHours(),a=e.getMinutes(),l=e.getSeconds();return"".concat(t).concat(n).concat(r).concat(o).concat(a).concat(l)}()),ye={ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_DOWN:"ArrowDown",ARROW_UP:"ArrowUp",ESCAPE:"Escape",ENTER:"Enter",DELETE:"Delete",BACKSPACE:"Backspace"},Ee=/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)?"metaKey":"ctrlKey",we="{}";function ke(e){return e===ye.ARROW_LEFT||e===ye.ARROW_RIGHT||e===ye.ARROW_DOWN||e===ye.ARROW_UP}function Se(){document.documentElement.style.cursor=""}function Ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(Se(),null===t||""===t)return!1;var n=20;e.text=t,e.font="".concat(n,"px Virgil");var r=De.font;De.font=e.font;var o=De.measureText(e.text),a=o.width,l=o.actualBoundingBoxAscent||n,i=o.actualBoundingBoxDescent||0;e.actualBoundingBoxAscent=l,De.font=r;var c=l+i;return e.x-=a/2,e.y-=l,e.width=a,e.height=c,!0}var xe=-1,be=-1,Oe=null,Me=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(n=Object(l.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={draggingElement:null,resizingElement:null,elementType:"selection",exportBackground:!0,currentItemStrokeColor:"#000000",currentItemBackgroundColor:"#ffffff",viewBackgroundColor:"#ffffff",scrollX:0,scrollY:0,name:ge},n.onResize=function(){n.forceUpdate()},n.onKeyDown=function(e){if(!$(e.target))if(e.key===ye.ESCAPE)F(pe),n.forceUpdate(),e.preventDefault();else if(e.key===ye.BACKSPACE||e.key===ye.DELETE)n.deleteSelectedElements(),e.preventDefault();else if(ke(e.key)){var t=e.shiftKey?5:1;pe.forEach((function(n){n.isSelected&&(e.key===ye.ARROW_LEFT?n.x-=t:e.key===ye.ARROW_RIGHT?n.x+=t:e.key===ye.ARROW_UP?n.y-=t:e.key===ye.ARROW_DOWN&&(n.y+=t))})),n.forceUpdate(),e.preventDefault()}else if(e[Ee]&&e.shiftKey&&e.altKey&&"KeyB"===e.code)n.moveOneLeft(),e.preventDefault();else if(e[Ee]&&e.shiftKey&&"KeyB"===e.code)n.moveAllLeft(),e.preventDefault();else if(e[Ee]&&e.shiftKey&&e.altKey&&"KeyF"===e.code)n.moveOneRight(),e.preventDefault();else if(e[Ee]&&e.shiftKey&&"KeyF"===e.code)n.moveAllRight(),e.preventDefault();else if(e[Ee]&&"KeyA"===e.code)pe.forEach((function(e){e.isSelected=!0})),n.forceUpdate(),e.preventDefault();else if(le.includes(e.key.toLowerCase()))n.setState({elementType:ie(e.key)});else if(e[Ee]&&"KeyZ"===e.code)e.shiftKey?me.redoOnce(pe):me.undoOnce(pe),n.forceUpdate(),e.preventDefault();else if(e.metaKey&&e.shiftKey&&"KeyC"===e.code){var r=pe.find((function(e){return e.isSelected}));r&&(we=JSON.stringify(r))}else if(e.metaKey&&e.shiftKey&&"KeyV"===e.code){var o=JSON.parse(we);o.type&&pe.forEach((function(e){e.isSelected&&(e.backgroundColor=null===o||void 0===o?void 0:o.backgroundColor,e.strokeWidth=null===o||void 0===o?void 0:o.strokeWidth,e.strokeColor=null===o||void 0===o?void 0:o.strokeColor,e.fillStyle=null===o||void 0===o?void 0:o.fillStyle,e.opacity=null===o||void 0===o?void 0:o.opacity,N(e))})),n.forceUpdate(),e.preventDefault()}},n.deleteSelectedElements=function(){K(pe),n.forceUpdate()},n.clearCanvas=function(){window.confirm("This will clear the whole canvas. Are you sure?")&&(pe.splice(0,pe.length),n.setState({viewBackgroundColor:"#ffffff",scrollX:0,scrollY:0}),n.forceUpdate())},n.moveAllLeft=function(){g(pe,H(pe)),n.forceUpdate()},n.moveOneLeft=function(){p(pe,H(pe)),n.forceUpdate()},n.moveAllRight=function(){y(pe,H(pe)),n.forceUpdate()},n.moveOneRight=function(){m(pe,H(pe)),n.forceUpdate()},n.removeWheelEventListener=void 0,n.changeProperty=function(e){pe.forEach((function(t){t.isSelected&&(e(t),N(t))})),n.forceUpdate()},n.changeOpacity=function(e){n.changeProperty((function(t){return t.opacity=+e.target.value}))},n.changeStrokeColor=function(e){n.changeProperty((function(t){return t.strokeColor=e})),n.setState({currentItemStrokeColor:e})},n.changeBackgroundColor=function(e){n.changeProperty((function(t){return t.backgroundColor=e})),n.setState({currentItemBackgroundColor:e})},n.copyToClipboard=function(){if(navigator.clipboard){var e=JSON.stringify(pe.filter((function(e){return e.isSelected})));navigator.clipboard.writeText(e)}},n.pasteFromClipboard=function(e,t){navigator.clipboard&&navigator.clipboard.readText().then((function(r){return n.addElementsFromPaste(r,e,t)}))},n.handleWheel=function(e){e.preventDefault();var t=e.deltaX,r=e.deltaY;n.setState((function(e){return{scrollX:e.scrollX-t,scrollY:e.scrollY-r}}))},n.saveDebounced=Re((function(){V(pe,n.state),G(pe,n.state)}),300),n.addElementsFromPaste=function(e,t,o){var a;try{a=JSON.parse(e)}catch(u){}if(Array.isArray(a)&&a.length>0&&a[0].type){var l,i;if(F(pe),t){var c=Math.min.apply(Math,Object(r.a)(a.map((function(e){return e.x}))));l=t-c}if(o){var s=Math.min.apply(Math,Object(r.a)(a.map((function(e){return e.y}))));i=o-s}a.forEach((function(e){e.x=l?e.x+l:10-n.state.scrollX,e.y=i?e.y+i:10-n.state.scrollY,e.seed=E(),N(e),pe.push(e)})),n.forceUpdate()}},n}return Object(c.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("resize",this.onResize,!1);var e=function(e){try{var t=document.location.hash.slice(1).split(":").map(atob),n=Object(S.a)(t,2);return q(e,n[0],n[1])}catch(r){return null}}(pe)||q(pe,localStorage.getItem("excalidraw"),localStorage.getItem("excalidraw-state"));e&&this.setState(e)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("resize",this.onResize,!1)}},{key:"updateProjectName",value:function(e){this.setState({name:e})}},{key:"render",value:function(){var e=this,t=window.innerWidth-250,n=window.innerHeight-0;return u.a.createElement("div",{className:"container",onCut:function(t){t.clipboardData.setData("text/plain",JSON.stringify(pe.filter((function(e){return e.isSelected})))),K(pe),e.forceUpdate(),t.preventDefault()},onCopy:function(e){e.clipboardData.setData("text/plain",JSON.stringify(pe.filter((function(e){return e.isSelected})))),e.preventDefault()},onPaste:function(t){var n=t.clipboardData.getData("text");e.addElementsFromPaste(n),t.preventDefault()}},u.a.createElement("div",{className:"sidePanel"},u.a.createElement("h4",null,"Shapes"),u.a.createElement("div",{className:"panelTools"},ae.map((function(t){var n=t.value,r=t.icon;return u.a.createElement("label",{key:n,className:"tool",title:"".concat(Q(n)," - ").concat(Q(n)[0])},u.a.createElement("input",{type:"radio",checked:e.state.elementType===n,onChange:function(){e.setState({elementType:n}),F(pe),document.documentElement.style.cursor="text"===n?"text":"crosshair",e.forceUpdate()}}),u.a.createElement("div",{className:"toolIcon"},r))}))),z(pe)&&u.a.createElement("div",{className:"panelColumn"},u.a.createElement("h4",null,"Selection"),u.a.createElement("div",{className:"buttonList"},u.a.createElement("button",{onClick:this.moveOneRight},"Bring forward"),u.a.createElement("button",{onClick:this.moveAllRight},"Bring to front"),u.a.createElement("button",{onClick:this.moveOneLeft},"Send backward"),u.a.createElement("button",{onClick:this.moveAllLeft},"Send to back")),u.a.createElement("h5",null,"Stroke Color"),u.a.createElement(oe,{color:I(pe,(function(e){return e.strokeColor})),onChange:function(t){return e.changeStrokeColor(t)}}),pe.some((function(e){return e.isSelected&&("rectangle"===e.type||"ellipse"===e.type||"diamond"===e.type)}))&&u.a.createElement(u.a.Fragment,null,u.a.createElement("h5",null,"Background Color"),u.a.createElement(oe,{color:I(pe,(function(e){return e.backgroundColor})),onChange:function(t){return e.changeBackgroundColor(t)}}),u.a.createElement("h5",null,"Fill"),u.a.createElement(te,{options:[{value:"solid",text:"Solid"},{value:"hachure",text:"Hachure"},{value:"cross-hatch",text:"Cross-hatch"}],value:I(pe,(function(e){return e.fillStyle})),onChange:function(t){e.changeProperty((function(e){e.fillStyle=t}))}})),function(e){return e.some((function(e){return e.isSelected&&("rectangle"===e.type||"ellipse"===e.type||"diamond"===e.type||"arrow"===e.type)}))}(pe)&&u.a.createElement(u.a.Fragment,null,u.a.createElement("h5",null,"Stroke Width"),u.a.createElement(te,{options:[{value:1,text:"Thin"},{value:2,text:"Bold"},{value:4,text:"Extra Bold"}],value:I(pe,(function(e){return e.strokeWidth})),onChange:function(t){e.changeProperty((function(e){e.strokeWidth=t}))}}),u.a.createElement("h5",null,"Sloppiness"),u.a.createElement(te,{options:[{value:0,text:"Draftsman"},{value:1,text:"Artist"},{value:3,text:"Cartoonist"}],value:I(pe,(function(e){return e.roughness})),onChange:function(t){return e.changeProperty((function(e){e.roughness=t}))}})),u.a.createElement("h5",null,"Opacity"),u.a.createElement("input",{type:"range",min:"0",max:"100",onChange:this.changeOpacity,value:I(pe,(function(e){return e.opacity}))||0}),u.a.createElement("button",{onClick:this.deleteSelectedElements},"Delete selected")),u.a.createElement("h4",null,"Canvas"),u.a.createElement("div",{className:"panelColumn"},u.a.createElement("h5",null,"Canvas Background Color"),u.a.createElement(oe,{color:this.state.viewBackgroundColor,onChange:function(t){return e.setState({viewBackgroundColor:t})}}),u.a.createElement("button",{onClick:this.clearCanvas,title:"Clear the canvas & reset background color"},"Clear canvas")),u.a.createElement("h4",null,"Export"),u.a.createElement("div",{className:"panelColumn"},u.a.createElement("h5",null,"Name"),this.state.name&&u.a.createElement(ee,{value:this.state.name,onChange:function(t){return e.updateProjectName(t)}}),u.a.createElement("h5",null,"Image"),u.a.createElement("button",{onClick:function(){!function(e,t,n){var r=n.exportBackground,o=n.exportPadding,a=void 0===o?10:o,l=n.viewBackgroundColor,i=n.name;if(!e.length)return window.alert("Cannot export empty canvas.");var c=1/0,s=0,u=1/0,h=0;function f(e,t){return Math.abs(e>t?e-t:t-e)}e.forEach((function(e){c=Math.min(c,b(e)),s=Math.max(s,O(e)),u=Math.min(u,M(e)),h=Math.max(h,R(e))}));var v=document.createElement("canvas");v.style.display="none",document.body.appendChild(v),v.width=f(c,s)+2*a,v.height=f(u,h)+2*a,J(e,d.a.canvas(v),v,{viewBackgroundColor:r?l:null,scrollX:0,scrollY:0},{offsetX:-c+a,offsetY:-u+a,renderScrollbars:!1,renderSelection:!1}),_("".concat(i,".png"),v.toDataURL("image/png")),v!==t&&v.remove()}(pe,Be,e.state)}},"Export to png"),u.a.createElement("label",null,u.a.createElement("input",{type:"checkbox",checked:this.state.exportBackground,onChange:function(t){e.setState({exportBackground:t.target.checked})}}),"background"),u.a.createElement("h5",null,"Scene"),u.a.createElement("button",{onClick:function(){!function(e,t){var n=JSON.stringify({version:1,source:window.location.origin,elements:e});_("".concat(t,".json"),"data:text/plain;charset=utf-8,"+encodeURIComponent(n))}(pe,e.state.name)}},"Save as..."),u.a.createElement("button",{onClick:function(){(function(e){var t=document.createElement("input"),n=new FileReader;return t.type="file",t.accept=".json",t.onchange=function(){t.files.length?n.readAsText(t.files[0],"utf8"):alert("A file was not selected.")},t.click(),new Promise((function(t){n.onloadend=function(){if(n.readyState===FileReader.DONE){var r=JSON.parse(n.result);q(e,r.elements,null),t()}}}))})(pe).then((function(){return e.forceUpdate()}))}},"Load file..."))),u.a.createElement("canvas",{id:"canvas",style:{width:t,height:n},width:t*window.devicePixelRatio,height:n*window.devicePixelRatio,ref:function(r){e.removeWheelEventListener&&(e.removeWheelEventListener(),e.removeWheelEventListener=void 0),r&&(r.addEventListener("wheel",e.handleWheel,{passive:!1}),e.removeWheelEventListener=function(){return r.removeEventListener("wheel",e.handleWheel)},t===xe&&n===be||(xe=t,be=n,r.getContext("2d").scale(window.devicePixelRatio,window.devicePixelRatio)))},onContextMenu:function(t){t.preventDefault();var n=t.clientX-250-e.state.scrollX,r=t.clientY-0-e.state.scrollY,o=Z(pe,n,r);o?(o.isSelected||(F(pe),o.isSelected=!0,e.forceUpdate()),ve({options:[navigator.clipboard&&{label:"Copy",action:e.copyToClipboard},navigator.clipboard&&{label:"Paste",action:function(){return e.pasteFromClipboard(n,r)}},{label:"Delete",action:e.deleteSelectedElements},{label:"Move Forward",action:e.moveOneRight},{label:"Send to Front",action:e.moveAllRight},{label:"Move Backwards",action:e.moveOneLeft},{label:"Send to Back",action:e.moveAllLeft}],top:t.clientY,left:t.clientX})):ve({options:[navigator.clipboard&&{label:"Paste",action:function(){return e.pasteFromClipboard(n,r)}}],top:t.clientY,left:t.clientX})},onMouseDown:function(r){if(null!==Oe&&Oe(r),0===r.button){r.preventDefault(),$(document.activeElement)&&document.activeElement.blur();var o=function(e,t,n,r,o,a,l){var i=W(e,r,o,a,l),c=[i.horizontal,i.vertical].map((function(e){return e&&e.x<=t&&t<=e.x+e.width&&e.y<=n&&n<=e.y+e.height})),s=Object(S.a)(c,2);return{isOverHorizontalScrollBar:s[0],isOverVerticalScrollBar:s[1]}}(pe,r.clientX-250,r.clientY-0,t,n,e.state.scrollX,e.state.scrollY),a=o.isOverHorizontalScrollBar,l=o.isOverVerticalScrollBar,i=r.clientX-250-e.state.scrollX,c=r.clientY-0-e.state.scrollY,s=k(e.state.elementType,i,c,e.state.currentItemStrokeColor,e.state.currentItemBackgroundColor,"hachure",1,1,100),u=!1,h=!1,f=!1;if("selection"===e.state.elementType){var d=pe.find((function(t){return X(t,i,c,{scrollX:e.state.scrollX,scrollY:e.state.scrollY,viewBackgroundColor:e.state.viewBackgroundColor})}));if(e.setState({resizingElement:d||null}),d)u=X(d,i,c,{scrollX:e.state.scrollX,scrollY:e.state.scrollY,viewBackgroundColor:e.state.viewBackgroundColor}),document.documentElement.style.cursor="".concat(u,"-resize"),f=!0;else{var v=Z(pe,i,c);v?v.isSelected||(r.shiftKey||F(pe),v.isSelected=!0):F(pe),(h=z(pe))&&(document.documentElement.style.cursor="move")}}if(T(s))P(r.clientX,r.clientY,(function(t){Ce(s,t),N(s),pe.push(s),s.isSelected=!0,e.setState({draggingElement:null,elementType:"selection"})}));else{N(s),pe.push(s),e.setState({draggingElement:s});var p=i,m=c;(a||l)&&(p=r.clientX-250,m=r.clientY-0);var g=function(t){if(t.target instanceof HTMLElement){if(a){var n=t.clientX-250,r=n-p;return e.setState((function(e){return{scrollX:e.scrollX-r}})),void(p=n)}if(l){var o=t.clientY-0,i=o-m;return e.setState((function(e){return{scrollY:e.scrollY-i}})),void(m=o)}if(f&&e.state.resizingElement){var c=e.state.resizingElement,s=pe.filter((function(e){return e.isSelected}));if(1===s.length){var d=t.clientX-250-e.state.scrollX,v=t.clientY-0-e.state.scrollY;return s.forEach((function(e){switch(u){case"nw":e.width+=e.x-p,e.x=p,t.shiftKey?(e.y+=e.height-e.width,e.height=e.width):(e.height+=e.y-m,e.y=m);break;case"ne":e.width=p-e.x,t.shiftKey?(e.y+=e.height-e.width,e.height=e.width):(e.height+=e.y-m,e.y=m);break;case"sw":e.width+=e.x-p,e.x=p,t.shiftKey?e.height=e.width:e.height=m-e.y;break;case"se":e.width+=d-p,t.shiftKey?e.height=e.width:e.height+=v-m;break;case"n":e.height+=e.y-m,e.y=m;break;case"w":e.width+=e.x-p,e.x=p;break;case"s":e.height=m-e.y;break;case"e":e.width=p-e.x}c.x=e.x,c.y=e.y,N(c)})),p=d,m=v,me.skipRecording(),void e.forceUpdate()}}if(h){var g=pe.filter((function(e){return e.isSelected}));if(g.length){var y=t.clientX-250-e.state.scrollX,E=t.clientY-0-e.state.scrollY;return g.forEach((function(e){e.x+=y-p,e.y+=E-m})),p=y,m=E,me.skipRecording(),void e.forceUpdate()}}var w=e.state.draggingElement;if(w){var k=t.clientX-250-w.x-e.state.scrollX,S=t.clientY-0-w.y-e.state.scrollY;w.width=k,w.height=t.shiftKey?Math.abs(k)*Math.sign(S):S,N(w),"selection"===e.state.elementType&&function(e,t){var n=b(t),r=O(t),o=M(t),a=R(t);e.forEach((function(e){var t=b(e),l=O(e),i=M(e),c=R(e);e.isSelected="selection"!==e.type&&n<=t&&o<=i&&r>=l&&a>=c}))}(pe,w),me.skipRecording(),e.forceUpdate()}}},y=function t(n){var r=e.state,o=r.draggingElement,a=r.elementType;if(Oe=null,window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",t),Se(),null===o)return F(pe),void e.forceUpdate();"selection"===a?(h&&(h=!1),pe.pop()):o.isSelected=!0,e.setState({draggingElement:null,elementType:"selection"}),e.forceUpdate()};Oe=y,window.addEventListener("mousemove",g),window.addEventListener("mouseup",y),me.skipRecording(),e.forceUpdate()}}},onDoubleClick:function(t){var n=t.clientX-250-e.state.scrollX,r=t.clientY-0-e.state.scrollY;if(!Z(pe,n,r)){var o=k("text",n,r,e.state.currentItemStrokeColor,e.state.currentItemBackgroundColor,"hachure",1,1,100);P(t.clientX,t.clientY,(function(t){Ce(o,t),N(o),pe.push(o),o.isSelected=!0,e.setState({draggingElement:null,elementType:"selection"})}))}}}))}},{key:"componentDidUpdate",value:function(){J(pe,Ye,Be,{scrollX:this.state.scrollX,scrollY:this.state.scrollY,viewBackgroundColor:this.state.viewBackgroundColor}),this.saveDebounced(),me.isRecording()&&(me.pushEntry(me.generateCurrentEntry(pe)),me.clearRedoStack()),me.resumeRecording()}}]),t}(u.a.Component);function Re(e,t){var n=0;return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];clearTimeout(n),n=window.setTimeout((function(){return e.apply(void 0,o)}),t)}}var Ae=document.getElementById("root");f.a.render(u.a.createElement(Me,null),Ae);var Be=document.getElementById("canvas"),Ye=d.a.canvas(Be),De=Be.getContext("2d");f.a.render(u.a.createElement(Me,null),Ae)},93:function(e,t,n){e.exports=n(265)}},[[93,1,2]]]);
//# sourceMappingURL=main.2fea744f.chunk.js.map