(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{14:function(e,t,n){e.exports=n(23)},20:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n(5),o=n(4),l=n(1),i=n(2),c=n(7),u=n(6),s=n(8),d=n(0),h=n.n(d),f=n(10),v=n.n(f),p=n(9);function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t){t.sort((function(e,t){return e-t}));var n=!0;return t.forEach((function(t,r){(n=n&&t===r)||m(e,t-1,t)})),e}function g(e,t){var n=t.sort((function(e,t){return t-e})),r=!0;return n.forEach((function(t,n){(r=r&&t===e.length-n-1)||m(e,t+1,t)})),e}function w(e,t){t.sort((function(e,t){return e-t}));var n=t.map((function(t){return e[t]})),r=t.reverse().concat([0]);return r.forEach((function(t,n){if(0!==n)for(var a=r[n-1]-1;a>=t;--a)e[a+n]=e[a]})),n.forEach((function(t,n){e[n]=t})),e}function b(e,t){var n=t.sort((function(e,t){return t-e})),r=n.map((function(t){return e[t]}));return(t=n.reverse().concat([e.length])).forEach((function(n,r){if(0!==r)for(var a=t[r-1]+1;a<n;++a)e[a-r]=e[a]})),r.forEach((function(t,n){e[e.length-n-1]=t})),e}function E(){return Math.floor(Math.random()*Math.pow(2,31))}function x(e,t){var n=Math.random;Math.random=function(e){return function(){return(Math.pow(2,31)-1&(e=Math.imul(48271,e)))/Math.pow(2,31)}}(e);var r=t();return Math.random=n,r}var C=n(11),k=n.n(C);function S(e,t,n,r,a,o,l,i,c){var u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,s=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,d={id:k()(),type:e,x:t,y:n,width:u,height:s,strokeColor:r,backgroundColor:a,fillStyle:o,strokeWidth:l,roughness:i,opacity:c,isSelected:!1,seed:E()};return d}function O(e){var t=Object(o.a)({},e);return t.id=k()(),t.seed=E(),t}function M(e,t,n,r,a,o){var l,i,c=a-n,u=o-r,s=c*c+u*u,d=-1;0!==s&&(d=((e-n)*c+(t-r)*u)/s),d<0?(l=n,i=r):d>1?(l=a,i=o):(l=n+d*c,i=r+d*u);var h=e-l,f=t-i;return Math.hypot(h,f)}function B(e,t,n,r,a){return[(e-n)*Math.cos(a)-(t-r)*Math.sin(a)+n,(e-n)*Math.sin(a)+(t-r)*Math.cos(a)+r]}function j(e){return[e.width>=0?e.x:e.x+e.width,e.height>=0?e.y:e.y+e.height,e.width>=0?e.x+e.width:e.x,e.height>=0?e.y+e.height:e.y]}function T(e){var t=Math.floor(e.width/2)+1,n=e.width,r=Math.floor(e.height/2)+1;return[t,0,n,r,t,e.height,0,r]}function L(e){var t=e.width,n=e.height,a=Math.hypot(t-0,n-0),o=Math.min(30,a/2),l=t-(t-0)/a*o,i=n-(n-0)/a*o,c=B(l,i,t,n,-20*Math.PI/180),u=Object(r.a)(c,2),s=u[0],d=u[1],h=B(l,i,t,n,20*Math.PI/180),f=Object(r.a)(h,2);return[0,0,t,n,s,d,f[0],f[1]]}function D(e,t){var n=t.scrollX,r=t.scrollY,a=e.x,o=e.x+e.width,l=e.y,i=e.y+e.height,c={},u=e.width<0?8:-8,s=e.height<0?8:-8;return Math.abs(o-a)>40&&(c.n=[a+(o-a)/2+n-4,l-4+r+s,8,8],c.s=[a+(o-a)/2+n-4,i-4+r-s,8,8]),Math.abs(i-l)>40&&(c.w=[a-4+n+u,l+(i-l)/2+r-4,8,8],c.e=[o-4+n-u,l+(i-l)/2+r-4,8,8]),c.nw=[a-4+n+u,l-4+r+s,8,8],c.ne=[o-4+n-u,l-4+r+s,8,8],c.sw=[a-4+n+u,i-4+r-s,8,8],c.se=[o-4+n-u,i-4+r-s,8,8],"arrow"===e.type?{nw:c.nw,se:c.se}:c}function N(e,t,n){if("ellipse"===e.type){var a=Math.abs(t-e.x-e.width/2),o=Math.abs(n-e.y-e.height/2),l=.707,i=.707,c=Math.abs(e.width)/2,u=Math.abs(e.height)/2;return[0,1,2,3].forEach((function(e){var t=c*l,n=u*i,r=(c*c-u*u)*Math.pow(l,3)/c,s=(u*u-c*c)*Math.pow(i,3)/u,d=t-r,h=n-s,f=a-r,v=o-s,p=Math.hypot(h,d),m=Math.hypot(v,f);l=Math.min(1,Math.max(0,(f*p/m+r)/c)),i=Math.min(1,Math.max(0,(v*p/m+s)/u));var y=Math.hypot(i,l);l/=y,i/=y})),Math.hypot(c*l-a,u*i-o)<10}if("rectangle"===e.type){var s=j(e),d=Object(r.a)(s,4),h=d[0],f=d[1],v=d[2],p=d[3];return M(t,n,h,f,v,f)<10||M(t,n,v,f,v,p)<10||M(t,n,v,p,h,p)<10||M(t,n,h,p,h,f)<10}if("diamond"===e.type){t-=e.x,n-=e.y;var m=T(e),y=Object(r.a)(m,8),g=y[0],w=y[1],b=y[2],E=y[3],x=y[4],C=y[5],k=y[6],S=y[7];return M(t,n,g,w,b,E)<10||M(t,n,b,E,x,C)<10||M(t,n,x,C,k,S)<10||M(t,n,k,S,g,w)<10}if("arrow"===e.type){var O=L(e),B=Object(r.a)(O,8),D=B[0],N=B[1],Y=B[2],R=B[3],X=B[4],P=B[5],A=B[6],F=B[7];return M(t-=e.x,n-=e.y,X,P,Y,R)<10||M(t,n,D,N,Y,R)<10||M(t,n,A,F,Y,R)<10}if("text"===e.type){var H=j(e),K=Object(r.a)(H,4),U=K[0],z=K[1],W=K[2],I=K[3];return t>=U&&t<=W&&n>=z&&n<=I}if("selection"===e.type)return console.warn("This should not happen, we need to investigate why it does."),!1;throw new Error("Unimplemented type "+e.type)}function Y(e,t,n,r){var a=r.scrollX,o=r.scrollY;if(!e.isSelected||"text"===e.type)return!1;var l=D(e,{scrollX:a,scrollY:o}),i=Object.keys(l).filter((function(e){var r=l[e];return t+a>=r[0]&&t+a<=r[0]+r[2]&&n+o>=r[1]&&n+o<=r[1]+r[3]}));return i.length>0&&i[0]}function R(e,t,n){var r=t.x,a=t.y,o=n.scrollX,l=n.scrollY;return e.reduce((function(e,t){if(e)return e;var n=Y(t,r,a,{scrollX:o,scrollY:l});return n?{element:t,resizeHandle:n}:null}),null)}function X(e){return"text"===e.type}var P="ArrowLeft",A="ArrowRight",F="ArrowDown",H="ArrowUp",K="Enter",U="Escape",z="Delete",W="Backspace",I=/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)?"metaKey":"ctrlKey";function J(e){return e===P||e===A||e===F||e===H}function V(e){var t=e.initText,n=e.x,r=e.y,a=e.strokeColor,o=e.font,l=e.onSubmit,i=document.createElement("div");function c(e){e.stopPropagation()}function u(){i.innerText&&l(i.innerText),s()}function s(){i.onblur=null,i.onkeydown=null,window.removeEventListener("wheel",c,!0),document.body.removeChild(i)}i.contentEditable="plaintext-only",i.tabIndex=0,i.innerText=t,i.dataset.type="wysiwyg",Object.assign(i.style,{color:a,position:"absolute",top:r+"px",left:n+"px",transform:"translate(-50%, -50%)",textAlign:"center",display:"inline-block",font:o,padding:"4px",outline:"transparent",whiteSpace:"nowrap"}),i.onkeydown=function(e){if(e.key===U)return e.preventDefault(),t?(i.innerText=t,void u()):void s();e.key===K&&(e.preventDefault(),u())},i.onblur=u,window.addEventListener("wheel",c,!0),document.body.appendChild(i),i.focus();var d=window.getSelection();if(d){var h=document.createRange();h.selectNodeContents(i),d.removeAllRanges(),d.addRange(h)}}function q(e,t,n,a,o){var l=1/0,i=0,c=1/0,u=0;e.forEach((function(e){var t=j(e),n=Object(r.a)(t,4),a=n[0],o=n[1],s=n[2],d=n[3];l=Math.min(l,a),c=Math.min(c,o),i=Math.max(i,s),u=Math.max(u,d)})),l+=a,i+=a,c+=o,u+=o;var s=Math.max(-l,0),d=Math.max(-(t-i),0),h=Math.max(-c,0),f=Math.max(-(n-u),0),v=null;(s||d)&&(v={x:Math.min(s+4,t-15-4),y:n-6-4,width:Math.max(t-d-s-8,15),height:6});var p=null;return(h||f)&&(p={x:t-6-4,y:Math.min(h+4,n-15-4),width:6,height:Math.max(n-f-h-12,15)}),{horizontal:v,vertical:p}}function _(e){var t=Object(a.a)(e);return t.forEach((function(e){e.isSelected=!1})),t}function G(e){return e.filter((function(e){return!e.isSelected}))}function Z(e){var t=[];return e.forEach((function(e,n){e.isSelected&&t.push(n)})),t}var Q=function(e){return e.some((function(e){return e.isSelected}))};function $(e,t){var n=Array.from(new Set(e.filter((function(e){return e.isSelected})).map((function(e){return t(e)}))));return 1===n.length?n[0]:null}var ee=n(12),te=n.n(ee);function ne(e,t,n,r,a,o){e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+r-o,n),e.quadraticCurveTo(t+r,n,t+r,n+o),e.lineTo(t+r,n+a-o),e.quadraticCurveTo(t+r,n+a,t+r-o,n+a),e.lineTo(t+o,n+a),e.quadraticCurveTo(t,n+a,t,n+a-o),e.lineTo(t,n+o),e.quadraticCurveTo(t,n,t+o,n),e.closePath(),e.fill(),e.stroke()}var re=p.a.generator(null,null);function ae(e,t,n,a){var o=a.scrollX,l=a.scrollY;if("selection"===e.type){var i=n.fillStyle;n.fillStyle="rgba(0, 0, 255, 0.10)",n.fillRect(e.x+o,e.y+l,e.width,e.height),n.fillStyle=i}else if("rectangle"===e.type){var c=x(e.seed,(function(){return re.rectangle(0,0,e.width,e.height,{stroke:e.strokeColor,fill:e.backgroundColor,fillStyle:e.fillStyle,strokeWidth:e.strokeWidth,roughness:e.roughness})}));n.globalAlpha=e.opacity/100,n.translate(e.x+o,e.y+l),t.draw(c),n.translate(-e.x-o,-e.y-l),n.globalAlpha=1}else if("diamond"===e.type){var u=x(e.seed,(function(){var t=T(e),n=Object(r.a)(t,8),a=n[0],o=n[1],l=n[2],i=n[3],c=n[4],u=n[5],s=n[6],d=n[7];return re.polygon([[a,o],[l,i],[c,u],[s,d]],{stroke:e.strokeColor,fill:e.backgroundColor,fillStyle:e.fillStyle,strokeWidth:e.strokeWidth,roughness:e.roughness})}));n.globalAlpha=e.opacity/100,n.translate(e.x+o,e.y+l),t.draw(u),n.translate(-e.x-o,-e.y-l),n.globalAlpha=1}else if("ellipse"===e.type){var s=x(e.seed,(function(){return re.ellipse(e.width/2,e.height/2,e.width,e.height,{stroke:e.strokeColor,fill:e.backgroundColor,fillStyle:e.fillStyle,strokeWidth:e.strokeWidth,roughness:e.roughness})}));n.globalAlpha=e.opacity/100,n.translate(e.x+o,e.y+l),t.draw(s),n.translate(-e.x-o,-e.y-l),n.globalAlpha=1}else{if("arrow"===e.type){var d=L(e),h=Object(r.a)(d,8),f=h[0],v=h[1],p=h[2],m=h[3],y=h[4],g=h[5],w=h[6],b=h[7],E={stroke:e.strokeColor,strokeWidth:e.strokeWidth,roughness:e.roughness},C=x(e.seed,(function(){return[re.line(y,g,p,m,E),re.line(f,v,p,m,E),re.line(w,b,p,m,E)]}));return n.globalAlpha=e.opacity/100,n.translate(e.x+o,e.y+l),C.forEach((function(e){return t.draw(e)})),n.translate(-e.x-o,-e.y-l),void(n.globalAlpha=1)}if(!X(e))throw new Error("Unimplemented type "+e.type);n.globalAlpha=e.opacity/100;var k=n.font;n.font=e.font;var S=n.fillStyle;n.fillStyle=e.strokeColor,n.fillText(e.text,e.x+o,e.y+l+(e.baseline||e.actualBoundingBoxAscent||0)),n.fillStyle=S,n.font=k,n.globalAlpha=1}}function oe(e,t,n,a){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=l.offsetX,c=l.offsetY,u=l.renderScrollbars,s=void 0===u||u,d=l.renderSelection,h=void 0===d||d;if(n){var f=n.getContext("2d"),v=f.fillStyle;if("string"===typeof a.viewBackgroundColor?(f.fillStyle=a.viewBackgroundColor,f.fillRect(0,0,n.width,n.height)):f.clearRect(0,0,n.width,n.height),f.fillStyle=v,a=Object(o.a)({},a,{scrollX:"number"===typeof i?i:a.scrollX,scrollY:"number"===typeof c?c:a.scrollY}),e.forEach((function(e){ae(e,t,f,a)})),h){var p=e.filter((function(e){return e.isSelected}));if(p.forEach((function(e){var t=j(e),n=Object(r.a)(t,4),o=n[0],l=n[1],i=n[2],c=n[3],u=f.getLineDash();f.setLineDash([8,4]),f.strokeRect(o-4+a.scrollX,l-4+a.scrollY,i-o+8,c-l+8),f.setLineDash(u)})),1===p.length&&"text"!==p[0].type){var m=D(p[0],a);Object.values(m).forEach((function(e){f.strokeRect(e[0],e[1],e[2],e[3])}))}}if(s){var y=q(e,f.canvas.width/window.devicePixelRatio,f.canvas.height/window.devicePixelRatio,a.scrollX,a.scrollY),g=f.strokeStyle;f.fillStyle="rgba(0,0,0,0.3)",f.strokeStyle="rgba(255,255,255,0.8)",[y.horizontal,y.vertical].forEach((function(e){e&&ne(f,e.x,e.y,e.width,e.height,3)})),f.strokeStyle=g,f.fillStyle=v}}}function le(e,t){var n=document.createElement("a");n.setAttribute("download",e),n.setAttribute("href",t),n.click(),n.remove()}function ie(e,t){return{elements:e.map((function(e){return Object(o.a)({},e,{id:e.id||k()(),fillStyle:e.fillStyle||"hachure",strokeWidth:e.strokeWidth||1,roughness:e.roughness||1,opacity:null===e.opacity||void 0===e.opacity?100:e.opacity})})),appState:t}}function ce(e,t,n){for(var r=null,a=e.length-1;a>=0;--a)if(N(e[a],t,n)){r=e[a];break}return r}function ue(e){return e.charAt(0).toUpperCase()+e.slice(1)}function se(e){return e instanceof HTMLElement&&"wysiwyg"===e.dataset.type||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement}function de(e,t){var n=document.createElement("div"),r=document.body;n.style.position="absolute",n.style.whiteSpace="nowrap",n.style.font=t,r.appendChild(n),n.innerHTML=e;var a=n.offsetWidth,o=n.offsetHeight,l=document.createElement("span");l.style.display="inline-block",l.style.overflow="hidden",l.style.width="1px",l.style.height="1px",n.appendChild(l);var i=l.offsetTop+l.offsetHeight;return document.body.removeChild(n),{width:a,height:o,baseline:i}}function he(e){var t=e.options,n=e.value,r=e.onChange;return h.a.createElement("div",{className:"buttonList"},t.map((function(e){return h.a.createElement("button",{key:e.text,onClick:function(){return r(e.value)},className:n===e.value?"active":""},e.text)})))}var fe=[{icon:h.a.createElement("svg",{viewBox:"0 0 320 512"},h.a.createElement("path",{d:"M302.189 329.126H196.105l55.831 135.993c3.889 9.428-.555 19.999-9.444 23.999l-49.165 21.427c-9.165 4-19.443-.571-23.332-9.714l-53.053-129.136-86.664 89.138C18.729 472.71 0 463.554 0 447.977V18.299C0 1.899 19.921-6.096 30.277 5.443l284.412 292.542c11.472 11.179 3.007 31.141-12.5 31.141z"})),value:"selection"},{icon:h.a.createElement("svg",{viewBox:"0 0 448 512"},h.a.createElement("path",{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"})),value:"rectangle"},{icon:h.a.createElement("svg",{viewBox:"0 0 223.646 223.646"},h.a.createElement("path",{d:"M111.823 0L16.622 111.823 111.823 223.646 207.025 111.823z"})),value:"diamond"},{icon:h.a.createElement("svg",{viewBox:"0 0 512 512"},h.a.createElement("path",{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"})),value:"ellipse"},{icon:h.a.createElement("svg",{viewBox:"0 0 448 512"},h.a.createElement("path",{d:"M313.941 216H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12h301.941v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.569 0-33.941l-86.059-86.059c-15.119-15.119-40.971-4.411-40.971 16.971V216z"})),value:"arrow"},{icon:h.a.createElement("svg",{viewBox:"0 0 448 512"},h.a.createElement("path",{d:"M432 416h-23.41L277.88 53.69A32 32 0 0 0 247.58 32h-47.16a32 32 0 0 0-30.3 21.69L39.41 416H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16h-19.58l23.3-64h152.56l23.3 64H304a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM176.85 272L224 142.51 271.15 272z"})),value:"text"}],ve=fe.map((function(e){return e.value[0]}));function pe(e){return fe.reduce((function(t,n){return n.value[0]!==e?t:n.value}),"selection")}var me=function(){function e(){Object(l.a)(this,e),this.recording=!0,this.stateHistory=[],this.redoStack=[]}return Object(i.a)(e,[{key:"generateCurrentEntry",value:function(e){return JSON.stringify(e.map((function(e){return Object(o.a)({},e,{isSelected:!1})})))}},{key:"pushEntry",value:function(e){this.stateHistory.length>0&&this.stateHistory[this.stateHistory.length-1]===e||this.stateHistory.push(e)}},{key:"restoreEntry",value:function(e){this.skipRecording();try{return JSON.parse(e)}catch(t){return null}}},{key:"clearRedoStack",value:function(){this.redoStack.splice(0,this.redoStack.length)}},{key:"redoOnce",value:function(e){var t=this.generateCurrentEntry(e),n=this.redoStack.pop();return void 0!==n?(this.stateHistory.push(t),this.restoreEntry(n)):null}},{key:"undoOnce",value:function(e){var t=this.generateCurrentEntry(e),n=this.stateHistory.pop();return t===n&&(n=this.stateHistory.pop()),void 0!==n?(this.redoStack.push(t),this.restoreEntry(n)):null}},{key:"isRecording",value:function(){return this.recording}},{key:"skipRecording",value:function(){this.recording=!1}},{key:"resumeRecording",value:function(){this.recording=!0}}]),e}();function ye(e){var t=e.children,n=e.left,r=e.onCloseRequest,a=e.top;return h.a.createElement("div",{className:"popover",style:{top:a,left:n}},h.a.createElement("div",{className:"cover",onClick:r,onContextMenu:function(e){e.preventDefault(),r&&r()}}),t)}var ge;n(20);function we(e){var t=e.options,n=e.onCloseRequest,r=e.top,a=e.left;return h.a.createElement(ye,{onCloseRequest:n,top:r,left:a},h.a.createElement("ul",{className:"context-menu",onContextMenu:function(e){return e.preventDefault()}},t.map((function(e,t){return h.a.createElement("li",{key:t,className:"context-menu__option",onClick:n},h.a.createElement(be,e))}))))}function be(e){var t=e.label,n=e.action;return h.a.createElement("button",{className:"context-menu-option",onClick:n},t)}function Ee(){if(ge)return ge;var e=document.createElement("div");return document.body.appendChild(e),ge=e}function xe(){Object(f.unmountComponentAtNode)(Ee())}var Ce=function(e){var t=Array.of();e.options.forEach((function(e){e&&t.push(e)})),t.length&&Object(f.render)(h.a.createElement(we,{top:e.top,left:e.left,options:t,onCloseRequest:xe}),Ee())},ke=function(e){var t=e.title,n=e.children,a=e.defaultCollapsed,o=void 0!==a&&a,l=e.hide,i=void 0!==l&&l,c=Object(d.useState)(o),u=Object(r.a)(c,2),s=u[0],f=u[1];return i?null:h.a.createElement("div",{className:"panel"},h.a.createElement("h4",null,t),h.a.createElement("button",{className:"btn-panel-collapse",type:"button",onClick:function(e){e.preventDefault(),f((function(e){return!e}))}},h.a.createElement("span",{className:"btn-panel-collapse-icon ".concat(s?"btn-panel-collapse-icon-closed":"")},"\u25bc")),!s&&h.a.createElement("div",{className:"panelColumn"},n))},Se=function(e){var t=e.activeTool,n=e.onToolChange;return h.a.createElement(ke,{title:"Shapes"},h.a.createElement("div",{className:"panelTools"},fe.map((function(e){var r=e.value,a=e.icon;return h.a.createElement("label",{key:r,className:"tool",title:"".concat(ue(r)," - ").concat(ue(r)[0])},h.a.createElement("input",{type:"radio",checked:t===r,onChange:function(){n(r)}}),h.a.createElement("div",{className:"toolIcon"},a))}))))},Oe=function(e){var t=e.onBringForward,n=e.onBringToFront,r=e.onSendBackward,a=e.onSendToBack;return h.a.createElement("div",null,h.a.createElement("div",{className:"buttonList"},h.a.createElement("button",{type:"button",onClick:t},"Bring forward"),h.a.createElement("button",{type:"button",onClick:n},"Bring to front"),h.a.createElement("button",{type:"button",onClick:r},"Send backward"),h.a.createElement("button",{type:"button",onClick:a},"Send to back")))},Me=Object(d.lazy)((function(){return n.e(2).then(n.t.bind(null,231,7))}));function Be(e){var t=e.color,n=e.onChange,a=h.a.useState(!1),o=Object(r.a)(a,2),l=o[0],i=o[1];return h.a.createElement("div",null,h.a.createElement("button",{className:"swatch",style:t?{backgroundColor:t}:void 0,onClick:function(){return i(!l)}}),h.a.createElement(h.a.Suspense,{fallback:""},l?h.a.createElement(ye,{onCloseRequest:function(){return i(!1)}},h.a.createElement(Me,{colors:["#000000","#ABB8C3","#FFFFFF","#FF6900","#FCB900","#00D084","#8ED1FC","#0693E3","#EB144C","#F78DA7","#9900EF"],width:"205px",color:t||void 0,onChange:function(e){n(e.hex)}})):null),h.a.createElement("input",{type:"text",className:"swatch-input",value:t||"",onPaste:function(e){return n(e.clipboardData.getData("text"))},onChange:function(e){return n(e.target.value)}}))}var je=function(e){var t=e.title,n=e.onColorChange,r=e.colorValue;return h.a.createElement(h.a.Fragment,null,h.a.createElement("h5",null,t),h.a.createElement(Be,{color:r,onChange:function(e){return n(e)}}))},Te=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={value:e.value,edit:!1},n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({value:e.value})}},{key:"handleEdit",value:function(e){this.setState({value:e.target.value})}},{key:"handleBlur",value:function(){var e=this.state.value;e?(this.props.onChange(e),this.setState({edit:!1})):this.setState({value:this.props.value,edit:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.value,r=t.edit;return h.a.createElement(d.Fragment,null,r?h.a.createElement("input",{className:"project-name-input",name:"name",maxLength:25,value:n,onChange:function(t){return e.handleEdit(t)},onBlur:function(){return e.handleBlur()},onKeyDown:function(t){"Enter"===t.key&&e.handleBlur()},autoFocus:!0}):h.a.createElement("span",{onClick:function(){return e.setState({edit:!0})},className:"project-name"},n))}}]),t}(d.Component),Le=(n(21),function(){return h.a.createElement("svg",{viewBox:"0 0 384 512"},h.a.createElement("path",{fill:"currentColor",d:"M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z"}))}),De="toBlob"in HTMLCanvasElement.prototype&&"write"in navigator.clipboard&&"ClipboardItem"in window,Ne=function(e){var t=e.projectName,n=e.exportBackground,r=e.onProjectNameChange,a=e.onExportBackgroundChange,o=e.onSaveScene,l=e.onLoadScene,i=e.onExportCanvas;return h.a.createElement(ke,{title:"Export"},h.a.createElement("div",{className:"panelColumn"},h.a.createElement("h5",null,"Name"),t&&h.a.createElement(Te,{value:t,onChange:function(e){return r(e)}}),h.a.createElement("h5",null,"Image"),h.a.createElement("div",{className:"panelExport-imageButtons"},h.a.createElement("button",{className:"panelExport-exportToPngButton",onClick:function(){return i("png")}},"Export to PNG"),De&&h.a.createElement("button",{className:"panelExport-exportToClipboardButton",onClick:function(){return i("clipboard")},title:"Copy to clipboard (experimental)"},h.a.createElement(Le,null))),h.a.createElement("label",null,h.a.createElement("input",{type:"checkbox",checked:n,onChange:function(e){a(e.target.checked)}}),"background"),h.a.createElement("h5",null,"Scene"),h.a.createElement("button",{onClick:o},"Save as..."),h.a.createElement("button",{onClick:l},"Load file...")))},Ye=function(e){var t=e.viewBackgroundColor,n=e.onViewBackgroundColorChange,r=e.onClearCanvas;return h.a.createElement(ke,{title:"Canvas"},h.a.createElement("h5",null,"Canvas Background Color"),h.a.createElement(Be,{color:t,onChange:function(e){return n(e)}}),h.a.createElement("button",{type:"button",onClick:r,title:"Clear the canvas & reset background color"},"Clear canvas"))};n(22);n.d(t,"viewportCoordsToSceneCoords",(function(){return We})),n.d(t,"App",(function(){return Ie}));var Re={elements:[]}.elements,Xe={history:new me}.history,Pe="excalidraw-".concat(function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),a=e.getHours(),o=e.getMinutes(),l=e.getSeconds();return"".concat(t).concat(n).concat(r).concat(a).concat(o).concat(l)}()),Ae="{}";function Fe(){document.documentElement.style.cursor=""}function He(e,t,n){if(Fe(),null===t||""===t)return!1;var r=de(t,n);return e.text=t,e.font=n,e.x-=r.width/2,e.y-=r.height/2,e.width=r.width,e.height=r.height,e.baseline=r.baseline,!0}var Ke=-1,Ue=-1,ze=null;function We(e,t){var n=e.clientX,r=e.clientY;return{x:n-250-t.scrollX,y:r-0-t.scrollY}}var Ie=function(e){function t(){var e,n;Object(l.a)(this,t);for(var i=arguments.length,s=new Array(i),d=0;d<i;d++)s[d]=arguments[d];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).canvas=null,n.rc=null,n.state={draggingElement:null,resizingElement:null,elementType:"selection",exportBackground:!0,currentItemStrokeColor:"#000000",currentItemBackgroundColor:"#ffffff",currentItemFont:"20px Virgil",viewBackgroundColor:"#ffffff",scrollX:0,scrollY:0,cursorX:0,cursorY:0,name:Pe},n.onResize=function(){n.forceUpdate()},n.getCurrentCursorPosition=function(e){n.setState({cursorX:e.x,cursorY:e.y})},n.onKeyDown=function(e){if(e.key===U)return Re=_(Re),n.forceUpdate(),n.setState({elementType:"selection"}),window.document.activeElement instanceof HTMLElement&&window.document.activeElement.blur(),void e.preventDefault();if(!se(e.target))if(e.key===W||e.key===z)n.deleteSelectedElements(),e.preventDefault();else if(J(e.key)){var t=e.shiftKey?5:1;Re=Re.map((function(n){if(n.isSelected){var r=Object(o.a)({},n);return e.key===P?r.x-=t:e.key===A?r.x+=t:e.key===H?r.y-=t:e.key===F&&(r.y+=t),r}return n})),n.forceUpdate(),e.preventDefault()}else if(e[I]&&e.shiftKey&&e.altKey&&"KeyB"===e.code)n.moveOneLeft(),e.preventDefault();else if(e[I]&&e.shiftKey&&"KeyB"===e.code)n.moveAllLeft(),e.preventDefault();else if(e[I]&&e.shiftKey&&e.altKey&&"KeyF"===e.code)n.moveOneRight(),e.preventDefault();else if(e[I]&&e.shiftKey&&"KeyF"===e.code)n.moveAllRight(),e.preventDefault();else if(e[I]&&"KeyA"===e.code){var r=Object(a.a)(Re);r.forEach((function(e){e.isSelected=!0})),Re=r,n.forceUpdate(),e.preventDefault()}else if(ve.includes(e.key.toLowerCase()))n.setState({elementType:pe(e.key)});else if(e[I]&&"KeyZ"===e.code){if(e.shiftKey){var l=Xe.redoOnce(Re);null!==l&&(Re=l)}else{var i=Xe.undoOnce(Re);null!==i&&(Re=i)}n.forceUpdate(),e.preventDefault()}else e.metaKey&&e.shiftKey&&"KeyC"===e.code?n.copyStyles():e.metaKey&&e.shiftKey&&"KeyV"===e.code&&(n.pasteStyles(),e.preventDefault())},n.deleteSelectedElements=function(){Re=G(Re),n.forceUpdate()},n.clearCanvas=function(){window.confirm("This will clear the whole canvas. Are you sure?")&&(Re=[],n.setState({viewBackgroundColor:"#ffffff",scrollX:0,scrollY:0}),n.forceUpdate())},n.copyStyles=function(){var e=Re.find((function(e){return e.isSelected}));e&&(Ae=JSON.stringify(e))},n.pasteStyles=function(){var e=JSON.parse(Ae);Re=Re.map((function(t){if(t.isSelected){var r=Object(o.a)({},t,{backgroundColor:null===e||void 0===e?void 0:e.backgroundColor,strokeWidth:null===e||void 0===e?void 0:e.strokeWidth,strokeColor:null===e||void 0===e?void 0:e.strokeColor,fillStyle:null===e||void 0===e?void 0:e.fillStyle,opacity:null===e||void 0===e?void 0:e.opacity,roughness:null===e||void 0===e?void 0:e.roughness});return X(r)&&(r.font=null===e||void 0===e?void 0:e.font,n.redrawTextBoundingBox(r)),r}return t})),n.forceUpdate()},n.moveAllLeft=function(){Re=w(Object(a.a)(Re),Z(Re)),n.forceUpdate()},n.moveOneLeft=function(){Re=y(Object(a.a)(Re),Z(Re)),n.forceUpdate()},n.moveAllRight=function(){Re=b(Object(a.a)(Re),Z(Re)),n.forceUpdate()},n.moveOneRight=function(){Re=g(Object(a.a)(Re),Z(Re)),n.forceUpdate()},n.removeWheelEventListener=void 0,n.changeProperty=function(e){Re=Re.map((function(t){return t.isSelected?e(t):t})),n.forceUpdate()},n.changeOpacity=function(e){n.changeProperty((function(t){return Object(o.a)({},t,{opacity:+e.target.value})}))},n.changeStrokeColor=function(e){n.changeProperty((function(t){return Object(o.a)({},t,{strokeColor:e})})),n.setState({currentItemStrokeColor:e})},n.changeBackgroundColor=function(e){n.changeProperty((function(t){return Object(o.a)({},t,{backgroundColor:e})})),n.setState({currentItemBackgroundColor:e})},n.copyToClipboard=function(){if(navigator.clipboard){var e=JSON.stringify(Re.filter((function(e){return e.isSelected})));navigator.clipboard.writeText(e)}},n.pasteFromClipboard=function(){navigator.clipboard&&navigator.clipboard.readText().then((function(e){return n.addElementsFromPaste(e)}))},n.redrawTextBoundingBox=function(e){var t=de(e.text,e.font);e.width=t.width,e.height=t.height,e.baseline=t.baseline},n.handleWheel=function(e){e.preventDefault();var t=e.deltaX,r=e.deltaY;n.setState((function(e){return{scrollX:e.scrollX-t,scrollY:e.scrollY-r}}))},n.addElementsFromPaste=function(e){var t;try{t=JSON.parse(e)}catch(m){}if(Array.isArray(t)&&t.length>0&&t[0].type){Re=_(Re);var o=1/0,l=0,i=1/0,c=0,u=Math.min.apply(Math,Object(a.a)(t.map((function(e){return e.x})))),s=Math.min.apply(Math,Object(a.a)(t.map((function(e){return e.y})))),d=function(e,t){return Math.abs(e>t?e-t:t-e)};t.forEach((function(e){var t=j(e),n=Object(r.a)(t,4),a=n[0],u=n[1],s=n[2],d=n[3];o=Math.min(o,a),i=Math.min(i,u),l=Math.max(l,s),c=Math.max(c,d)}));var h=d(o,l)/2,f=d(i,c)/2,v=n.state.cursorX-n.state.scrollX-250-h,p=n.state.cursorY-n.state.scrollY-0-f;Re=[].concat(Object(a.a)(Re),Object(a.a)(t.map((function(e){var t=O(e);return t.x+=v-u,t.y+=p-s,t})))),n.forceUpdate()}},n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDown,!1),document.addEventListener("mousemove",this.getCurrentCursorPosition),window.addEventListener("resize",this.onResize,!1);var e=function(){var e=localStorage.getItem("excalidraw"),t=localStorage.getItem("excalidraw-state"),n=[];if(e)try{n=JSON.parse(e)}catch(a){}var r=null;if(t)try{r=JSON.parse(t)}catch(a){}return ie(n,r)}(),t=e.elements,n=e.appState;t&&(Re=t),n?this.setState(n):this.forceUpdate()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDown,!1),document.removeEventListener("mousemove",this.getCurrentCursorPosition,!1),window.removeEventListener("resize",this.onResize,!1)}},{key:"updateProjectName",value:function(e){this.setState({name:e})}},{key:"render",value:function(){var e=this,t=window.innerWidth-250,n=window.innerHeight-0;return h.a.createElement("div",{className:"container",onCut:function(t){t.clipboardData.setData("text/plain",JSON.stringify(Re.filter((function(e){return e.isSelected})))),Re=G(Re),e.forceUpdate(),t.preventDefault()},onCopy:function(e){e.clipboardData.setData("text/plain",JSON.stringify(Re.filter((function(e){return e.isSelected})))),e.preventDefault()},onPaste:function(t){var n=t.clipboardData.getData("text");e.addElementsFromPaste(n),t.preventDefault()}},h.a.createElement("div",{className:"sidePanel"},h.a.createElement(Se,{activeTool:this.state.elementType,onToolChange:function(t){e.setState({elementType:t}),Re=_(Re),document.documentElement.style.cursor="text"===t?"text":"crosshair",e.forceUpdate()}}),h.a.createElement(ke,{title:"Selection",hide:!Q(Re)},h.a.createElement(Oe,{onBringForward:this.moveOneRight,onBringToFront:this.moveAllRight,onSendBackward:this.moveOneLeft,onSendToBack:this.moveAllLeft}),h.a.createElement(je,{title:"Stroke Color",onColorChange:this.changeStrokeColor,colorValue:$(Re,(function(e){return e.strokeColor}))}),Re.some((function(e){return e.isSelected&&("rectangle"===e.type||"ellipse"===e.type||"diamond"===e.type)}))&&h.a.createElement(h.a.Fragment,null,h.a.createElement(je,{title:"Background Color",onColorChange:this.changeBackgroundColor,colorValue:$(Re,(function(e){return e.backgroundColor}))}),h.a.createElement("h5",null,"Fill"),h.a.createElement(he,{options:[{value:"solid",text:"Solid"},{value:"hachure",text:"Hachure"},{value:"cross-hatch",text:"Cross-hatch"}],value:$(Re,(function(e){return e.fillStyle})),onChange:function(t){e.changeProperty((function(e){return Object(o.a)({},e,{fillStyle:t})}))}})),function(e){return e.some((function(e){return e.isSelected&&("rectangle"===e.type||"ellipse"===e.type||"diamond"===e.type||"arrow"===e.type)}))}(Re)&&h.a.createElement(h.a.Fragment,null,h.a.createElement("h5",null,"Stroke Width"),h.a.createElement(he,{options:[{value:1,text:"Thin"},{value:2,text:"Bold"},{value:4,text:"Extra Bold"}],value:$(Re,(function(e){return e.strokeWidth})),onChange:function(t){e.changeProperty((function(e){return Object(o.a)({},e,{strokeWidth:t})}))}}),h.a.createElement("h5",null,"Sloppiness"),h.a.createElement(he,{options:[{value:0,text:"Draftsman"},{value:1,text:"Artist"},{value:3,text:"Cartoonist"}],value:$(Re,(function(e){return e.roughness})),onChange:function(t){return e.changeProperty((function(e){return Object(o.a)({},e,{roughness:t})}))}})),function(e){return e.some((function(e){return e.isSelected&&"text"===e.type}))}(Re)&&h.a.createElement(h.a.Fragment,null,h.a.createElement("h5",null,"Font size"),h.a.createElement(he,{options:[{value:16,text:"Small"},{value:20,text:"Medium"},{value:28,text:"Large"},{value:36,text:"Very Large"}],value:$(Re,(function(e){return X(e)&&+e.font.split("px ")[0]})),onChange:function(t){return e.changeProperty((function(n){return X(n)&&(n.font="".concat(t,"px ").concat(n.font.split("px ")[1]),e.redrawTextBoundingBox(n)),n}))}}),h.a.createElement("h5",null,"Font familly"),h.a.createElement(he,{options:[{value:"Virgil",text:"Virgil"},{value:"Helvetica",text:"Helvetica"},{value:"Courier",text:"Courier"}],value:$(Re,(function(e){return X(e)&&e.font.split("px ")[1]})),onChange:function(t){return e.changeProperty((function(n){return X(n)&&(n.font="".concat(n.font.split("px ")[0],"px ").concat(t),e.redrawTextBoundingBox(n)),n}))}})),h.a.createElement("h5",null,"Opacity"),h.a.createElement("input",{type:"range",min:"0",max:"100",onChange:this.changeOpacity,value:$(Re,(function(e){return e.opacity}))||0}),h.a.createElement("button",{onClick:this.deleteSelectedElements},"Delete selected")),h.a.createElement(Ye,{onClearCanvas:this.clearCanvas,onViewBackgroundColorChange:function(t){return e.setState({viewBackgroundColor:t})},viewBackgroundColor:this.state.viewBackgroundColor}),h.a.createElement(Ne,{projectName:this.state.name,onProjectNameChange:this.updateProjectName,onExportCanvas:function(t){return function(e,t,n,a){var o=a.exportBackground,l=a.exportPadding,i=void 0===l?10:l,c=a.viewBackgroundColor,u=a.name;if(!t.length)return window.alert("Cannot export empty canvas.");var s=1/0,d=0,h=1/0,f=0;function v(e,t){return Math.abs(e>t?e-t:t-e)}t.forEach((function(e){var t=j(e),n=Object(r.a)(t,4),a=n[0],o=n[1],l=n[2],i=n[3];s=Math.min(s,a),h=Math.min(h,o),d=Math.max(d,l),f=Math.max(f,i)}));var m=document.createElement("canvas");if(m.style.display="none",document.body.appendChild(m),m.width=v(s,d)+2*i,m.height=v(h,f)+2*i,oe(t,p.a.canvas(m),m,{viewBackgroundColor:o?c:null,scrollX:0,scrollY:0},{offsetX:-s+i,offsetY:-h+i,renderScrollbars:!1,renderSelection:!1}),"png"===e)le("".concat(u,".png"),m.toDataURL("image/png"));else if("clipboard"===e)try{m.toBlob((function(e){return te.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,te.a.awrap(navigator.clipboard.write([new window.ClipboardItem({"image/png":e})]));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),window.alert("Couldn't copy to clipboard. Try using Chrome browser.");case 8:case"end":return t.stop()}}),null,null,[[0,5]])}))}catch(y){window.alert("Couldn't copy to clipboard. Try using Chrome browser.")}m!==n&&m.remove()}(t,Re,e.canvas,e.state)},exportBackground:this.state.exportBackground,onExportBackgroundChange:function(t){return e.setState({exportBackground:t})},onSaveScene:function(){return function(e,t){var n=JSON.stringify({version:1,source:window.location.origin,elements:e});le("".concat(t,".json"),"data:text/plain;charset=utf-8,"+encodeURIComponent(n))}(Re,e.state.name)},onLoadScene:function(){return function(){var e=document.createElement("input"),t=new FileReader;return e.type="file",e.accept=".json",e.onchange=function(){e.files.length?t.readAsText(e.files[0],"utf8"):alert("A file was not selected.")},e.click(),new Promise((function(e){t.onloadend=function(){if(t.readyState===FileReader.DONE){var n=[];try{n=JSON.parse(t.result).elements||[]}catch(r){}e(ie(n,null))}}}))}().then((function(t){var n=t.elements;Re=n,e.forceUpdate()}))}})),h.a.createElement("canvas",{id:"canvas",style:{width:t,height:n},width:t*window.devicePixelRatio,height:n*window.devicePixelRatio,ref:function(r){null===e.canvas&&(e.canvas=r,e.rc=p.a.canvas(e.canvas)),e.removeWheelEventListener&&(e.removeWheelEventListener(),e.removeWheelEventListener=void 0),r&&(r.addEventListener("wheel",e.handleWheel,{passive:!1}),e.removeWheelEventListener=function(){return r.removeEventListener("wheel",e.handleWheel)},t===Ke&&n===Ue||(Ke=t,Ue=n,r.getContext("2d").scale(window.devicePixelRatio,window.devicePixelRatio)))},onContextMenu:function(t){t.preventDefault();var n=We(t,e.state),r=n.x,a=n.y,o=ce(Re,r,a);o?(o.isSelected||(Re=_(Re),o.isSelected=!0,e.forceUpdate()),Ce({options:[navigator.clipboard&&{label:"Copy",action:e.copyToClipboard},navigator.clipboard&&{label:"Paste",action:function(){return e.pasteFromClipboard()}},{label:"Copy Styles",action:e.copyStyles},{label:"Paste Styles",action:e.pasteStyles},{label:"Delete",action:e.deleteSelectedElements},{label:"Move Forward",action:e.moveOneRight},{label:"Send to Front",action:e.moveAllRight},{label:"Move Backwards",action:e.moveOneLeft},{label:"Send to Back",action:e.moveAllLeft}],top:t.clientY,left:t.clientX})):Ce({options:[navigator.clipboard&&{label:"Paste",action:function(){return e.pasteFromClipboard()}}],top:t.clientY,left:t.clientX})},onMouseDown:function(l){if(null!==ze&&ze(l),0===l.button){l.preventDefault(),se(document.activeElement)&&document.activeElement.blur();var i=function(e,t,n,a,o,l,i){var c=q(e,a,o,l,i),u=[c.horizontal,c.vertical].map((function(e){return e&&e.x<=t&&t<=e.x+e.width&&e.y<=n&&n<=e.y+e.height})),s=Object(r.a)(u,2);return{isOverHorizontalScrollBar:s[0],isOverVerticalScrollBar:s[1]}}(Re,l.clientX-250,l.clientY-0,t,n,e.state.scrollX,e.state.scrollY),c=i.isOverHorizontalScrollBar,u=i.isOverVerticalScrollBar,s=We(l,e.state),d=s.x,h=s.y,f=S(e.state.elementType,d,h,e.state.currentItemStrokeColor,e.state.currentItemBackgroundColor,"hachure",1,1,100),v=!1,p=!1,m=!1;if("selection"===e.state.elementType){var y=R(Re,{x:d,y:h},e.state);if(e.setState({resizingElement:y?y.element:null}),y)v=y.resizeHandle,document.documentElement.style.cursor="".concat(v,"-resize"),m=!0;else{ce(Re.filter((function(e){return e.isSelected})),d,h)||l.shiftKey||(Re=_(Re));var g=ce(Re,d,h);g&&(g.isSelected=!0,l.altKey&&(Re=[].concat(Object(a.a)(Re),Object(a.a)(Re.reduce((function(e,t){return t.isSelected&&(e=e.concat(O(t)),t.isSelected=!1),e}),[]))))),(p=Q(Re))&&(document.documentElement.style.cursor="move")}}if(X(f)){var w=l.clientX,b=l.clientY;if(!l.altKey){var E=e.getTextWysiwygSnappedToCenterPosition(d,h);E&&(f.x=E.elementCenterX,f.y=E.elementCenterY,w=E.wysiwygX,b=E.wysiwygY)}V({initText:"",x:w,y:b,strokeColor:e.state.currentItemStrokeColor,font:e.state.currentItemFont,onSubmit:function(t){He(f,t,e.state.currentItemFont),Re=[].concat(Object(a.a)(Re),[Object(o.a)({},f,{isSelected:!0})]),e.setState({draggingElement:null,elementType:"selection"})}})}else{"text"===e.state.elementType?(Re=[].concat(Object(a.a)(Re),[Object(o.a)({},f,{isSelected:!0})]),e.setState({draggingElement:null,elementType:"selection"})):(Re=[].concat(Object(a.a)(Re),[f]),e.setState({draggingElement:f}));var x=d,C=h;(c||u)&&(x=l.clientX-250,C=l.clientY-0);var k=function(t){if(t.target instanceof HTMLElement){if(c){var n=t.clientX-250,a=n-x;return e.setState((function(e){return{scrollX:e.scrollX-a}})),void(x=n)}if(u){var o=t.clientY-0,l=o-C;return e.setState((function(e){return{scrollY:e.scrollY-l}})),void(C=o)}if(m&&e.state.resizingElement){var i=e.state.resizingElement,s=Re.filter((function(e){return e.isSelected}));if(1===s.length){var d=We(t,e.state),h=d.x,f=d.y;return s.forEach((function(e){switch(v){case"nw":e.width+=e.x-x,e.x=x,t.shiftKey?(e.y+=e.height-e.width,e.height=e.width):(e.height+=e.y-C,e.y=C);break;case"ne":e.width=x-e.x,t.shiftKey?(e.y+=e.height-e.width,e.height=e.width):(e.height+=e.y-C,e.y=C);break;case"sw":e.width+=e.x-x,e.x=x,t.shiftKey?e.height=e.width:e.height=C-e.y;break;case"se":e.width+=h-x,t.shiftKey?e.height=e.width:e.height+=f-C;break;case"n":e.height+=e.y-C,e.y=C;break;case"w":e.width+=e.x-x,e.x=x;break;case"s":e.height=C-e.y;break;case"e":e.width=x-e.x}i.x=e.x,i.y=e.y})),x=h,C=f,Xe.skipRecording(),void e.forceUpdate()}}if(p){var y=Re.filter((function(e){return e.isSelected}));if(y.length){var g=We(t,e.state),w=g.x,b=g.y;return y.forEach((function(e){e.x+=w-x,e.y+=b-C})),x=w,C=b,Xe.skipRecording(),void e.forceUpdate()}}var E=e.state.draggingElement;if(E){var k=t.clientX-250-E.x-e.state.scrollX,S=t.clientY-0-E.y-e.state.scrollY;E.width=k,E.height=t.shiftKey?Math.abs(k)*Math.sign(S):S,"selection"===e.state.elementType&&(Re=function(e,t){var n=j(t),a=Object(r.a)(n,4),o=a[0],l=a[1],i=a[2],c=a[3];return e.forEach((function(e){var t=j(e),n=Object(r.a)(t,4),a=n[0],u=n[1],s=n[2],d=n[3];e.isSelected="selection"!==e.type&&o<=a&&l<=u&&i>=s&&c>=d})),e}(Re,E)),Xe.skipRecording(),e.forceUpdate()}}},M=function t(n){var r=e.state,a=r.draggingElement,o=r.elementType;if(ze=null,window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",t),Fe(),null===a)return Re=_(Re),void e.forceUpdate();"selection"===o?(p&&(p=!1),Re=Re.slice(0,-1)):a.isSelected=!0,e.setState({draggingElement:null,elementType:"selection"}),e.forceUpdate()};ze=M,window.addEventListener("mousemove",k),window.addEventListener("mouseup",M),Xe.skipRecording(),e.forceUpdate()}}},onDoubleClick:function(t){var n=We(t,e.state),r=n.x,l=n.y,i=ce(Re,r,l),c=S("text",r,l,e.state.currentItemStrokeColor,e.state.currentItemBackgroundColor,"hachure",1,1,100),u="",s=t.clientX,d=t.clientY;if(i&&X(i))Re=Re.filter((function(e){return e.id!==i.id})),e.forceUpdate(),Object.assign(c,i),c.x=i.x+i.width/2,c.y=i.y+i.height/2,u=i.text,s=e.state.scrollX+i.x+250+i.width/2,d=e.state.scrollY+i.y+0+i.height/2;else if(!t.altKey){var h=e.getTextWysiwygSnappedToCenterPosition(r,l);h&&(c.x=h.elementCenterX,c.y=h.elementCenterY,s=h.wysiwygX,d=h.wysiwygY)}V({initText:u,x:s,y:d,strokeColor:c.strokeColor,font:c.font||e.state.currentItemFont,onSubmit:function(t){He(c,t,c.font||e.state.currentItemFont),Re=[].concat(Object(a.a)(Re),[Object(o.a)({},c,{isSelected:!0})]),e.setState({draggingElement:null,elementType:"selection"})}})},onMouseMove:function(t){if(!Boolean(t.buttons)&&"selection"===e.state.elementType){var n=We(t,e.state),r=n.x,a=n.y,o=R(Re,{x:r,y:a},e.state);if(o&&o.resizeHandle)document.documentElement.style.cursor="".concat(o.resizeHandle,"-resize");else{var l=ce(Re,r,a);if(l){var i=Y(l,r,a,{scrollX:e.state.scrollX,scrollY:e.state.scrollY});document.documentElement.style.cursor=i?"".concat(i,"-resize"):"move"}else document.documentElement.style.cursor=""}}}}))}},{key:"getTextWysiwygSnappedToCenterPosition",value:function(e,t){var n=function(e,t,n){for(var a=null,o=e.length-1;o>=0;--o){var l=j(e[o]),i=Object(r.a)(l,4),c=i[0],u=i[1],s=i[2],d=i[3];if(c<t&&t<s&&u<n&&n<d){a=e[o];break}}return a}(Re,e,t);if(n){var a=n.x+n.width/2,o=n.y+n.height/2;if(Math.hypot(e-a,t-o)<30)return{wysiwygX:this.state.scrollX+n.x+250+n.width/2,wysiwygY:this.state.scrollY+n.y+0+n.height/2,elementCenterX:a,elementCenterY:o}}}},{key:"componentDidUpdate",value:function(){var e,t;oe(Re,this.rc,this.canvas,{scrollX:this.state.scrollX,scrollY:this.state.scrollY,viewBackgroundColor:this.state.viewBackgroundColor}),e=Re,t=this.state,localStorage.setItem("excalidraw",JSON.stringify(e)),localStorage.setItem("excalidraw-state",JSON.stringify(t)),Xe.isRecording()&&(Xe.pushEntry(Xe.generateCurrentEntry(Re)),Xe.clearRedoStack()),Xe.resumeRecording()}}]),t}(h.a.Component),Je=document.getElementById("root");v.a.render(h.a.createElement(Ie,null),Je)}},[[14,1,3]],[2]]);
//# sourceMappingURL=main.ec845674.chunk.js.map