(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{263:function(e,t,n){},264:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(3),o=n(6),l=n(5),c=n(7),i=n(92),u=n(16),s=n(56),h=n(0),f=n.n(h),d=n(55),m=n.n(d),v=n(36),g=n(35);function p(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t){t.sort((function(e,t){return e-t}));var n=!0;t.forEach((function(t,r){(n=n&&t===r)||p(e,t-1,t)}))}function E(e,t){var n=t.sort((function(e,t){return t-e})),r=!0;n.forEach((function(t,n){(r=r&&t===e.length-n-1)||p(e,t+1,t)}))}function k(e,t){t.sort((function(e,t){return e-t}));var n=t.map((function(t){return e[t]})),r=t.reverse().concat([0]);r.forEach((function(t,n){if(0!==n)for(var a=r[n-1]-1;a>=t;--a)e[a+n]=e[a]})),n.forEach((function(t,n){e[n]=t}))}function w(e,t){var n=t.sort((function(e,t){return t-e})),r=n.map((function(t){return e[t]}));(t=n.reverse().concat([e.length])).forEach((function(n,r){if(0!==r)for(var a=t[r-1]+1;a<n;++a)e[a-r]=e[a]})),r.forEach((function(t,n){e[e.length-n-1]=t}))}function S(e,t,n,r,a,o){e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+r-o,n),e.quadraticCurveTo(t+r,n,t+r,n+o),e.lineTo(t+r,n+a-o),e.quadraticCurveTo(t+r,n+a,t+r-o,n+a),e.lineTo(t+o,n+a),e.quadraticCurveTo(t,n+a,t,n+a-o),e.lineTo(t,n+o),e.quadraticCurveTo(t,n,t+o,n),e.closePath(),e.fill(),e.stroke()}var C=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={value:e.value,edit:!1},n}return Object(c.a)(t,e),Object(a.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({value:e.value})}},{key:"handleEdit",value:function(e){this.setState({value:e.target.value})}},{key:"handleBlur",value:function(){var e=this.state.value;e?(this.props.onChange(e),this.setState({edit:!1})):this.setState({value:this.props.value,edit:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.value,r=t.edit;return f.a.createElement(h.Fragment,null,r?f.a.createElement("input",{className:"project-name-input",name:"name",maxLength:25,value:n,onChange:function(t){return e.handleEdit(t)},onBlur:function(){return e.handleBlur()},onKeyDown:function(t){"Enter"===t.key&&e.handleBlur()},autoFocus:!0}):f.a.createElement("span",{onClick:function(){return e.setState({edit:!0})},className:"project-name"},n))}}]),t}(h.Component),x=(n(263),Array.of()),b="excalidraw-".concat(function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),a=e.getHours(),o=e.getMinutes(),l=e.getSeconds();return"".concat(t).concat(n).concat(r).concat(a).concat(o).concat(l)}()),A=!1,B=[];function M(){return JSON.stringify(x.map((function(e){return Object(s.a)({},e,{isSelected:!1})})))}function N(e){var t=JSON.parse(e);x.splice(0,x.length),t.forEach((function(e){_(e),x.push(e)})),A=!0}function O(){return Math.floor(Math.random()*Math.pow(2,31))}function P(e,t){var n=Math.random;Math.random=function(e){return function(){return(Math.pow(2,31)-1&(e=Math.imul(48271,e)))/Math.pow(2,31)}}(e);var r=t();return Math.random=n,r}function D(e,t,n,r,a,o){var l,c,i=a-n,u=o-r,s=i*i+u*u,h=-1;0!==s&&(h=((e-n)*i+(t-r)*u)/s),h<0?(l=n,c=r):h>1?(l=a,c=o):(l=n+h*i,c=r+h*u);var f=e-l,d=t-c;return Math.hypot(f,d)}function Y(e,t,n){if("ellipse"===e.type){var r=Math.abs(t-e.x-e.width/2),a=Math.abs(n-e.y-e.height/2),o=.707,l=.707,c=e.width/2,i=e.height/2;return[0,1,2,3].forEach((function(e){var t=c*o,n=i*l,u=(c*c-i*i)*Math.pow(o,3)/c,s=(i*i-c*c)*Math.pow(l,3)/i,h=t-u,f=n-s,d=r-u,m=a-s,v=Math.hypot(f,h),g=Math.hypot(m,d);o=Math.min(1,Math.max(0,(d*v/g+u)/c)),l=Math.min(1,Math.max(0,(m*v/g+s)/i));var p=Math.hypot(l,o);o/=p,l/=p})),Math.hypot(c*o-r,i*l-a)<10}if("rectangle"===e.type){var s=J(e),h=V(e),f=G(e),d=q(e);return D(t,n,s,f,h,f)<10||D(t,n,h,f,h,d)<10||D(t,n,h,d,s,d)<10||D(t,n,s,d,s,f)<10}if("diamond"===e.type){t-=e.x,n-=e.y;var m=F(e),v=Object(u.a)(m,8),g=v[0],p=v[1],y=v[2],E=v[3],k=v[4],w=v[5],S=v[6],C=v[7];return D(t,n,g,p,y,E)<10||D(t,n,y,E,k,w)<10||D(t,n,k,w,S,C)<10||D(t,n,S,C,g,p)<10}if("arrow"===e.type){var x=H(e),b=Object(u.a)(x,8),A=b[0],B=b[1],M=b[2],N=b[3],O=b[4],P=b[5],Y=b[6],X=b[7];return D(t-=e.x,n-=e.y,O,P,M,N)<10||D(t,n,A,B,M,N)<10||D(t,n,Y,X,M,N)<10}if("text"===e.type){var R=J(e),U=V(e),K=G(e),L=q(e);return t>=R&&t<=U&&n>=K&&n<=L}if("selection"===e.type)return console.warn("This should not happen, we need to investigate why it does."),!1;throw new Error("Unimplemented type "+e.type)}function X(e,t,n,r){if("text"===e.type)return!1;var a=U(e,r),o=Object.keys(a).filter((function(e){var o=a[e];return t+r.scrollX>=o[0]&&t+r.scrollX<=o[0]+o[2]&&n+r.scrollY>=o[1]&&n+r.scrollY<=o[1]+o[3]}));return o.length>0&&o[0]}function R(e,t,n,r){var a=1/0,o=0,l=1/0,c=0;x.forEach((function(e){a=Math.min(a,J(e)),o=Math.max(o,V(e)),l=Math.min(l,G(e)),c=Math.max(c,q(e))})),a+=n,o+=n,l+=r,c+=r;var i=Math.max(-a,0),u=Math.max(-(e-o),0),s=Math.max(-l,0),h=Math.max(-(t-c),0),f=null;(i||u)&&(f={x:Math.min(i+4,e-15-4),y:t-6-4,width:Math.max(e-u-i-8,15),height:6});var d=null;return(s||h)&&(d={x:e-6-4,y:Math.min(s+4,t-15-4),width:6,height:Math.max(t-h-s-12,15)}),{horizontal:f,vertical:d}}function U(e,t){var n=e.x,r=e.x+e.width,a=e.y,o=e.y+e.height,l={},c=e.width<0?8:-8,i=e.height<0?8:-8;return Math.abs(r-n)>40&&(l.n=[n+(r-n)/2+t.scrollX-4,a-4+t.scrollY+i,8,8],l.s=[n+(r-n)/2+t.scrollX-4,o-4+t.scrollY-i,8,8]),Math.abs(o-a)>40&&(l.w=[n-4+t.scrollX+c,a+(o-a)/2+t.scrollY-4,8,8],l.e=[r-4+t.scrollX-c,a+(o-a)/2+t.scrollY-4,8,8]),l.nw=[n-4+t.scrollX+c,a-4+t.scrollY+i,8,8],l.ne=[r-4+t.scrollX-c,a-4+t.scrollY+i,8,8],l.sw=[n-4+t.scrollX+c,o-4+t.scrollY-i,8,8],l.se=[r-4+t.scrollX-c,o-4+t.scrollY-i,8,8],"arrow"===e.type?{nw:l.nw,se:l.se}:l}function K(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.offsetX,o=r.offsetY,l=r.renderScrollbars,c=void 0===l||l,i=r.renderSelection,u=void 0===i||i;if(t){var h=t.getContext("2d"),f=h.fillStyle;"string"===typeof n.viewBackgroundColor?(h.fillStyle=n.viewBackgroundColor,h.fillRect(0,0,t.width,t.height)):h.clearRect(0,0,t.width,t.height),h.fillStyle=f;var d=de();if(n=Object(s.a)({},n,{scrollX:"number"===typeof a?a:n.scrollX,scrollY:"number"===typeof o?o:n.scrollY}),x.forEach((function(t){if(t.draw(e,h,n),u&&t.isSelected){var r=J(t),a=V(t),o=G(t),l=q(t),c=h.getLineDash();if(h.setLineDash([8,4]),h.strokeRect(r-4+n.scrollX,o-4+n.scrollY,a-r+8,l-o+8),h.setLineDash(c),"text"!==t.type&&1===d.length){var i=U(t,n);Object.values(i).forEach((function(e){h.strokeRect(e[0],e[1],e[2],e[3])}))}}})),c){var m=R(h.canvas.width/window.devicePixelRatio,h.canvas.height/window.devicePixelRatio,n.scrollX,n.scrollY),v=h.strokeStyle;h.fillStyle="rgba(0,0,0,0.3)",h.strokeStyle="rgba(255,255,255,0.8)",[m.horizontal,m.vertical].forEach((function(e){e&&S(h,e.x,e.y,e.width,e.height,3)})),h.strokeStyle=v,h.fillStyle=f}}}function L(e,t){var n=document.createElement("a");n.setAttribute("download",e),n.setAttribute("href",t),n.click(),n.remove()}function T(e,t,n,r,a){return[(e-n)*Math.cos(a)-(t-r)*Math.sin(a)+n,(e-n)*Math.sin(a)+(t-r)*Math.cos(a)+r]}var z,W=v.a.generator(null,null);function j(e){return"text"===e.type}function I(e){return e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement}function H(e){var t=e.width,n=e.height,r=Math.hypot(t-0,n-0),a=Math.min(30,r/2),o=t-(t-0)/r*a,l=n-(n-0)/r*a,c=T(o,l,t,n,-20*Math.PI/180),i=Object(u.a)(c,2),s=i[0],h=i[1],f=T(o,l,t,n,20*Math.PI/180),d=Object(u.a)(f,2);return[0,0,t,n,s,h,d[0],d[1]]}function F(e){var t=Math.PI+e.width/2,n=e.height-e.height,r=e.width,a=Math.PI+e.height/2;return[t,n,r,a,t,e.height,n,a]}function _(e){if("selection"===e.type)e.draw=function(t,n,r){var a=r.scrollX,o=r.scrollY,l=n.fillStyle;n.fillStyle="rgba(0, 0, 255, 0.10)",n.fillRect(e.x+a,e.y+o,e.width,e.height),n.fillStyle=l};else if("rectangle"===e.type){var t=P(e.seed,(function(){return W.rectangle(0,0,e.width,e.height,{stroke:e.strokeColor,fill:e.backgroundColor,fillStyle:e.fillStyle,strokeWidth:e.strokeWidth,roughness:e.roughness})}));e.draw=function(n,r,a){var o=a.scrollX,l=a.scrollY;r.globalAlpha=e.opacity/100,r.translate(e.x+o,e.y+l),n.draw(t),r.translate(-e.x-o,-e.y-l),r.globalAlpha=1}}else if("diamond"===e.type){var n=P(e.seed,(function(){var t=F(e),n=Object(u.a)(t,8),r=n[0],a=n[1],o=n[2],l=n[3],c=n[4],i=n[5],s=n[6],h=n[7];return W.polygon([[r,a],[o,l],[c,i],[s,h]],{stroke:e.strokeColor,fill:e.backgroundColor,fillStyle:e.fillStyle,strokeWidth:e.strokeWidth,roughness:e.roughness})}));e.draw=function(t,r,a){var o=a.scrollX,l=a.scrollY;r.globalAlpha=e.opacity/100,r.translate(e.x+o,e.y+l),t.draw(n),r.translate(-e.x-o,-e.y-l),r.globalAlpha=1}}else if("ellipse"===e.type){var r=P(e.seed,(function(){return W.ellipse(e.width/2,e.height/2,e.width,e.height,{stroke:e.strokeColor,fill:e.backgroundColor,fillStyle:e.fillStyle,strokeWidth:e.strokeWidth,roughness:e.roughness})}));e.draw=function(t,n,a){var o=a.scrollX,l=a.scrollY;n.globalAlpha=e.opacity/100,n.translate(e.x+o,e.y+l),t.draw(r),n.translate(-e.x-o,-e.y-l),n.globalAlpha=1}}else{if("arrow"===e.type){var a=H(e),o=Object(u.a)(a,8),l=o[0],c=o[1],i=o[2],s=o[3],h=o[4],f=o[5],d=o[6],m=o[7],v=P(e.seed,(function(){return[W.line(h,f,i,s,{stroke:e.strokeColor,strokeWidth:e.strokeWidth,roughness:e.roughness}),W.line(l,c,i,s,{stroke:e.strokeColor,strokeWidth:e.strokeWidth,roughness:e.roughness}),W.line(d,m,i,s,{stroke:e.strokeColor,strokeWidth:e.strokeWidth,roughness:e.roughness})]}));return void(e.draw=function(t,n,r){var a=r.scrollX,o=r.scrollY;n.globalAlpha=e.opacity/100,n.translate(e.x+a,e.y+o),v.forEach((function(e){return t.draw(e)})),n.translate(-e.x-a,-e.y-o),n.globalAlpha=1})}if(!j(e))throw new Error("Unimplemented type "+e.type);e.draw=function(t,n,r){var a=r.scrollX,o=r.scrollY;n.globalAlpha=e.opacity/100;var l=n.font;n.font=e.font;var c=n.fillStyle;n.fillStyle=e.strokeColor,n.fillText(e.text,e.x+a,e.y+e.actualBoundingBoxAscent+o),n.fillStyle=c,n.font=l,n.globalAlpha=1}}}function J(e){return e.width>=0?e.x:e.x+e.width}function V(e){return e.width>=0?e.x+e.width:e.x}function G(e){return e.height>=0?e.y:e.y+e.height}function q(e){return e.height>=0?e.y+e.height:e.y}function Z(){x.forEach((function(e){e.isSelected=!1}))}function Q(){document.documentElement.style.cursor=""}function $(){for(var e=x.length-1;e>=0;--e)x[e].isSelected&&x.splice(e,1)}function ee(e,t){try{return e&&(x.splice.apply(x,[0,x.length].concat(Object(i.a)("string"===typeof e?JSON.parse(e):e))),x.forEach((function(e){return _(e)}))),t?JSON.parse(t):null}catch(n){return x.splice(0,x.length),null}}!function(e){e[e.CANVAS_BACKGROUND=0]="CANVAS_BACKGROUND",e[e.SHAPE_STROKE=1]="SHAPE_STROKE",e[e.SHAPE_BACKGROUND=2]="SHAPE_BACKGROUND"}(z||(z={}));var te="ArrowLeft",ne="ArrowRight",re="ArrowDown",ae="ArrowUp",oe="Escape",le="Delete",ce="Backspace",ie=[{icon:f.a.createElement("svg",{viewBox:"0 0 320 512"},f.a.createElement("path",{d:"M302.189 329.126H196.105l55.831 135.993c3.889 9.428-.555 19.999-9.444 23.999l-49.165 21.427c-9.165 4-19.443-.571-23.332-9.714l-53.053-129.136-86.664 89.138C18.729 472.71 0 463.554 0 447.977V18.299C0 1.899 19.921-6.096 30.277 5.443l284.412 292.542c11.472 11.179 3.007 31.141-12.5 31.141z"})),value:"selection"},{icon:f.a.createElement("svg",{viewBox:"0 0 448 512"},f.a.createElement("path",{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"})),value:"rectangle"},{icon:f.a.createElement("svg",{viewBox:"0 0 223.646 223.646"},f.a.createElement("path",{d:"M111.823 0L16.622 111.823 111.823 223.646 207.025 111.823z"})),value:"diamond"},{icon:f.a.createElement("svg",{viewBox:"0 0 512 512"},f.a.createElement("path",{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"})),value:"ellipse"},{icon:f.a.createElement("svg",{viewBox:"0 0 448 512"},f.a.createElement("path",{d:"M313.941 216H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12h301.941v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.569 0-33.941l-86.059-86.059c-15.119-15.119-40.971-4.411-40.971 16.971V216z"})),value:"arrow"},{icon:f.a.createElement("svg",{viewBox:"0 0 448 512"},f.a.createElement("path",{d:"M432 416h-23.41L277.88 53.69A32 32 0 0 0 247.58 32h-47.16a32 32 0 0 0-30.3 21.69L39.41 416H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16h-19.58l23.3-64h152.56l23.3 64H304a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM176.85 272L224 142.51 271.15 272z"})),value:"text"}],ue=ie.map((function(e){return e.value[0]}));function se(e){return e.charAt(0).toUpperCase()+e.slice(1)}function he(e){return ie.reduce((function(t,n){return n.value[0]!==e?t:n.value}),"selection")}function fe(e){return e===te||e===ne||e===re||e===ae}function de(){var e=[];return x.forEach((function(t,n){t.isSelected&&e.push(n)})),e}var me=function(){return x.some((function(e){return e.isSelected}))},ve=function(){return x.some((function(e){return e.isSelected&&("rectangle"===e.type||"ellipse"===e.type||"diamond"===e.type)}))};function ge(){var e=Array.from(new Set(x.filter((function(e){return e.isSelected})).map((function(e){return e.fillStyle}))));return 1===e.length?e[0]:""}function pe(){var e=Array.from(new Set(x.filter((function(e){return e.isSelected})).map((function(e){return"".concat(e.strokeWidth)}))));return 1===e.length?+e[0]:""}function ye(){var e=Array.from(new Set(x.filter((function(e){return e.isSelected})).map((function(e){return"".concat(e.roughness)}))));return 1===e.length?+e[0]:""}function Ee(){var e=Array.from(new Set(x.filter((function(e){return e.isSelected})).map((function(e){return"".concat(e.opacity)}))));return 1===e.length?+e[0]:""}function ke(){var e=Array.from(new Set(x.filter((function(e){return e.isSelected})).map((function(e){return e.strokeColor}))));return 1===e.length?e[0]:null}function we(){var e=Array.from(new Set(x.filter((function(e){return e.isSelected})).map((function(e){return e.backgroundColor}))));return 1===e.length?e[0]:null}var Se=-1,Ce=-1,xe=null,be=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).state={draggingElement:null,resizingElement:null,elementType:"selection",currentColorPicker:null,exportBackground:!0,currentItemStrokeColor:"#000000",currentItemBackgroundColor:"#ffffff",viewBackgroundColor:"#ffffff",scrollX:0,scrollY:0,name:b},n.onResize=function(){n.forceUpdate()},n.onKeyDown=function(e){if(!I(e.target))if(e.key===oe)Z(),n.forceUpdate(),e.preventDefault();else if(e.key===ce||e.key===le)$(),n.forceUpdate(),e.preventDefault();else if(fe(e.key)){var t=e.shiftKey?5:1;x.forEach((function(n){n.isSelected&&(e.key===te?n.x-=t:e.key===ne?n.x+=t:e.key===ae?n.y-=t:e.key===re&&(n.y+=t))})),n.forceUpdate(),e.preventDefault()}else if(e.metaKey&&e.shiftKey&&e.altKey&&"KeyB"===e.code)n.moveOneLeft(),e.preventDefault();else if(e.metaKey&&e.shiftKey&&"KeyB"===e.code)n.moveAllLeft(),e.preventDefault();else if(e.metaKey&&e.shiftKey&&e.altKey&&"KeyF"===e.code)n.moveOneRight(),e.preventDefault();else if(e.metaKey&&e.shiftKey&&"KeyF"===e.code)n.moveAllRight(),e.preventDefault();else if(e.metaKey&&"KeyA"===e.code)x.forEach((function(e){e.isSelected=!0})),n.forceUpdate(),e.preventDefault();else if(ue.includes(e.key.toLowerCase()))n.setState({elementType:he(e.key)});else if(e.metaKey&&"KeyZ"===e.code){var r=B.pop();M()===r&&(r=B.pop()),void 0!==r&&N(r),n.forceUpdate(),e.preventDefault()}},n.deleteSelectedElements=function(){$(),n.forceUpdate()},n.clearCanvas=function(){window.confirm("This will clear the whole canvas. Are you sure?")&&(x.splice(0,x.length),n.setState({viewBackgroundColor:"#ffffff",scrollX:0,scrollY:0}),n.forceUpdate())},n.moveAllLeft=function(){k(x,de()),n.forceUpdate()},n.moveOneLeft=function(){y(x,de()),n.forceUpdate()},n.moveAllRight=function(){w(x,de()),n.forceUpdate()},n.moveOneRight=function(){E(x,de()),n.forceUpdate()},n.removeWheelEventListener=void 0,n.changeProperty=function(e){x.forEach((function(t){t.isSelected&&(e(t),_(t))})),n.forceUpdate()},n.changeFillStyle=function(e){n.changeProperty((function(t){return t.fillStyle=e}))},n.changeStrokeWidth=function(e){n.changeProperty((function(t){return t.strokeWidth=+e.target.value}))},n.changeRoughness=function(e){n.changeProperty((function(t){return t.roughness=+e.target.value}))},n.changeOpacity=function(e){n.changeProperty((function(t){return t.opacity=+e.target.value}))},n.changeStrokeColor=function(e){n.changeProperty((function(t){return t.strokeColor=e})),n.setState({currentItemStrokeColor:e})},n.changeBackgroundColor=function(e){n.changeProperty((function(t){return t.backgroundColor=e})),n.setState({currentItemBackgroundColor:e})},n.handleWheel=function(e){e.preventDefault();var t=e.deltaX,r=e.deltaY;n.setState((function(e){return{scrollX:e.scrollX-t,scrollY:e.scrollY-r}}))},n}return Object(c.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("resize",this.onResize,!1);var e=ee(localStorage.getItem("excalidraw"),localStorage.getItem("excalidraw-state"));e&&this.setState(e)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("resize",this.onResize,!1)}},{key:"updateProjectName",value:function(e){this.setState({name:e})}},{key:"render",value:function(){var e=this,t=window.innerWidth-250,n=window.innerHeight-0;return f.a.createElement("div",{className:"container",onCut:function(t){t.clipboardData.setData("text/plain",JSON.stringify(x.filter((function(e){return e.isSelected})))),$(),e.forceUpdate(),t.preventDefault()},onCopy:function(e){e.clipboardData.setData("text/plain",JSON.stringify(x.filter((function(e){return e.isSelected})))),e.preventDefault()},onPaste:function(t){var n,r=t.clipboardData.getData("text");try{n=JSON.parse(r)}catch(t){}Array.isArray(n)&&n.length>0&&n[0].type&&(Z(),n.forEach((function(e){e.x+=10,e.y+=10,e.seed=O(),_(e),x.push(e)})),e.forceUpdate()),t.preventDefault()}},f.a.createElement("div",{className:"sidePanel"},f.a.createElement("h4",null,"Shapes"),f.a.createElement("div",{className:"panelTools"},ie.map((function(t){var n=t.value,r=t.icon;return f.a.createElement("label",{key:n,className:"tool",title:"".concat(se(n)," - ").concat(se(n)[0])},f.a.createElement("input",{type:"radio",checked:e.state.elementType===n,onChange:function(){e.setState({elementType:n}),Z(),document.documentElement.style.cursor="text"===n?"text":"crosshair",e.forceUpdate()}}),f.a.createElement("div",{className:"toolIcon"},r))}))),me()&&f.a.createElement(f.a.Fragment,null,f.a.createElement("h4",null,"Selected Shapes"),f.a.createElement("div",{className:"panelColumn"},f.a.createElement("button",{onClick:this.deleteSelectedElements},"Delete"),f.a.createElement("button",{onClick:this.moveOneRight},"Bring forward"),f.a.createElement("button",{onClick:this.moveAllRight},"Bring to front"),f.a.createElement("button",{onClick:this.moveOneLeft},"Send backward"),f.a.createElement("button",{onClick:this.moveAllLeft},"Send to back"))),f.a.createElement("h4",null,"Canvas"),f.a.createElement("div",{className:"panelColumn"},f.a.createElement("h5",null,"Canvas Background Color"),f.a.createElement("div",null,f.a.createElement("button",{className:"swatch",style:{backgroundColor:this.state.viewBackgroundColor},onClick:function(){return e.setState((function(e){return{currentColorPicker:e.currentColorPicker===z.CANVAS_BACKGROUND?null:z.CANVAS_BACKGROUND}}))}}),this.state.currentColorPicker===z.CANVAS_BACKGROUND?f.a.createElement("div",{className:"popover"},f.a.createElement("div",{className:"cover",onClick:function(){return e.setState({currentColorPicker:null})}}),f.a.createElement(g.SketchPicker,{color:this.state.viewBackgroundColor,onChange:function(t){e.setState({viewBackgroundColor:t.hex})}})):null,f.a.createElement("input",{type:"text",className:"swatch-input",value:this.state.viewBackgroundColor,onChange:function(t){return e.setState({viewBackgroundColor:t.target.value})}})),f.a.createElement("button",{onClick:this.clearCanvas,title:"Clear the canvas & reset background color"},"Clear canvas")),f.a.createElement("h4",null,"Export"),f.a.createElement("div",{className:"panelColumn"},f.a.createElement("h5",null,"Name"),this.state.name&&f.a.createElement(C,{value:this.state.name,onChange:function(t){return e.updateProjectName(t)}}),f.a.createElement("h5",null,"Image"),f.a.createElement("button",{onClick:function(){!function(e){var t=e.exportBackground,n=e.exportPadding,r=void 0===n?10:n,a=e.viewBackgroundColor,o=e.name;if(!x.length)return window.alert("Cannot export empty canvas.");var l=1/0,c=0,i=1/0,u=0;function s(e,t){return Math.abs(e>t?e-t:t-e)}x.forEach((function(e){l=Math.min(l,J(e)),c=Math.max(c,V(e)),i=Math.min(i,G(e)),u=Math.max(u,q(e))}));var h=document.createElement("canvas");h.style.display="none",document.body.appendChild(h),h.width=s(l,c)+2*r,h.height=s(i,u)+2*r,K(v.a.canvas(h),h,{viewBackgroundColor:t?a:null,scrollX:0,scrollY:0},{offsetX:-l+r,offsetY:-i+r,renderScrollbars:!1,renderSelection:!1}),L("".concat(o,".png"),h.toDataURL("image/png")),h!==Be&&h.remove()}(e.state)}},"Export to png"),f.a.createElement("label",null,f.a.createElement("input",{type:"checkbox",checked:this.state.exportBackground,onChange:function(t){e.setState({exportBackground:t.target.checked})}}),"background"),f.a.createElement("h5",null,"Scene"),f.a.createElement("button",{onClick:function(){!function(e){var t=JSON.stringify({version:1,source:window.location.origin,elements:x});L("".concat(e,".json"),"data:text/plain;charset=utf-8,"+encodeURIComponent(t))}(e.state.name)}},"Save as..."),f.a.createElement("button",{onClick:function(){(function(){var e=document.createElement("input"),t=new FileReader;return e.type="file",e.accept=".json",e.onchange=function(){e.files.length?t.readAsText(e.files[0],"utf8"):alert("A file was not selected.")},e.click(),new Promise((function(e){t.onloadend=function(){t.readyState===FileReader.DONE&&(ee(JSON.parse(t.result).elements,null),e())}}))})().then((function(){return e.forceUpdate()}))}},"Load file...")),me()&&f.a.createElement(f.a.Fragment,null,f.a.createElement(f.a.Fragment,null,f.a.createElement("h4",null,"Colors"),f.a.createElement("div",{className:"panelColumn"},f.a.createElement("h5",null,"Shape Stroke Color"),f.a.createElement("div",null,f.a.createElement("button",{className:"swatch",style:{backgroundColor:ke()||this.state.currentItemStrokeColor},onClick:function(){return e.setState((function(e){return{currentColorPicker:e.currentColorPicker===z.SHAPE_STROKE?null:z.SHAPE_STROKE}}))}}),this.state.currentColorPicker===z.SHAPE_STROKE&&f.a.createElement("div",{className:"popover"},f.a.createElement("div",{className:"cover",onClick:function(){return e.setState({currentColorPicker:null})}}),f.a.createElement(g.SketchPicker,{color:this.state.currentItemStrokeColor,onChange:function(t){return e.changeStrokeColor(t.hex)}})),f.a.createElement("input",{type:"text",className:"swatch-input",value:ke()||this.state.currentItemStrokeColor,onChange:function(t){return e.changeStrokeColor(t.target.value)}}))),ve()&&f.a.createElement("div",{className:"panelColumn"},f.a.createElement("h5",null,"Shape Background Color"),f.a.createElement("div",null,f.a.createElement("button",{className:"swatch",style:{backgroundColor:we()||this.state.currentItemBackgroundColor},onClick:function(){return e.setState((function(e){return{currentColorPicker:e.currentColorPicker===z.SHAPE_BACKGROUND?null:z.SHAPE_BACKGROUND}}))}}),this.state.currentColorPicker===z.SHAPE_BACKGROUND?f.a.createElement("div",{className:"popover"},f.a.createElement("div",{className:"cover",onClick:function(){return e.setState({currentColorPicker:null})}}),f.a.createElement(g.SketchPicker,{color:this.state.currentItemBackgroundColor,onChange:function(t){return e.changeBackgroundColor(t.hex)}})):null,f.a.createElement("input",{type:"text",className:"swatch-input",value:we()||this.state.currentItemBackgroundColor,onChange:function(t){return e.changeBackgroundColor(t.target.value)}})))),ve()&&f.a.createElement(f.a.Fragment,null,f.a.createElement("h4",null,"Fill"),f.a.createElement("div",{className:"panelColumn"},f.a.createElement("button",{onClick:function(){return e.changeFillStyle("hachure")},className:"hachure"===ge()?"active":""},"Hachure"),f.a.createElement("button",{onClick:function(){return e.changeFillStyle("solid")},className:"solid"===ge()?"active":""},"Solid"),f.a.createElement("button",{onClick:function(){return e.changeFillStyle("zigzag")},className:"zigzag"===ge()?"active":""},"Zigzag"),f.a.createElement("button",{onClick:function(){return e.changeFillStyle("cross-hatch")},className:"cross-hatch"===ge()?"active":""},"Cross-hatch"),f.a.createElement("button",{onClick:function(){return e.changeFillStyle("dots")},className:"dots"===ge()?"active":""},"Dots"),f.a.createElement("button",{onClick:function(){return e.changeFillStyle("sunburst")},className:"sunburst"===ge()?"active":""},"Sunburst"),f.a.createElement("button",{onClick:function(){return e.changeFillStyle("dashed")},className:"dashed"===ge()?"active":""},"Dashed"),f.a.createElement("button",{onClick:function(){return e.changeFillStyle("zigzag-line")},className:"zigzag-line"===ge()?"active":""},"Zigzag-line"))),x.some((function(e){return e.isSelected&&("rectangle"===e.type||"ellipse"===e.type||"diamond"===e.type||"arrow"===e.type)}))&&f.a.createElement(f.a.Fragment,null,f.a.createElement("h4",null,"Stroke width"),f.a.createElement("div",{className:"panelColumn"},f.a.createElement("select",{onChange:this.changeStrokeWidth,value:pe()},f.a.createElement("option",{hidden:!0,disabled:!0,value:""}),f.a.createElement("option",{value:"1"},"1"),f.a.createElement("option",{value:"2"},"2"),f.a.createElement("option",{value:"4"},"4"),f.a.createElement("option",{value:"8"},"8"))),f.a.createElement("h4",null,"Roughness"),f.a.createElement("div",{className:"panelColumn"},f.a.createElement("select",{onChange:this.changeRoughness,value:ye()},f.a.createElement("option",{hidden:!0,disabled:!0,value:""}),f.a.createElement("option",{value:"1"},"1"),f.a.createElement("option",{value:"2"},"2"),f.a.createElement("option",{value:"4"},"4"),f.a.createElement("option",{value:"8"},"8"),f.a.createElement("option",{value:"10"},"10")))),f.a.createElement("h4",null,"Opacity"),f.a.createElement("input",{type:"range",min:"0",max:"100",onChange:this.changeOpacity,value:Ee()}))),f.a.createElement("canvas",{id:"canvas",style:{width:t,height:n},width:t*window.devicePixelRatio,height:n*window.devicePixelRatio,ref:function(r){e.removeWheelEventListener&&(e.removeWheelEventListener(),e.removeWheelEventListener=void 0),r&&(r.addEventListener("wheel",e.handleWheel,{passive:!1}),e.removeWheelEventListener=function(){return r.removeEventListener("wheel",e.handleWheel)},t===Se&&n===Ce||(Se=t,Ce=n,r.getContext("2d").scale(window.devicePixelRatio,window.devicePixelRatio)))},onMouseDown:function(r){if(null!==xe&&xe(r),0===r.button){r.preventDefault(),I(document.activeElement)&&document.activeElement.blur();var a=function(e,t,n,r,a,o){var l=R(n,r,a,o),c=[l.horizontal,l.vertical].map((function(n){return n&&n.x<=e&&e<=n.x+n.width&&n.y<=t&&t<=n.y+n.height})),i=Object(u.a)(c,2);return{isOverHorizontalScrollBar:i[0],isOverVerticalScrollBar:i[1]}}(r.clientX-250,r.clientY-0,t,n,e.state.scrollX,e.state.scrollY),o=a.isOverHorizontalScrollBar,l=a.isOverVerticalScrollBar,c=r.clientX-250-e.state.scrollX,i=r.clientY-0-e.state.scrollY,s=function(e,t,n,r,a,o,l,c,i){var u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,s=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,h={type:e,x:t,y:n,width:u,height:s,isSelected:!1,strokeColor:r,backgroundColor:a,fillStyle:o,strokeWidth:l,roughness:c,opacity:i,seed:O(),draw:function(e,t,n){}};return h}(e.state.elementType,c,i,e.state.currentItemStrokeColor,e.state.currentItemBackgroundColor,"hachure",1,1,100),h=!1,f=!1,d=!1;if("selection"===e.state.elementType){var m=x.find((function(t){return X(t,c,i,{scrollX:e.state.scrollX,scrollY:e.state.scrollY,viewBackgroundColor:e.state.viewBackgroundColor})}));if(e.setState({resizingElement:m||null}),m)h=X(m,c,i,{scrollX:e.state.scrollX,scrollY:e.state.scrollY,viewBackgroundColor:e.state.viewBackgroundColor}),document.documentElement.style.cursor="".concat(h,"-resize"),d=!0;else{for(var v=null,g=x.length-1;g>=0;--g)if(Y(x[g],c,i)){v=x[g];break}v?v.isSelected||(r.shiftKey||Z(),v.isSelected=!0):Z(),(f=me())&&(document.documentElement.style.cursor="move")}}if(j(s)){Q();var p=prompt("What text do you want?");if(null===p)return;s.text=p,s.font="".concat(20,"px Virgil");var y=Ne.font;Ne.font=s.font;var E=Ne.measureText(s.text),k=E.width,w=E.actualBoundingBoxAscent||20,S=E.actualBoundingBoxDescent||0;s.actualBoundingBoxAscent=w,Ne.font=y;var C=w+S;s.x-=k/2,s.y-=w,s.width=k,s.height=C}_(s),x.push(s),"text"===e.state.elementType?(e.setState({draggingElement:null,elementType:"selection"}),s.isSelected=!0):e.setState({draggingElement:s});var b=c,B=i;(o||l)&&(b=r.clientX-250,B=r.clientY-0);var M=function(t){if(t.target instanceof HTMLElement){if(o){var n=t.clientX-250,r=n-b;return e.setState((function(e){return{scrollX:e.scrollX-r}})),void(b=n)}if(l){var a=t.clientY-0,c=a-B;return e.setState((function(e){return{scrollY:e.scrollY-c}})),void(B=a)}if(d&&e.state.resizingElement){var i=e.state.resizingElement,u=x.filter((function(e){return e.isSelected}));if(1===u.length){var s=t.clientX-250-e.state.scrollX,m=t.clientY-0-e.state.scrollY;return u.forEach((function(e){switch(h){case"nw":e.width+=e.x-b,e.height+=e.y-B,e.x=b,e.y=B;break;case"ne":e.width=b-e.x,e.height+=e.y-B,e.y=B;break;case"sw":e.width+=e.x-b,e.x=b,e.height=B-e.y;break;case"se":e.width+=s-b,t.shiftKey?e.height=e.width:e.height+=m-B;break;case"n":e.height+=e.y-B,e.y=B;break;case"w":e.width+=e.x-b,e.x=b;break;case"s":e.height=B-e.y;break;case"e":e.width=b-e.x}i.x=e.x,i.y=e.y,_(i)})),b=s,B=m,A=!0,void e.forceUpdate()}}if(f){var v=x.filter((function(e){return e.isSelected}));if(v.length){var g=t.clientX-250-e.state.scrollX,p=t.clientY-0-e.state.scrollY;return v.forEach((function(e){e.x+=g-b,e.y+=p-B})),b=g,B=p,A=!0,void e.forceUpdate()}}var y=e.state.draggingElement;if(y){var E=t.clientX-250-y.x-e.state.scrollX,k=t.clientY-0-y.y-e.state.scrollY;y.width=E,y.height=t.shiftKey?Math.abs(E)*Math.sign(k):k,_(y),"selection"===e.state.elementType&&function(e){var t=J(e),n=V(e),r=G(e),a=q(e);x.forEach((function(e){var o=J(e),l=V(e),c=G(e),i=q(e);e.isSelected="selection"!==e.type&&t<=o&&r<=c&&n>=l&&a>=i}))}(y),A=!0,e.forceUpdate()}}},N=function t(n){var r=e.state,a=r.draggingElement,o=r.elementType;if(xe=null,window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",t),Q(),null===a)return Z(),void e.forceUpdate();"selection"===o?(f&&(f=!1),x.pop()):a.isSelected=!0,e.setState({draggingElement:null,elementType:"selection"}),e.forceUpdate()};xe=N,window.addEventListener("mousemove",M),window.addEventListener("mouseup",N),A=!0,e.forceUpdate()}}}))}},{key:"componentDidUpdate",value:function(){var e,t;K(Me,Be,{scrollX:this.state.scrollX,scrollY:this.state.scrollY,viewBackgroundColor:this.state.viewBackgroundColor}),e=this.state,localStorage.setItem("excalidraw",JSON.stringify(x)),localStorage.setItem("excalidraw-state",JSON.stringify(e)),A||(t=M(),B.length>0&&B[B.length-1]===t||B.push(t)),A=!1}}]),t}(f.a.Component),Ae=document.getElementById("root");m.a.render(f.a.createElement(be,null),Ae);var Be=document.getElementById("canvas"),Me=v.a.canvas(Be),Ne=Be.getContext("2d");m.a.render(f.a.createElement(be,null),Ae)},93:function(e,t,n){e.exports=n(264)}},[[93,1,2]]]);
//# sourceMappingURL=main.4c073e25.chunk.js.map