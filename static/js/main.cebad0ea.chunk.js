(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(33)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(5),o=n(6),i=n(2),c=n(3),l=n(4),s=n(8),u=n(7),d=n(9),f=n(0),h=n.n(f),p=n(10),m=n.n(p),v=n(13),g=n(11),y=n(12),b=n.n(y);function E(e,t,n,a,r,o,i,c,l){var s=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,d={id:b()(),type:e,x:t,y:n,width:s,height:u,strokeColor:a,backgroundColor:r,fillStyle:o,strokeWidth:i,roughness:c,opacity:l,isSelected:!1,seed:Object(g.b)(),shape:null};return d}function w(e){var t=Object(i.a)({},e);return delete t.shape,t.id=b()(),t.seed=Object(g.b)(),t}function k(e,t,n,a,r,o){var i,c,l=r-n,s=o-a,u=l*l+s*s,d=-1;0!==u&&(d=((e-n)*l+(t-a)*s)/u),d<0?(i=n,c=a):d>1?(i=r,c=o):(i=n+d*l,c=a+d*s);var f=e-i,h=t-c;return Math.hypot(f,h)}function x(e,t,n,a,r){return[(e-n)*Math.cos(r)-(t-a)*Math.sin(r)+n,(e-n)*Math.sin(r)+(t-a)*Math.cos(r)+a]}function C(e){return[e.width>=0?e.x:e.x+e.width,e.height>=0?e.y:e.y+e.height,e.width>=0?e.x+e.width:e.x,e.height>=0?e.y+e.height:e.y]}function S(e){var t=Math.floor(e.width/2)+1,n=e.width,a=Math.floor(e.height/2)+1;return[t,0,n,a,t,e.height,0,a]}function M(e){var t=e.width,n=e.height,r=Math.hypot(t-0,n-0),o=Math.min(30,r/2),i=t-(t-0)/r*o,c=n-(n-0)/r*o,l=x(i,c,t,n,-20*Math.PI/180),s=Object(a.a)(l,2),u=s[0],d=s[1],f=x(i,c,t,n,20*Math.PI/180),h=Object(a.a)(f,2);return[0,0,t,n,u,d,h[0],h[1]]}function O(e){return[0,0,e.width,e.height]}function A(e,t){var n=t.scrollX,a=t.scrollY,r=e.x,o=e.x+e.width,i=e.y,c=e.y+e.height,l={},s=e.width<0?8:-8,u=e.height<0?8:-8;return Math.abs(o-r)>40&&(l.n=[r+(o-r)/2+n-4,i-4+a+u,8,8],l.s=[r+(o-r)/2+n-4,c-4+a-u,8,8]),Math.abs(c-i)>40&&(l.w=[r-4+n+s,i+(c-i)/2+a-4,8,8],l.e=[o-4+n-s,i+(c-i)/2+a-4,8,8]),l.nw=[r-4+n+s,i-4+a+u,8,8],l.ne=[o-4+n-s,i-4+a+u,8,8],l.sw=[r-4+n+s,c-4+a-u,8,8],l.se=[o-4+n-s,c-4+a-u,8,8],"arrow"===e.type||"line"===e.type?{nw:l.nw,se:l.se}:l}function j(e,t,n){if("ellipse"===e.type){var r=Math.abs(t-e.x-e.width/2),o=Math.abs(n-e.y-e.height/2),i=.707,c=.707,l=Math.abs(e.width)/2,s=Math.abs(e.height)/2;return[0,1,2,3].forEach((function(e){var t=l*i,n=s*c,a=(l*l-s*s)*Math.pow(i,3)/l,u=(s*s-l*l)*Math.pow(c,3)/s,d=t-a,f=n-u,h=r-a,p=o-u,m=Math.hypot(f,d),v=Math.hypot(p,h);i=Math.min(1,Math.max(0,(h*m/v+a)/l)),c=Math.min(1,Math.max(0,(p*m/v+u)/s));var g=Math.hypot(c,i);i/=g,c/=g})),"transparent"!==e.backgroundColor?l*i-(r-10)>=0&&s*c-(o-10)>=0:Math.hypot(l*i-r,s*c-o)<10}if("rectangle"===e.type){var u=C(e),d=Object(a.a)(u,4),f=d[0],h=d[1],p=d[2],m=d[3];return"transparent"!==e.backgroundColor?t>f-10&&t<p+10&&n>h-10&&n<m+10:k(t,n,f,h,p,h)<10||k(t,n,p,h,p,m)<10||k(t,n,p,m,f,m)<10||k(t,n,f,m,f,h)<10}if("diamond"===e.type){t-=e.x,n-=e.y;var v=S(e),g=Object(a.a)(v,8),y=g[0],b=g[1],E=g[2],w=g[3],x=g[4],A=g[5],j=g[6],T=g[7];if("transparent"!==e.backgroundColor){if(b>A){var B=[b,A];A=B[0],b=B[1]}if(E<j){var L=[E,j];j=L[0],E=L[1]}return A+=10,E+=10,((j-=10)-y)*(n-T)-(j-t)*((b-=10)-T)<=0&&(y-E)*(n-w)-(t-E)*(b-w)<=0&&(E-x)*(n-A)-(t-x)*(w-A)<=0&&(x-j)*(n-T)-(t-j)*(A-T)<=0}return k(t,n,y,b,E,w)<10||k(t,n,E,w,x,A)<10||k(t,n,x,A,j,T)<10||k(t,n,j,T,y,b)<10}if("arrow"===e.type){var D=M(e),R=Object(a.a)(D,8),P=R[0],N=R[1],H=R[2],z=R[3],Y=R[4],X=R[5],I=R[6],F=R[7];return k(t-=e.x,n-=e.y,Y,X,H,z)<10||k(t,n,P,N,H,z)<10||k(t,n,I,F,H,z)<10}if("line"===e.type){var K=O(e),W=Object(a.a)(K,4),V=W[0],U=W[1],_=W[2],J=W[3];return k(t-=e.x,n-=e.y,V,U,_,J)<10}if("text"===e.type){var q=C(e),G=Object(a.a)(q,4),Z=G[0],$=G[1],Q=G[2],ee=G[3];return t>=Z&&t<=Q&&n>=$&&n<=ee}if("selection"===e.type)return console.warn("This should not happen, we need to investigate why it does."),!1;throw new Error("Unimplemented type "+e.type)}function T(e,t,n){var a=t.x,r=t.y,o=n.scrollX,i=n.scrollY;return e.reduce((function(e,t){if(e)return e;var n=function(e,t,n,a){var r=a.scrollX,o=a.scrollY;if(!e.isSelected||"text"===e.type)return!1;var i=A(e,{scrollX:r,scrollY:o}),c=Object.keys(i).filter((function(e){var a=i[e];return t+r>=a[0]&&t+r<=a[0]+a[2]&&n+o>=a[1]&&n+o<=a[1]+a[3]}));return c.length>0&&c[0]}(t,a,r,{scrollX:o,scrollY:i});return n?{element:t,resizeHandle:n}:null}),null)}function B(e){return"text"===e.type}var L="ArrowLeft",D="ArrowRight",R="ArrowDown",P="ArrowUp",N="Enter",H="Escape",z="Delete",Y="Backspace",X=/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)?"metaKey":"ctrlKey";function I(e){return e.charAt(0).toUpperCase()+e.slice(1)}function F(e){return e instanceof HTMLElement&&"wysiwyg"===e.dataset.type||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement}function K(e,t){var n=document.createElement("div"),a=document.body;n.style.position="absolute",n.style.whiteSpace="nowrap",n.style.font=t,a.appendChild(n),n.innerText=e;var r=n.offsetWidth,o=n.offsetHeight,i=document.createElement("span");i.style.display="inline-block",i.style.overflow="hidden",i.style.width="1px",i.style.height="1px",n.appendChild(i);var c=i.offsetTop+i.offsetHeight;return document.body.removeChild(n),{width:r,height:o,baseline:c}}function W(e){var t=window.getSelection();if(t){var n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}}function V(){var e=window.getSelection();e&&e.removeAllRanges()}function U(e){var t=e.initText,n=e.x,a=e.y,r=e.strokeColor,o=e.font,i=e.onSubmit,c=document.createElement("div");function l(e){e.stopPropagation()}function s(){c.innerText&&i(c.innerText),u()}function u(){c.onblur=null,c.onkeydown=null,c.onpaste=null,window.removeEventListener("wheel",l,!0),document.body.removeChild(c)}c.contentEditable="true",c.tabIndex=0,c.innerText=t,c.dataset.type="wysiwyg",Object.assign(c.style,{color:r,position:"absolute",top:a+"px",left:n+"px",transform:"translate(-50%, -50%)",textAlign:"center",display:"inline-block",font:o,padding:"4px",outline:"transparent",whiteSpace:"nowrap",minHeight:"1em"}),c.onkeydown=function(e){if(e.key===H)return e.preventDefault(),t?(c.innerText=t,void s()):void u();e.key===N&&(e.preventDefault(),s())},c.onblur=s,c.onpaste=function(e){e.preventDefault();try{var t=e.clipboardData.getData("text").replace(/\n+/g," ");c.textContent=t}catch(n){}},window.addEventListener("wheel",l,!0),document.body.appendChild(c),c.focus(),W(c)}var _=function(e){var t=K(e.text,e.font);e.width=t.width,e.height=t.height,e.baseline=t.baseline};function J(e,t,n,r,o){var i=1/0,c=0,l=1/0,s=0;e.forEach((function(e){var t=C(e),n=Object(a.a)(t,4),r=n[0],o=n[1],u=n[2],d=n[3];i=Math.min(i,r),l=Math.min(l,o),c=Math.max(c,u),s=Math.max(s,d)})),i+=r,c+=r,l+=o,s+=o;var u=Math.max(-i,0),d=Math.max(-(t-c),0),f=Math.max(-l,0),h=Math.max(-(n-s),0),p=null;(u||d)&&(p={x:Math.min(u+4,t-15-4),y:n-6-4,width:Math.max(t-d-u-8,15),height:6});var m=null;return(f||h)&&(m={x:t-6-4,y:Math.min(f+4,n-15-4),width:6,height:Math.max(n-h-f-12,15)}),{horizontal:p,vertical:m}}function q(e){var t=Object(r.a)(e);return t.forEach((function(e){e.isSelected=!1})),t}function G(e){return e.filter((function(e){return!e.isSelected}))}function Z(e){var t=[];return e.forEach((function(e,n){e.isSelected&&t.push(n)})),t}function $(e,t){var n=Array.from(new Set(e.filter((function(e){return e.isSelected})).map((function(e){return t(e)}))));return 1===n.length?n[0]:null}var Q=n(14),ee=n.n(Q),te="excalidraw-".concat(function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,a=e.getDate(),r=e.getHours(),o=e.getMinutes(),i=e.getSeconds();return"".concat(t).concat(n).concat(a).concat(r).concat(o).concat(i)}());function ne(){return{draggingElement:null,resizingElement:null,elementType:"selection",exportBackground:!0,currentItemStrokeColor:"#000000",currentItemBackgroundColor:"transparent",currentItemFont:"20px Virgil",viewBackgroundColor:"#ffffff",scrollX:0,scrollY:0,cursorX:0,cursorY:0,name:te}}function ae(e,t,n,a,r,o){e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+a-o,n),e.quadraticCurveTo(t+a,n,t+a,n+o),e.lineTo(t+a,n+r-o),e.quadraticCurveTo(t+a,n+r,t+a-o,n+r),e.lineTo(t+o,n+r),e.quadraticCurveTo(t,n+r,t,n+r-o),e.lineTo(t,n+o),e.quadraticCurveTo(t,n,t+o,n),e.closePath(),e.fill(),e.stroke()}function re(e,t,n){var r=t.generator;if("selection"===e.type){var o=n.fillStyle;n.fillStyle="rgba(0, 0, 255, 0.10)",n.fillRect(0,0,e.width,e.height),n.fillStyle=o}else if("rectangle"===e.type)e.shape||(e.shape=r.rectangle(0,0,e.width,e.height,{stroke:e.strokeColor,fill:"transparent"===e.backgroundColor?void 0:e.backgroundColor,fillStyle:e.fillStyle,strokeWidth:e.strokeWidth,roughness:e.roughness,seed:e.seed})),n.globalAlpha=e.opacity/100,t.draw(e.shape),n.globalAlpha=1;else if("diamond"===e.type){if(!e.shape){var i=S(e),c=Object(a.a)(i,8),l=c[0],s=c[1],u=c[2],d=c[3],f=c[4],h=c[5],p=c[6],m=c[7];e.shape=r.polygon([[l,s],[u,d],[f,h],[p,m]],{stroke:e.strokeColor,fill:"transparent"===e.backgroundColor?void 0:e.backgroundColor,fillStyle:e.fillStyle,strokeWidth:e.strokeWidth,roughness:e.roughness,seed:e.seed})}n.globalAlpha=e.opacity/100,t.draw(e.shape),n.globalAlpha=1}else if("ellipse"===e.type)e.shape||(e.shape=r.ellipse(e.width/2,e.height/2,e.width,e.height,{stroke:e.strokeColor,fill:"transparent"===e.backgroundColor?void 0:e.backgroundColor,fillStyle:e.fillStyle,strokeWidth:e.strokeWidth,roughness:e.roughness,seed:e.seed,curveFitting:1})),n.globalAlpha=e.opacity/100,t.draw(e.shape),n.globalAlpha=1;else{if("arrow"===e.type){var v=M(e),g=Object(a.a)(v,8),y=g[0],b=g[1],E=g[2],w=g[3],k=g[4],x=g[5],C=g[6],A=g[7],j={stroke:e.strokeColor,strokeWidth:e.strokeWidth,roughness:e.roughness,seed:e.seed};return e.shape||(e.shape=[r.line(k,x,E,w,j),r.line(y,b,E,w,j),r.line(C,A,E,w,j)]),n.globalAlpha=e.opacity/100,e.shape.forEach((function(e){return t.draw(e)})),void(n.globalAlpha=1)}if("line"===e.type){var T=O(e),L=Object(a.a)(T,4),D=L[0],R=L[1],P=L[2],N=L[3],H={stroke:e.strokeColor,strokeWidth:e.strokeWidth,roughness:e.roughness,seed:e.seed};e.shape||(e.shape=r.line(D,R,P,N,H)),n.globalAlpha=e.opacity/100,t.draw(e.shape),n.globalAlpha=1}else{if(!B(e))throw new Error("Unimplemented type "+e.type);n.globalAlpha=e.opacity/100;var z=n.font;n.font=e.font;var Y=n.fillStyle;n.fillStyle=e.strokeColor,n.fillText(e.text,0,e.baseline||e.actualBoundingBoxAscent||0),n.fillStyle=Y,n.font=z,n.globalAlpha=1}}}function oe(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},c=o.offsetX,l=o.offsetY,s=o.renderScrollbars,u=void 0===s||s,d=o.renderSelection,f=void 0===d||d;if(n){var h=n.getContext("2d"),p=h.fillStyle;if("string"===typeof r.viewBackgroundColor?(h.fillStyle=r.viewBackgroundColor,h.fillRect(0,0,n.width,n.height)):h.clearRect(0,0,n.width,n.height),h.fillStyle=p,r=Object(i.a)({},r,{scrollX:"number"===typeof c?c:r.scrollX,scrollY:"number"===typeof l?l:r.scrollY}),e.forEach((function(e){h.translate(e.x+r.scrollX,e.y+r.scrollY),re(e,t,h),h.translate(-e.x-r.scrollX,-e.y-r.scrollY)})),f){var m=e.filter((function(e){return e.isSelected}));if(m.forEach((function(e){var t=C(e),n=Object(a.a)(t,4),o=n[0],i=n[1],c=n[2],l=n[3],s=h.getLineDash();h.setLineDash([8,4]),h.strokeRect(o-4+r.scrollX,i-4+r.scrollY,c-o+8,l-i+8),h.setLineDash(s)})),1===m.length&&"text"!==m[0].type){var v=A(m[0],r);Object.values(v).forEach((function(e){h.strokeRect(e[0],e[1],e[2],e[3])}))}}if(u){var g=J(e,h.canvas.width/window.devicePixelRatio,h.canvas.height/window.devicePixelRatio,r.scrollX,r.scrollY),y=h.strokeStyle;h.fillStyle="rgba(0,0,0,0.3)",h.strokeStyle="rgba(255,255,255,0.8)",[g.horizontal,g.vertical].forEach((function(e){e&&ae(h,e.x,e.y,e.width,e.height,3)})),h.strokeStyle=y,h.fillStyle=p}}}function ie(e,t){var n=document.createElement("a");n.setAttribute("download",e),n.setAttribute("href",t),n.click(),n.remove()}function ce(e,t,n,r){var o=r.exportBackground,i=r.exportPadding,c=void 0===i?10:i,l=r.viewBackgroundColor,s=r.name;if(!t.length)return window.alert("Cannot export empty canvas.");var u=1/0,d=0,f=1/0,h=0;function p(e,t){return Math.abs(e>t?e-t:t-e)}t.forEach((function(e){var t=C(e),n=Object(a.a)(t,4),r=n[0],o=n[1],i=n[2],c=n[3];u=Math.min(u,r),f=Math.min(f,o),d=Math.max(d,i),h=Math.max(h,c)}));var m=document.createElement("canvas");if(m.style.display="none",document.body.appendChild(m),m.width=p(u,d)+2*c,m.height=p(f,h)+2*c,oe(t,v.a.canvas(m),m,{viewBackgroundColor:o?l:null,scrollX:0,scrollY:0},{offsetX:-u+c,offsetY:-f+c,renderScrollbars:!1,renderSelection:!1}),"png"===e)ie("".concat(s,".png"),m.toDataURL("image/png"));else if("clipboard"===e)try{m.toBlob((function(e){return ee.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ee.a.awrap(navigator.clipboard.write([new window.ClipboardItem({"image/png":e})]));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),window.alert("Couldn't copy to clipboard. Try using Chrome browser.");case 8:case"end":return t.stop()}}),null,null,[[0,5]])}))}catch(g){window.alert("Couldn't copy to clipboard. Try using Chrome browser.")}m!==n&&m.remove()}function le(e,t){return{elements:e.map((function(e){return Object(i.a)({},e,{id:e.id||b()(),fillStyle:e.fillStyle||"hachure",strokeWidth:e.strokeWidth||1,roughness:e.roughness||1,opacity:null===e.opacity||void 0===e.opacity?100:e.opacity})})),appState:t}}function se(e,t,n){for(var a=null,r=e.length-1;r>=0;--r)if(j(e[r],t,n)){a=e[r];break}return a}var ue=[{icon:h.a.createElement("svg",{viewBox:"0 0 320 512"},h.a.createElement("path",{d:"M302.189 329.126H196.105l55.831 135.993c3.889 9.428-.555 19.999-9.444 23.999l-49.165 21.427c-9.165 4-19.443-.571-23.332-9.714l-53.053-129.136-86.664 89.138C18.729 472.71 0 463.554 0 447.977V18.299C0 1.899 19.921-6.096 30.277 5.443l284.412 292.542c11.472 11.179 3.007 31.141-12.5 31.141z"})),value:"selection"},{icon:h.a.createElement("svg",{viewBox:"0 0 448 512"},h.a.createElement("path",{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"})),value:"rectangle"},{icon:h.a.createElement("svg",{viewBox:"0 0 223.646 223.646"},h.a.createElement("path",{d:"M111.823 0L16.622 111.823 111.823 223.646 207.025 111.823z"})),value:"diamond"},{icon:h.a.createElement("svg",{viewBox:"0 0 512 512"},h.a.createElement("path",{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"})),value:"ellipse"},{icon:h.a.createElement("svg",{viewBox:"0 0 448 512"},h.a.createElement("path",{d:"M313.941 216H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12h301.941v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.569 0-33.941l-86.059-86.059c-15.119-15.119-40.971-4.411-40.971 16.971V216z"})),value:"arrow"},{icon:h.a.createElement("svg",{viewBox:"0 0 448 512"},h.a.createElement("path",{d:"M432 416h-23.41L277.88 53.69A32 32 0 0 0 247.58 32h-47.16a32 32 0 0 0-30.3 21.69L39.41 416H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16h-19.58l23.3-64h152.56l23.3 64H304a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM176.85 272L224 142.51 271.15 272z"})),value:"text"},{icon:h.a.createElement("svg",{viewBox:"0 0 6 6"},h.a.createElement("line",{x1:"0",y1:"3",x2:"6",y2:"3",stroke:"#000",strokeLinecap:"round"})),value:"line"}],de=ue.map((function(e,t){return[e.value[0],(t+1).toString()]})).flat(1);var fe=function(){function e(){Object(c.a)(this,e),this.recording=!0,this.stateHistory=[],this.redoStack=[]}return Object(l.a)(e,[{key:"generateCurrentEntry",value:function(e){return JSON.stringify(e.map((function(e){e.shape;var t=Object(o.a)(e,["shape"]);return Object(i.a)({},t,{isSelected:!1})})))}},{key:"pushEntry",value:function(e){this.stateHistory.length>0&&this.stateHistory[this.stateHistory.length-1]===e||(this.stateHistory.push(e),this.clearRedoStack())}},{key:"restoreEntry",value:function(e){try{return JSON.parse(e)}catch(t){return null}}},{key:"clearRedoStack",value:function(){this.redoStack.splice(0,this.redoStack.length)}},{key:"redoOnce",value:function(){if(0===this.redoStack.length)return null;var e=this.redoStack.pop();return void 0!==e?(this.stateHistory.push(e),this.restoreEntry(e)):null}},{key:"undoOnce",value:function(){if(0===this.stateHistory.length)return null;var e=this.stateHistory.pop(),t=this.stateHistory[this.stateHistory.length-1];return void 0!==e?(this.redoStack.push(e),this.restoreEntry(t)):null}},{key:"isRecording",value:function(){return this.recording}},{key:"skipRecording",value:function(){this.recording=!1}},{key:"resumeRecording",value:function(){this.recording=!0}}]),e}();n(22);function he(e){var t=e.children,n=e.left,a=e.top,r=e.onCloseRequest,o=e.fitInViewport,i=void 0!==o&&o,c=Object(f.useRef)(null);return Object(f.useLayoutEffect)((function(){if(i&&c.current){var e=c.current,t=e.getBoundingClientRect(),n=t.x,a=t.y,r=t.width,o=t.height,l=window.innerWidth;n+r>l&&(e.style.left=l-r+"px");var s=window.innerHeight;a+o>s&&(e.style.top=s-o+"px")}}),[i]),h.a.createElement("div",{className:"popover",style:{top:a,left:n},ref:c},h.a.createElement("div",{className:"cover",onClick:r,onContextMenu:function(e){e.preventDefault(),r&&r()}}),t)}var pe;n(23);function me(e){var t=e.options,n=e.onCloseRequest,a=e.top,r=e.left;return h.a.createElement(he,{onCloseRequest:n,top:a,left:r,fitInViewport:!0},h.a.createElement("ul",{className:"context-menu",onContextMenu:function(e){return e.preventDefault()}},t.map((function(e,t){return h.a.createElement("li",{key:t,className:"context-menu__option",onClick:n},h.a.createElement(ve,e))}))))}function ve(e){var t=e.label,n=e.action;return h.a.createElement("button",{className:"context-menu-option",onClick:n},t)}function ge(){if(pe)return pe;var e=document.createElement("div");return document.body.appendChild(e),pe=e}function ye(){Object(p.unmountComponentAtNode)(ge())}var be=function(e){var t=Array.of();e.options.forEach((function(e){e&&t.push(e)})),t.length&&Object(p.render)(h.a.createElement(me,{top:e.top,left:e.left,options:t,onCloseRequest:ye}),ge())},Ee=(n(24),function(){function e(){Object(c.a)(this,e),this.actions={},this.updater=null}return Object(l.a)(e,[{key:"setUpdater",value:function(e){this.updater=e}},{key:"registerAction",value:function(e){this.actions[e.name]=e}},{key:"handleKeyDown",value:function(e,t,n){var a=Object.values(this.actions).sort((function(e,t){return(t.keyPriority||0)-(e.keyPriority||0)})).filter((function(a){return a.keyTest&&a.keyTest(e,t,n)}));return 0===a.length?{}:(e.preventDefault(),a[0].perform(t,n,null))}},{key:"getContextMenuItems",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e};return Object.values(this.actions).filter(a).filter((function(e){return"contextItemLabel"in e})).sort((function(e,t){return(void 0!==e.contextMenuOrder?e.contextMenuOrder:999)-(void 0!==t.contextMenuOrder?t.contextMenuOrder:999)})).map((function(a){return{label:a.contextItemLabel,action:function(){n(a.perform(e,t,null))}}}))}},{key:"renderAction",value:function(e,t,n,a){if(this.actions[e]&&"PanelComponent"in this.actions[e]){var r=this.actions[e],o=r.PanelComponent;return h.a.createElement(o,{elements:t,appState:n,updateData:function(e){a(r.perform(t,n,e))}})}return null}}]),e}()),we={name:"deleteSelectedElements",perform:function(e){return{elements:G(e)}},contextItemLabel:"Delete",contextMenuOrder:3,keyTest:function(e){return e.key===Y||e.key===z}};function ke(e,t,n){var a=e[t];e[t]=e[n],e[n]=a}function xe(e,t){t.sort((function(e,t){return e-t}));var n=!0;return t.forEach((function(t,a){(n=n&&t===a)||ke(e,t-1,t)})),e}function Ce(e,t){var n=t.sort((function(e,t){return t-e})),a=!0;return n.forEach((function(t,n){(a=a&&t===e.length-n-1)||ke(e,t+1,t)})),e}function Se(e,t){t.sort((function(e,t){return e-t}));var n=t.map((function(t){return e[t]})),a=t.reverse().concat([0]);return a.forEach((function(t,n){if(0!==n)for(var r=a[n-1]-1;r>=t;--r)e[r+n]=e[r]})),n.forEach((function(t,n){e[n]=t})),e}function Me(e,t){var n=t.sort((function(e,t){return t-e})),a=n.map((function(t){return e[t]}));return(t=n.reverse().concat([e.length])).forEach((function(n,a){if(0!==a)for(var r=t[a-1]+1;r<n;++r)e[r-a]=e[r]})),a.forEach((function(t,n){e[e.length-n-1]=t})),e}var Oe={name:"sendBackward",perform:function(e,t){return{elements:xe(Object(r.a)(e),Z(e)),appState:t}},contextItemLabel:"Send Backward",keyPriority:40,keyTest:function(e){return e[X]&&e.shiftKey&&e.altKey&&"KeyB"===e.code}},Ae={name:"bringForward",perform:function(e,t){return{elements:Ce(Object(r.a)(e),Z(e)),appState:t}},contextItemLabel:"Bring Forward",keyPriority:40,keyTest:function(e){return e[X]&&e.shiftKey&&e.altKey&&"KeyF"===e.code}},je={name:"sendToBack",perform:function(e,t){return{elements:Se(Object(r.a)(e),Z(e)),appState:t}},contextItemLabel:"Send to Back",keyTest:function(e){return e[X]&&e.shiftKey&&"KeyB"===e.code}},Te={name:"bringToFront",perform:function(e,t){return{elements:Me(Object(r.a)(e),Z(e)),appState:t}},contextItemLabel:"Bring to Front",keyTest:function(e){return e[X]&&e.shiftKey&&"KeyF"===e.code}},Be={name:"selectAll",perform:function(e){return{elements:e.map((function(e){return Object(i.a)({},e,{isSelected:!0})}))}},contextItemLabel:"Select All",keyTest:function(e){return e[X]&&"KeyA"===e.code}};function Le(e){var t=e.options,n=e.value,a=e.onChange;return h.a.createElement("div",{className:"buttonList"},t.map((function(e){return h.a.createElement("button",{key:e.text,onClick:function(){return a(e.value)},className:n===e.value?"active":""},e.text)})))}n(25);var De=function(e){var t=e.colors,n=e.color,r=e.onChange,o=h.a.useState(n),i=Object(a.a)(o,2),c=i[0],l=i[1];return h.a.useEffect((function(){l(n)}),[n]),h.a.createElement("div",{className:"color-picker"},h.a.createElement("div",{className:"color-picker-triangle-shadow"}),h.a.createElement("div",{className:"color-picker-triangle"}),h.a.createElement("div",{className:"color-picker-content"},t.map((function(e){return h.a.createElement("div",{className:"color-picker-swatch",onClick:function(){r(e)},title:e,tabIndex:0,style:{backgroundColor:e},key:e},"transparent"===e?h.a.createElement("div",{className:"color-picker-transparent"}):void 0)})),h.a.createElement("div",{className:"color-picker-hash"},"#"),h.a.createElement("div",{style:{position:"relative"}},h.a.createElement("input",{spellCheck:!1,className:"color-picker-input",onChange:function(e){var t=e.target.value;t.match(/^([0-9a-f]{3}|[0-9a-f]{6}|transparent)$/)&&r("transparent"===t?"transparent":"#"+t),l(t)},value:(c||"").replace(/^#/,"")})),h.a.createElement("div",{style:{clear:"both"}})))};function Re(e){var t=e.type,n=e.color,r=e.onChange,o=h.a.useState(!1),i=Object(a.a)(o,2),c=i[0],l=i[1];return h.a.createElement("div",null,h.a.createElement("button",{className:"color-picker-label-swatch",style:n?{backgroundColor:n}:void 0,onClick:function(){return l(!c)}}),h.a.createElement(h.a.Suspense,{fallback:""},c?h.a.createElement(he,{onCloseRequest:function(){return l(!1)}},h.a.createElement(De,{colors:Pe[t],color:n||void 0,onChange:function(e){r(e)}})):null),h.a.createElement("input",{type:"text",className:"color-picker-swatch-input",value:n||"",onPaste:function(e){return r(e.clipboardData.getData("text"))},onChange:function(e){return r(e.target.value)}}))}var Pe={canvasBackground:["#ffffff","#f8f9fa","#f1f3f5","#fff5f5","#fff0f6","#f8f0fc","#f3f0ff","#edf2ff","#e7f5ff","#e3fafc","#e6fcf5","#ebfbee","#f4fce3","#fff9db","#fff4e6"],elementBackground:["transparent","#ced4da","#868e96","#fa5252","#e64980","#be4bdb","#7950f2","#4c6ef5","#228be6","#15aabf","#12b886","#40c057","#82c91e","#fab005","#fd7e14"],elementStroke:["#000000","#343a40","#495057","#c92a2a","#a61e4d","#862e9c","#5f3dc4","#364fc7","#1864ab","#0b7285","#087f5b","#2b8a3e","#5c940d","#e67700","#d9480f"]},Ne=function(e,t){return e.map((function(e){return e.isSelected?t(e):e}))},He={name:"changeStrokeColor",perform:function(e,t,n){return{elements:Ne(e,(function(e){return Object(i.a)({},e,{shape:null,strokeColor:n})})),appState:Object(i.a)({},t,{currentItemStrokeColor:n})}},PanelComponent:function(e){var t=e.elements,n=(e.appState,e.updateData);return h.a.createElement(h.a.Fragment,null,h.a.createElement("h5",null,"Stroke"),h.a.createElement(Re,{type:"elementStroke",color:$(t,(function(e){return e.strokeColor})),onChange:n}))}},ze={name:"changeBackgroundColor",perform:function(e,t,n){return{elements:Ne(e,(function(e){return Object(i.a)({},e,{shape:null,backgroundColor:n})})),appState:Object(i.a)({},t,{currentItemBackgroundColor:n})}},PanelComponent:function(e){var t=e.elements,n=e.updateData;return h.a.createElement(h.a.Fragment,null,h.a.createElement("h5",null,"Background"),h.a.createElement(Re,{type:"elementBackground",color:$(t,(function(e){return e.backgroundColor})),onChange:n}))}},Ye={name:"changeFillStyle",perform:function(e,t,n){return{elements:Ne(e,(function(e){return Object(i.a)({},e,{shape:null,fillStyle:n})}))}},PanelComponent:function(e){var t=e.elements,n=e.updateData;return h.a.createElement(h.a.Fragment,null,h.a.createElement("h5",null,"Fill"),h.a.createElement(Le,{options:[{value:"solid",text:"Solid"},{value:"hachure",text:"Hachure"},{value:"cross-hatch",text:"Cross-hatch"}],value:$(t,(function(e){return e.fillStyle})),onChange:function(e){n(e)}}))}},Xe={name:"changeStrokeWidth",perform:function(e,t,n){return{elements:Ne(e,(function(e){return Object(i.a)({},e,{shape:null,strokeWidth:n})}))}},PanelComponent:function(e){var t=e.elements,n=(e.appState,e.updateData);return h.a.createElement(h.a.Fragment,null,h.a.createElement("h5",null,"Stroke Width"),h.a.createElement(Le,{options:[{value:1,text:"Thin"},{value:2,text:"Bold"},{value:4,text:"Extra Bold"}],value:$(t,(function(e){return e.strokeWidth})),onChange:function(e){return n(e)}}))}},Ie={name:"changeSloppiness",perform:function(e,t,n){return{elements:Ne(e,(function(e){return Object(i.a)({},e,{shape:null,roughness:n})}))}},PanelComponent:function(e){var t=e.elements,n=(e.appState,e.updateData);return h.a.createElement(h.a.Fragment,null,h.a.createElement("h5",null,"Sloppiness"),h.a.createElement(Le,{options:[{value:0,text:"Draftsman"},{value:1,text:"Artist"},{value:3,text:"Cartoonist"}],value:$(t,(function(e){return e.roughness})),onChange:function(e){return n(e)}}))}},Fe={name:"changeOpacity",perform:function(e,t,n){return{elements:Ne(e,(function(e){return Object(i.a)({},e,{shape:null,opacity:n})}))}},PanelComponent:function(e){var t=e.elements,n=e.updateData;return h.a.createElement(h.a.Fragment,null,h.a.createElement("h5",null,"Opacity"),h.a.createElement("input",{type:"range",min:"0",max:"100",onChange:function(e){return n(+e.target.value)},value:$(t,(function(e){return e.opacity}))||0}))}},Ke={name:"changeFontSize",perform:function(e,t,n){return{elements:Ne(e,(function(e){if(B(e)){var t=Object(i.a)({},e,{shape:null,font:"".concat(n,"px ").concat(e.font.split("px ")[1])});return _(t),t}return e}))}},PanelComponent:function(e){var t=e.elements,n=e.updateData;return h.a.createElement(h.a.Fragment,null,h.a.createElement("h5",null,"Font size"),h.a.createElement(Le,{options:[{value:16,text:"Small"},{value:20,text:"Medium"},{value:28,text:"Large"},{value:36,text:"Very Large"}],value:$(t,(function(e){return B(e)&&+e.font.split("px ")[0]})),onChange:function(e){return n(e)}}))}},We={name:"changeFontFamily",perform:function(e,t,n){return{elements:Ne(e,(function(e){if(B(e)){var t=Object(i.a)({},e,{shape:null,font:"".concat(e.font.split("px ")[0],"px ").concat(n)});return _(t),t}return e}))}},PanelComponent:function(e){var t=e.elements,n=e.updateData;return h.a.createElement(h.a.Fragment,null,h.a.createElement("h5",null,"Font family"),h.a.createElement(Le,{options:[{value:"Virgil",text:"Virgil"},{value:"Helvetica",text:"Helvetica"},{value:"Courier",text:"Courier"}],value:$(t,(function(e){return B(e)&&e.font.split("px ")[1]})),onChange:function(e){return n(e)}}))}},Ve=h.a.createElement("svg",{"aria-hidden":"true",focusable:"false",role:"img",viewBox:"0 0 448 512"},h.a.createElement("path",{fill:"currentColor",d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"})),Ue=h.a.createElement("svg",{"aria-hidden":"true",focusable:"false",role:"img",viewBox:"0 0 576 512"},h.a.createElement("path",{fill:"currentColor",d:"M572.694 292.093L500.27 416.248A63.997 63.997 0 0 1 444.989 448H45.025c-18.523 0-30.064-20.093-20.731-36.093l72.424-124.155A64 64 0 0 1 152 256h399.964c18.523 0 30.064 20.093 20.73 36.093zM152 224h328v-48c0-26.51-21.49-48-48-48H272l-64-64H48C21.49 64 0 85.49 0 112v278.046l69.077-118.418C86.214 242.25 117.989 224 152 224z"})),_e=(h.a.createElement("svg",{"aria-hidden":"true",focusable:"false",role:"img",viewBox:"0 0 384 512"},h.a.createElement("path",{fill:"currentColor",d:"M384 121.941V128H256V0h6.059a24 24 0 0 1 16.97 7.029l97.941 97.941a24.002 24.002 0 0 1 7.03 16.971zM248 160c-13.2 0-24-10.8-24-24V0H24C10.745 0 0 10.745 0 24v464c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24V160H248zm-135.455 16c26.51 0 48 21.49 48 48s-21.49 48-48 48-48-21.49-48-48 21.491-48 48-48zm208 240h-256l.485-48.485L104.545 328c4.686-4.686 11.799-4.201 16.485.485L160.545 368 264.06 264.485c4.686-4.686 12.284-4.686 16.971 0L320.545 304v112z"})),h.a.createElement("svg",{"aria-hidden":"true",focusable:"false",role:"img",viewBox:"0 0 384 512"},h.a.createElement("path",{fill:"currentColor",d:"M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z"}))),Je=h.a.createElement("svg",{"aria-hidden":"true",focusable:"false",role:"img",viewBox:"0 0 448 512"},h.a.createElement("path",{fill:"currentColor",d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"})),qe=(h.a.createElement("svg",{"aria-hidden":"true",focusable:"false",role:"img",viewBox:"0 0 512 512"},h.a.createElement("path",{fill:"currentColor",d:"M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"})),h.a.createElement("svg",{"aria-hidden":"true",focusable:"false",role:"img",viewBox:"0 0 576 512"},h.a.createElement("path",{fill:"currentColor",d:"M384 121.9c0-6.3-2.5-12.4-7-16.9L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128zM571 308l-95.7-96.4c-10.1-10.1-27.4-3-27.4 11.3V288h-64v64h64v65.2c0 14.3 17.3 21.4 27.4 11.3L571 332c6.6-6.6 6.6-17.4 0-24zm-379 28v-32c0-8.8 7.2-16 16-16h176V160H248c-13.2 0-24-10.8-24-24V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V352H208c-8.8 0-16-7.2-16-16z"}))),Ge=h.a.createElement("svg",{"aria-hidden":"true",focusable:"false",role:"img",viewBox:"0 0 384 512"},h.a.createElement("path",{fill:"currentColor",d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm76.45 211.36l-96.42 95.7c-6.65 6.61-17.39 6.61-24.04 0l-96.42-95.7C73.42 337.29 80.54 320 94.82 320H160v-80c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v80h65.18c14.28 0 21.4 17.29 11.27 27.36zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"}));n(26);function Ze(e){return"button"===e.type?h.a.createElement("label",{className:"ToolIcon",title:e.title},h.a.createElement("button",{className:"ToolIcon_type_button","aria-label":e["aria-label"],type:"button",onClick:e.onClick},h.a.createElement("div",{className:"ToolIcon__icon"},e.icon))):h.a.createElement("label",{className:"ToolIcon",title:e.title},h.a.createElement("input",{className:"ToolIcon_type_radio",type:"radio",name:e.name,id:e.id,onChange:e.onChange,checked:e.checked}),h.a.createElement("div",{className:"ToolIcon__icon"},e.icon))}var $e={name:"changeViewBackgroundColor",perform:function(e,t,n){return{appState:Object(i.a)({},t,{viewBackgroundColor:n})}},PanelComponent:function(e){var t=e.appState,n=e.updateData;return h.a.createElement("div",{style:{position:"relative"}},h.a.createElement(Re,{type:"canvasBackground",color:t.viewBackgroundColor,onChange:function(e){return n(e)}}))}},Qe={name:"clearCanvas",perform:function(){return{elements:[],appState:ne()}},PanelComponent:function(e){var t=e.updateData;return h.a.createElement(Ze,{type:"button",icon:Je,title:"Clear the canvas & reset background color","aria-label":"Clear the canvas & reset background color",onClick:function(){window.confirm("This will clear the whole canvas. Are you sure?")&&t(null)}})}},et=(n(27),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleFocus=function(e){W(e.currentTarget)},n.handleBlur=function(e){var t=e.currentTarget.innerText.trim();t!==n.props.value&&n.props.onChange(t),V()},n.handleKeyDown=function(e){"Enter"===e.key&&(e.preventDefault(),e.currentTarget.blur())},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return h.a.createElement("span",{suppressContentEditableWarning:!0,contentEditable:"true","data-type":"wysiwyg",className:"project-name",onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onFocus:this.handleFocus},this.props.value)}}]),t}(f.Component)),tt={name:"changeProjectName",perform:function(e,t,n){return{appState:Object(i.a)({},t,{name:n})}},PanelComponent:function(e){var t=e.appState,n=e.updateData;return h.a.createElement(et,{value:t.name||"Unnamed",onChange:function(e){return n(e)}})}},nt={name:"changeExportBackground",perform:function(e,t,n){return{appState:Object(i.a)({},t,{exportBackground:n})}},PanelComponent:function(e){var t=e.appState,n=e.updateData;return h.a.createElement("label",null,h.a.createElement("input",{type:"checkbox",checked:t.exportBackground,onChange:function(e){n(e.target.checked)}})," ","With background")}},at={name:"saveScene",perform:function(e,t,n){return function(e,t){var n=JSON.stringify({version:1,source:window.location.origin,elements:e.map((function(e){e.shape;return Object(o.a)(e,["shape"])})),appState:t});ie("".concat(t.name,".json"),"data:text/plain;charset=utf-8,"+encodeURIComponent(n))}(e,t),{}},PanelComponent:function(e){var t=e.updateData;return h.a.createElement(Ze,{type:"button",icon:Ve,title:"Save","aria-label":"Save",onClick:function(){return t(null)}})}},rt={name:"loadScene",perform:function(e,t,n){return{elements:n.elements,appState:n.appState}},PanelComponent:function(e){var t=e.updateData;return h.a.createElement(Ze,{type:"button",icon:Ue,title:"Load","aria-label":"Load",onClick:function(){(function(){var e=document.createElement("input"),t=new FileReader;return e.type="file",e.accept=".json",e.onchange=function(){e.files.length?t.readAsText(e.files[0],"utf8"):alert("A file was not selected.")},e.click(),new Promise((function(e){t.onloadend=function(){if(t.readyState===FileReader.DONE){var n=ne(),a=[],r=n;try{var o=JSON.parse(t.result);a=o.elements||[],r=Object(i.a)({},n,{},o.appState)}catch(c){}e(le(a,r))}}}))})().then((function(e){var n=e.elements,a=e.appState;t({elements:n,appState:a})}))}})}},ot="{}",it={name:"copyStyles",perform:function(e){var t=e.find((function(e){return e.isSelected}));return t&&(ot=JSON.stringify(t)),{}},contextItemLabel:"Copy Styles",keyTest:function(e){return e[X]&&e.shiftKey&&"KeyC"===e.code},contextMenuOrder:0},ct={name:"pasteStyles",perform:function(e){var t=JSON.parse(ot);return{elements:e.map((function(e){if(e.isSelected){var n=Object(i.a)({},e,{shape:null,backgroundColor:null===t||void 0===t?void 0:t.backgroundColor,strokeWidth:null===t||void 0===t?void 0:t.strokeWidth,strokeColor:null===t||void 0===t?void 0:t.strokeColor,fillStyle:null===t||void 0===t?void 0:t.fillStyle,opacity:null===t||void 0===t?void 0:t.opacity,roughness:null===t||void 0===t?void 0:t.roughness});return B(n)&&(n.font=null===t||void 0===t?void 0:t.font,_(n)),n}return e}))}},contextItemLabel:"Paste Styles",keyTest:function(e){return e[X]&&e.shiftKey&&"KeyV"===e.code},contextMenuOrder:1};n(28);function lt(e){var t=e.children,n=e.padding;return h.a.createElement("div",{className:"Island",style:{"--padding":n}},t)}n(29);var st=function(e){var t=e.children,n=e.gap,a=e.align;return h.a.createElement("div",{className:"Stack Stack_horizontal",style:{"--gap":n,alignItems:a}},t)},ut=function(e){var t=e.children,n=e.gap,a=e.align;return h.a.createElement("div",{className:"Stack Stack_vertical",style:{"--gap":n,justifyItems:a}},t)};n(30);function dt(e){var t=e.children,n=e.side;return h.a.createElement("div",{className:"FixedSideContainer FixedSideContainer_side_"+n},t)}n(31),n(32);function ft(e){var t=function(){var e=Object(f.useState)((function(){var e=document.createElement("div");return document.body.appendChild(e),e})),t=Object(a.a)(e,1)[0];return Object(f.useEffect)((function(){return function(){document.body.removeChild(t)}}),[t]),t}();return Object(p.createPortal)(h.a.createElement("div",{className:"Modal"},h.a.createElement("div",{className:"Modal__background",onClick:e.onCloseRequest}),h.a.createElement("div",{className:"Modal__content",style:{maxWidth:e.maxWidth}},e.children)),t)}var ht="toBlob"in HTMLCanvasElement.prototype&&"clipboard"in navigator&&"write"in navigator.clipboard&&"ClipboardItem"in window;function pt(e){var t=e.elements,n=e.appState,r=e.exportPadding,o=void 0===r?10:r,i=e.actionManager,c=e.syncActionResult,l=e.onExportToPng,s=e.onExportToClipboard,u=t.some((function(e){return e.isSelected})),d=Object(f.useState)(!1),p=Object(a.a)(d,2),m=p[0],g=p[1],y=Object(f.useState)(u),b=Object(a.a)(y,2),E=b[0],w=b[1],k=Object(f.useRef)(null),x=n.exportBackground,S=n.viewBackgroundColor,M=E?t.filter((function(e){return e.isSelected})):t;function O(){g(!1),w(u)}return Object(f.useEffect)((function(){w(u)}),[u]),Object(f.useEffect)((function(){var e=k.current,t=function(e,t){var n=t.exportBackground,r=t.exportPadding,o=void 0===r?10:r,i=t.viewBackgroundColor,c=1/0,l=0,s=1/0,u=0;function d(e,t){return Math.abs(e>t?e-t:t-e)}e.forEach((function(e){var t=C(e),n=Object(a.a)(t,4),r=n[0],o=n[1],i=n[2],d=n[3];c=Math.min(c,r),s=Math.min(s,o),l=Math.max(l,i),u=Math.max(u,d)}));var f=document.createElement("canvas");return f.width=d(c,l)+2*o,f.height=d(s,u)+2*o,oe(e,v.a.canvas(f),f,{viewBackgroundColor:n?i:null,scrollX:0,scrollY:0},{offsetX:-c+o,offsetY:-s+o,renderScrollbars:!1,renderSelection:!1}),f}(M,{exportBackground:x,viewBackgroundColor:S,exportPadding:o});return null===e||void 0===e||e.appendChild(t),function(){null===e||void 0===e||e.removeChild(t)}}),[m,M,x,o,S]),h.a.createElement(h.a.Fragment,null,h.a.createElement(Ze,{onClick:function(){return g(!0)},icon:qe,type:"button","aria-label":"Show export dialog",title:"Export"}),m&&h.a.createElement(ft,{maxWidth:640,onCloseRequest:O},h.a.createElement("div",{className:"ExportDialog__dialog"},h.a.createElement(lt,{padding:4},h.a.createElement("button",{className:"ExportDialog__close",onClick:O},"\u2573"),h.a.createElement("h2",null,"Export"),h.a.createElement("div",{className:"ExportDialog__preview",ref:k}),h.a.createElement("div",{className:"ExportDialog__actions"},h.a.createElement(st,{gap:2},h.a.createElement(Ze,{type:"button",icon:Ge,title:"Export to PNG","aria-label":"Export to PNG",onClick:function(){return l(M)}}),ht&&h.a.createElement(Ze,{type:"button",icon:_e,title:"Copy to clipboard","aria-label":"Copy to clipboard",onClick:function(){return s(M)}})),i.renderAction("changeProjectName",t,n,c),h.a.createElement(ut,{gap:1},i.renderAction("changeExportBackground",t,n,c),u&&h.a.createElement("div",null,h.a.createElement("label",null,h.a.createElement("input",{type:"checkbox",checked:E,onChange:function(e){return w(e.currentTarget.checked)}})," ","Only selected"))))))))}n.d(t,"viewportCoordsToSceneCoords",(function(){return kt})),n.d(t,"App",(function(){return xt}));var mt={elements:[]}.elements,vt={history:new fe}.history;function gt(){document.documentElement.style.cursor=""}function yt(e,t,n){if(gt(),null===t||""===t)return!1;var a=K(t,n);return e.text=t,e.font=n,e.x-=a.width/2,e.y-=a.height/2,e.width=a.width,e.height=a.height,e.baseline=a.baseline,!0}var bt=-1,Et=-1,wt=null;function kt(e,t){var n=e.clientX,a=e.clientY;return{x:n-0-t.scrollX,y:a-0-t.scrollY}}var xt=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).canvas=null,n.rc=null,n.actionManager=new Ee,n.canvasOnlyActions=void 0,n.syncActionResult=function(e){void 0!==e.elements&&(mt=e.elements,n.forceUpdate()),void 0!==e.appState&&n.setState(Object(i.a)({},e.appState))},n.onCut=function(e){var t;F(e.target)||(null===(t=e.clipboardData)||void 0===t||t.setData("text/plain",JSON.stringify(mt.filter((function(e){return e.isSelected})).map((function(e){e.shape;return Object(o.a)(e,["shape"])})))),mt=G(mt),n.forceUpdate(),e.preventDefault())},n.onCopy=function(e){var t;F(e.target)||(null===(t=e.clipboardData)||void 0===t||t.setData("text/plain",JSON.stringify(mt.filter((function(e){return e.isSelected})).map((function(e){e.shape;return Object(o.a)(e,["shape"])})))),e.preventDefault())},n.onPaste=function(e){var t;if(!F(e.target)){var a=(null===(t=e.clipboardData)||void 0===t?void 0:t.getData("text"))||"";n.addElementsFromPaste(a),e.preventDefault()}},n.state=ne(),n.onResize=function(){n.forceUpdate()},n.getCurrentCursorPosition=function(e){n.setState({cursorX:e.x,cursorY:e.y})},n.onKeyDown=function(e){if(e.key===H)return mt=q(mt),n.forceUpdate(),n.setState({elementType:"selection"}),window.document.activeElement instanceof HTMLElement&&window.document.activeElement.blur(),void e.preventDefault();if(!F(e.target)){var t,a,r=n.actionManager.handleKeyDown(e,mt,n.state);if(n.syncActionResult(r),void 0===r.elements&&void 0===r.appState)if((a=e.key)===L||a===D||a===R||a===P){var o=e.shiftKey?5:1;mt=mt.map((function(t){if(t.isSelected){var n=Object(i.a)({},t);return e.key===L?n.x-=o:e.key===D?n.x+=o:e.key===P?n.y-=o:e.key===R&&(n.y+=o),n}return t})),n.forceUpdate(),e.preventDefault()}else if(!de.includes(e.key.toLowerCase())||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey){if(e[X]&&"KeyZ"===e.code){if(e.shiftKey){var c=vt.redoOnce();null!==c&&(mt=c)}else{var l=vt.undoOnce();null!==l&&(mt=l)}n.forceUpdate(),e.preventDefault()}}else n.setState({elementType:(t=e.key,ue.reduce((function(e,n,a){return n.value[0]!==t&&t!==(a+1).toString()?e:n.value}),"selection"))})}},n.removeWheelEventListener=void 0,n.copyToClipboard=function(){if(navigator.clipboard){var e=JSON.stringify(mt.filter((function(e){return e.isSelected})).map((function(e){e.shape;return Object(o.a)(e,["shape"])})));navigator.clipboard.writeText(e)}},n.pasteFromClipboard=function(){navigator.clipboard&&navigator.clipboard.readText().then((function(e){return n.addElementsFromPaste(e)}))},n.handleWheel=function(e){e.preventDefault();var t=e.deltaX,a=e.deltaY;n.setState((function(e){return{scrollX:e.scrollX-t,scrollY:e.scrollY-a}}))},n.addElementsFromPaste=function(e){var t;try{t=JSON.parse(e)}catch(v){}if(Array.isArray(t)&&t.length>0&&t[0].type){mt=q(mt);var o=1/0,i=0,c=1/0,l=0,s=Math.min.apply(Math,Object(r.a)(t.map((function(e){return e.x})))),u=Math.min.apply(Math,Object(r.a)(t.map((function(e){return e.y})))),d=function(e,t){return Math.abs(e>t?e-t:t-e)};t.forEach((function(e){var t=C(e),n=Object(a.a)(t,4),r=n[0],s=n[1],u=n[2],d=n[3];o=Math.min(o,r),c=Math.min(c,s),i=Math.max(i,u),l=Math.max(l,d)}));var f=d(o,i)/2,h=d(c,l)/2,p=n.state.cursorX-n.state.scrollX-0-f,m=n.state.cursorY-n.state.scrollY-0-h;mt=[].concat(Object(r.a)(mt),Object(r.a)(t.map((function(e){var t=w(e);return t.x+=p-s,t.y+=m-u,t})))),n.forceUpdate()}},n.saveDebounced=function(e,t){var n=0;return function(){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];clearTimeout(n),n=window.setTimeout((function(){return e.apply(void 0,r)}),t)}}((function(){var e,t;e=mt,t=n.state,localStorage.setItem("excalidraw",JSON.stringify(e)),localStorage.setItem("excalidraw-state",JSON.stringify(t))}),300),n.actionManager.registerAction(we),n.actionManager.registerAction(je),n.actionManager.registerAction(Te),n.actionManager.registerAction(Oe),n.actionManager.registerAction(Ae),n.actionManager.registerAction(Be),n.actionManager.registerAction(He),n.actionManager.registerAction(ze),n.actionManager.registerAction(Ye),n.actionManager.registerAction(Xe),n.actionManager.registerAction(Fe),n.actionManager.registerAction(Ie),n.actionManager.registerAction(Ke),n.actionManager.registerAction(We),n.actionManager.registerAction($e),n.actionManager.registerAction(Qe),n.actionManager.registerAction(tt),n.actionManager.registerAction(nt),n.actionManager.registerAction(at),n.actionManager.registerAction(rt),n.actionManager.registerAction(it),n.actionManager.registerAction(ct),n.canvasOnlyActions=[Be],n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("copy",this.onCopy),document.addEventListener("paste",this.onPaste),document.addEventListener("cut",this.onCut),document.addEventListener("keydown",this.onKeyDown,!1),document.addEventListener("mousemove",this.getCurrentCursorPosition),window.addEventListener("resize",this.onResize,!1);var e=function(){var e=localStorage.getItem("excalidraw"),t=localStorage.getItem("excalidraw-state"),n=[];if(e)try{n=JSON.parse(e).map((function(e){e.shape;return Object(o.a)(e,["shape"])}))}catch(r){}var a=null;if(t)try{a=JSON.parse(t)}catch(r){}return le(n,a)}(),t=e.elements,n=e.appState;t&&(mt=t),n?this.setState(n):this.forceUpdate()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("copy",this.onCopy),document.removeEventListener("paste",this.onPaste),document.removeEventListener("cut",this.onCut),document.removeEventListener("keydown",this.onKeyDown,!1),document.removeEventListener("mousemove",this.getCurrentCursorPosition,!1),window.removeEventListener("resize",this.onResize,!1)}},{key:"renderSelectedShapeActions",value:function(e){return 0===e.filter((function(e){return e.isSelected})).length?null:h.a.createElement(lt,{padding:4},h.a.createElement("div",{className:"panelColumn"},this.actionManager.renderAction("changeStrokeColor",e,this.state,this.syncActionResult),function(e){return e.some((function(e){return e.isSelected&&("rectangle"===e.type||"ellipse"===e.type||"diamond"===e.type)}))}(e)&&h.a.createElement(h.a.Fragment,null,this.actionManager.renderAction("changeBackgroundColor",e,this.state,this.syncActionResult),this.actionManager.renderAction("changeFillStyle",e,this.state,this.syncActionResult),h.a.createElement("hr",null)),function(e){return e.some((function(e){return e.isSelected&&("rectangle"===e.type||"ellipse"===e.type||"diamond"===e.type||"arrow"===e.type||"line"===e.type)}))}(e)&&h.a.createElement(h.a.Fragment,null,this.actionManager.renderAction("changeStrokeWidth",e,this.state,this.syncActionResult),this.actionManager.renderAction("changeSloppiness",e,this.state,this.syncActionResult),h.a.createElement("hr",null)),function(e){return e.some((function(e){return e.isSelected&&"text"===e.type}))}(e)&&h.a.createElement(h.a.Fragment,null,this.actionManager.renderAction("changeFontSize",e,this.state,this.syncActionResult),this.actionManager.renderAction("changeFontFamily",e,this.state,this.syncActionResult),h.a.createElement("hr",null)),this.actionManager.renderAction("changeOpacity",e,this.state,this.syncActionResult),this.actionManager.renderAction("deleteSelectedElements",e,this.state,this.syncActionResult)))}},{key:"renderShapesSwitcher",value:function(){var e=this;return h.a.createElement(h.a.Fragment,null,ue.map((function(t,n){var a=t.value,r=t.icon;return h.a.createElement(Ze,{key:a,type:"radio",icon:r,checked:e.state.elementType===a,name:"editor-current-shape",title:"".concat(I(a)," \u2014 ").concat(I(a)[0],", ").concat(n+1),onChange:function(){e.setState({elementType:a}),mt=q(mt),document.documentElement.style.cursor="text"===a?"text":"crosshair",e.forceUpdate()}})})))}},{key:"renderCanvasActions",value:function(){var e=this;return h.a.createElement(ut,{gap:4},h.a.createElement(st,{gap:1},this.actionManager.renderAction("loadScene",mt,this.state,this.syncActionResult),this.actionManager.renderAction("saveScene",mt,this.state,this.syncActionResult),h.a.createElement(pt,{elements:mt,appState:this.state,actionManager:this.actionManager,syncActionResult:this.syncActionResult,onExportToPng:function(t){e.canvas&&ce("png",t,e.canvas,e.state)},onExportToClipboard:function(t){e.canvas&&ce("clipboard",t,e.canvas,e.state)}}),this.actionManager.renderAction("clearCanvas",mt,this.state,this.syncActionResult)),this.actionManager.renderAction("changeViewBackgroundColor",mt,this.state,this.syncActionResult))}},{key:"render",value:function(){var e=this,t=window.innerWidth-0,n=window.innerHeight-0;return h.a.createElement("div",{className:"container"},h.a.createElement(dt,{side:"top"},h.a.createElement("div",{className:"App-menu App-menu_top"},h.a.createElement(ut,{gap:4,align:"end"},h.a.createElement("div",{className:"App-right-menu"},h.a.createElement(lt,{padding:4},this.renderCanvasActions())),h.a.createElement("div",{className:"App-right-menu"},this.renderSelectedShapeActions(mt))),h.a.createElement(ut,{gap:4,align:"start"},h.a.createElement(lt,{padding:1},h.a.createElement(st,{gap:1},this.renderShapesSwitcher()))),h.a.createElement("div",null))),h.a.createElement("canvas",{id:"canvas",style:{width:t,height:n},width:t*window.devicePixelRatio,height:n*window.devicePixelRatio,ref:function(a){null===e.canvas&&(e.canvas=a,e.rc=v.a.canvas(e.canvas)),e.removeWheelEventListener&&(e.removeWheelEventListener(),e.removeWheelEventListener=void 0),a&&(a.addEventListener("wheel",e.handleWheel,{passive:!1}),e.removeWheelEventListener=function(){return a.removeEventListener("wheel",e.handleWheel)},t===bt&&n===Et||(bt=t,Et=n,a.getContext("2d").scale(window.devicePixelRatio,window.devicePixelRatio)))},onContextMenu:function(t){t.preventDefault();var n=kt(t,e.state),a=n.x,o=n.y,i=se(mt,a,o);i?(i.isSelected||(mt=q(mt),i.isSelected=!0,e.forceUpdate()),be({options:[navigator.clipboard&&{label:"Copy",action:e.copyToClipboard},navigator.clipboard&&{label:"Paste",action:function(){return e.pasteFromClipboard()}}].concat(Object(r.a)(e.actionManager.getContextMenuItems(mt,e.state,e.syncActionResult,(function(t){return!e.canvasOnlyActions.includes(t)})))),top:t.clientY,left:t.clientX})):be({options:[navigator.clipboard&&{label:"Paste",action:function(){return e.pasteFromClipboard()}}].concat(Object(r.a)(e.actionManager.getContextMenuItems(mt,e.state,e.syncActionResult,(function(t){return e.canvasOnlyActions.includes(t)})))),top:t.clientY,left:t.clientX})},onMouseDown:function(o){if(null!==wt&&wt(o),1===o.button){var c=o.clientX,l=o.clientY,s=function(t){document.documentElement.style.cursor="grabbing";var n=c-t.clientX,a=l-t.clientY;c=t.clientX,l=t.clientY,e.setState((function(e){return{scrollX:e.scrollX-n,scrollY:e.scrollY-a}}))},u=wt=function(e){wt=null,gt(),window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",u)};return window.addEventListener("mousemove",s,{passive:!0}),void window.addEventListener("mouseup",u)}if(0===o.button){o.preventDefault(),F(document.activeElement)&&document.activeElement.blur();var d=function(e,t,n,r,o,i,c){var l=J(e,r,o,i,c),s=[l.horizontal,l.vertical].map((function(e){return e&&e.x<=t&&t<=e.x+e.width&&e.y<=n&&n<=e.y+e.height})),u=Object(a.a)(s,2);return{isOverHorizontalScrollBar:u[0],isOverVerticalScrollBar:u[1]}}(mt,o.clientX-0,o.clientY-0,t,n,e.state.scrollX,e.state.scrollY),f=d.isOverHorizontalScrollBar,h=d.isOverVerticalScrollBar,p=kt(o,e.state),m=p.x,v=p.y,g=E(e.state.elementType,m,v,e.state.currentItemStrokeColor,e.state.currentItemBackgroundColor,"hachure",1,1,100),y=!1,b=!1,k=!1,x=null,S=!1;if("selection"===e.state.elementType){var M,O=T(mt,{x:m,y:v},e.state);if(e.setState({resizingElement:O?O.element:null}),O)y=O.resizeHandle,document.documentElement.style.cursor="".concat(y,"-resize"),b=!0;else(null===(M=x=se(mt,m,v))||void 0===M?void 0:M.isSelected)||o.shiftKey||(mt=q(mt)),x&&(x.isSelected||(x.isSelected=!0,S=!0),o.altKey&&(mt=[].concat(Object(r.a)(mt.map((function(e){return Object(i.a)({},e,{isSelected:!1})}))),Object(r.a)(mt.filter((function(e){return e.isSelected})).map((function(e){var t=w(e);return t.isSelected=!0,t}))))))}else mt=q(mt);if(B(g)){var A=o.clientX,j=o.clientY;if(!o.altKey){var L=e.getTextWysiwygSnappedToCenterPosition(m,v);L&&(g.x=L.elementCenterX,g.y=L.elementCenterY,A=L.wysiwygX,j=L.wysiwygY)}return U({initText:"",x:A,y:j,strokeColor:e.state.currentItemStrokeColor,font:e.state.currentItemFont,onSubmit:function(t){yt(g,t,e.state.currentItemFont),mt=[].concat(Object(r.a)(mt),[Object(i.a)({},g,{isSelected:!0})]),e.setState({draggingElement:null,elementType:"selection"})}}),void e.setState({elementType:"selection"})}"text"===e.state.elementType?(mt=[].concat(Object(r.a)(mt),[Object(i.a)({},g,{isSelected:!0})]),e.setState({draggingElement:null,elementType:"selection"})):(mt=[].concat(Object(r.a)(mt),[g]),e.setState({draggingElement:g}));var D=m,R=v;(f||h)&&(D=o.clientX-0,R=o.clientY-0);var P=function(t){var n;if(t.target instanceof HTMLElement){if(f){var r=t.clientX-0,o=r-D;return e.setState((function(e){return{scrollX:e.scrollX-o}})),void(D=r)}if(h){var i=t.clientY-0,c=i-R;return e.setState((function(e){return{scrollY:e.scrollY-c}})),void(R=i)}if(b&&e.state.resizingElement){var l=e.state.resizingElement,s=mt.filter((function(e){return e.isSelected}));if(1===s.length){var u=kt(t,e.state),d=u.x,p=u.y,m=0,v=0;return s.forEach((function(e){switch(y){case"nw":if(m=D-d,e.width+=m,e.x-=m,t.shiftKey)e.y+=e.height-e.width,e.height=e.width;else{var n=R-p;e.height+=n,e.y-=n}break;case"ne":e.width+=d-D,t.shiftKey?(e.y+=e.height-e.width,e.height=e.width):(v=R-p,e.height+=v,e.y-=v);break;case"sw":m=D-d,e.width+=m,e.x-=m,t.shiftKey?e.height=e.width:e.height+=p-R;break;case"se":e.width+=d-D,t.shiftKey?e.height=e.width:e.height+=p-R;break;case"n":v=R-p,e.height+=v,e.y-=v;break;case"w":m=D-d,e.width+=m,e.x-=m;break;case"s":e.height+=p-R;break;case"e":e.width+=d-D}l.x=e.x,l.y=e.y,l.shape=null})),D=d,R=p,vt.skipRecording(),void e.forceUpdate()}}if(null===(n=x)||void 0===n?void 0:n.isSelected){k=!0;var g=mt.filter((function(e){return e.isSelected}));if(g.length){var E=kt(t,e.state),w=E.x,S=E.y;return g.forEach((function(e){e.x+=w-D,e.y+=S-R})),D=w,R=S,vt.skipRecording(),void e.forceUpdate()}}var M=e.state.draggingElement;if(M){var O=t.clientX-0-M.x-e.state.scrollX,A=t.clientY-0-M.y-e.state.scrollY;if(M.width=O,M.height=t.shiftKey&&"selection"!==e.state.elementType?Math.abs(O)*Math.sign(A):A,M.shape=null,"selection"===e.state.elementType)t.shiftKey||(mt=q(mt)),function(e,t){var n=C(t),r=Object(a.a)(n,4),o=r[0],i=r[1],c=r[2],l=r[3];return e.filter((function(e){var t=C(e),n=Object(a.a)(t,4),r=n[0],s=n[1],u=n[2],d=n[3];return"selection"!==e.type&&o<=r&&i<=s&&c>=u&&l>=d}))}(mt,M).forEach((function(e){e.isSelected=!0}));vt.skipRecording(),e.forceUpdate()}}},N=function t(n){var a=e.state,r=a.draggingElement,o=a.elementType;return wt=null,window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",t),"selection"!==o&&r&&0===r.width&&0===r.height?(mt=mt.slice(0,-1),e.setState({draggingElement:null}),void e.forceUpdate()):(gt(),!x||k||S||(n.shiftKey?x.isSelected=!1:(mt=q(mt),x.isSelected=!0)),null===r?(mt=q(mt),void e.forceUpdate()):("selection"===o?mt=mt.slice(0,-1):r.isSelected=!0,e.setState({draggingElement:null,elementType:"selection"}),vt.resumeRecording(),void e.forceUpdate()))};wt=N,window.addEventListener("mousemove",P),window.addEventListener("mouseup",N),vt.skipRecording(),e.forceUpdate()}},onDoubleClick:function(t){var n=kt(t,e.state),a=n.x,o=n.y,c=se(mt,a,o),l=E("text",a,o,e.state.currentItemStrokeColor,e.state.currentItemBackgroundColor,"hachure",1,1,100),s="",u=t.clientX,d=t.clientY;if(c&&B(c))mt=mt.filter((function(e){return e.id!==c.id})),e.forceUpdate(),Object.assign(l,c),l.x=c.x+c.width/2,l.y=c.y+c.height/2,s=c.text,u=e.state.scrollX+c.x+0+c.width/2,d=e.state.scrollY+c.y+0+c.height/2;else if(!t.altKey){var f=e.getTextWysiwygSnappedToCenterPosition(a,o);f&&(l.x=f.elementCenterX,l.y=f.elementCenterY,u=f.wysiwygX,d=f.wysiwygY)}U({initText:s,x:u,y:d,strokeColor:l.strokeColor,font:l.font||e.state.currentItemFont,onSubmit:function(t){yt(l,t,l.font||e.state.currentItemFont),mt=[].concat(Object(r.a)(mt),[Object(i.a)({},l,{isSelected:!0})]),e.setState({draggingElement:null,elementType:"selection"})}})},onMouseMove:function(t){if(!Boolean(t.buttons)&&"selection"===e.state.elementType){var n=kt(t,e.state),a=n.x,r=n.y;if(1===mt.filter((function(e){return e.isSelected})).length){var o=T(mt,{x:a,y:r},e.state);if(o&&o.resizeHandle)return void(document.documentElement.style.cursor="".concat(o.resizeHandle,"-resize"))}var i=se(mt,a,r);document.documentElement.style.cursor=i?"move":""}}}))}},{key:"getTextWysiwygSnappedToCenterPosition",value:function(e,t){var n=function(e,t,n){for(var r=null,o=e.length-1;o>=0;--o){var i=C(e[o]),c=Object(a.a)(i,4),l=c[0],s=c[1],u=c[2],d=c[3];if(l<t&&t<u&&s<n&&n<d){r=e[o];break}}return r}(mt,e,t);if(n){var r=n.x+n.width/2,o=n.y+n.height/2;if(Math.hypot(e-r,t-o)<30)return{wysiwygX:this.state.scrollX+n.x+0+n.width/2,wysiwygY:this.state.scrollY+n.y+0+n.height/2,elementCenterX:r,elementCenterY:o}}}},{key:"componentDidUpdate",value:function(){oe(mt,this.rc,this.canvas,{scrollX:this.state.scrollX,scrollY:this.state.scrollY,viewBackgroundColor:this.state.viewBackgroundColor}),this.saveDebounced(),vt.isRecording()&&vt.pushEntry(vt.generateCurrentEntry(mt))}}]),t}(h.a.Component),Ct=document.getElementById("root");m.a.render(h.a.createElement(xt,null),Ct)}],[[16,1,2]]]);
//# sourceMappingURL=main.cebad0ea.chunk.js.map