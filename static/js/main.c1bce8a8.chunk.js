(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{263:function(e,t,n){},264:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(3),o=n(6),l=n(5),c=n(7),i=n(11),s=n(36),u=n(0),h=n.n(u),f=n(55),d=n.n(f),v=n(20),m=n(91);function p(e,t,n){var a=e[t];e[t]=e[n],e[n]=a}function g(e,t){t.sort((function(e,t){return e-t}));var n=!0;t.forEach((function(t,a){(n=n&&t===a)||p(e,t-1,t)}))}function y(e,t){var n=t.sort((function(e,t){return t-e})),a=!0;n.forEach((function(t,n){(a=a&&t===e.length-n-1)||p(e,t+1,t)}))}function w(e,t){t.sort((function(e,t){return e-t}));var n=t.map((function(t){return e[t]})),a=t.reverse().concat([0]);a.forEach((function(t,n){if(0!==n)for(var r=a[n-1]-1;r>=t;--r)e[r+n]=e[r]})),n.forEach((function(t,n){e[n]=t}))}function E(e,t){var n=t.sort((function(e,t){return t-e})),a=n.map((function(t){return e[t]}));(t=n.reverse().concat([e.length])).forEach((function(n,a){if(0!==a)for(var r=t[a-1]+1;r<n;++r)e[r-a]=e[r]})),a.forEach((function(t,n){e[e.length-n-1]=t}))}function k(){return Math.floor(Math.random()*Math.pow(2,31))}function x(e,t){var n=Math.random;Math.random=function(e){return function(){return(Math.pow(2,31)-1&(e=Math.imul(48271,e)))/Math.pow(2,31)}}(e);var a=t();return Math.random=n,a}function S(e,t,n,a,r,o,l,c,i){var s=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,h={type:e,x:t,y:n,width:s,height:u,isSelected:!1,strokeColor:a,backgroundColor:r,fillStyle:o,strokeWidth:l,roughness:c,opacity:i,seed:k(),draw:function(e,t,n){}};return h}function C(e,t,n,a,r,o){var l,c,i=r-n,s=o-a,u=i*i+s*s,h=-1;0!==u&&(h=((e-n)*i+(t-a)*s)/u),h<0?(l=n,c=a):h>1?(l=r,c=o):(l=n+h*i,c=a+h*s);var f=e-l,d=t-c;return Math.hypot(f,d)}function b(e,t,n,a,r){return[(e-n)*Math.cos(r)-(t-a)*Math.sin(r)+n,(e-n)*Math.sin(r)+(t-a)*Math.cos(r)+a]}function M(e){return e.width>=0?e.x:e.x+e.width}function B(e){return e.width>=0?e.x+e.width:e.x}function Y(e){return e.height>=0?e.y:e.y+e.height}function X(e){return e.height>=0?e.y+e.height:e.y}function O(e){var t=Math.floor(e.width/2)+1,n=e.width,a=Math.floor(e.height/2)+1;return[t,0,n,a,t,e.height,0,a]}function D(e){var t=e.width,n=e.height,a=Math.hypot(t-0,n-0),r=Math.min(30,a/2),o=t-(t-0)/a*r,l=n-(n-0)/a*r,c=b(o,l,t,n,-20*Math.PI/180),s=Object(i.a)(c,2),u=s[0],h=s[1],f=b(o,l,t,n,20*Math.PI/180),d=Object(i.a)(f,2);return[0,0,t,n,u,h,d[0],d[1]]}function A(e,t){var n=e.x,a=e.x+e.width,r=e.y,o=e.y+e.height,l={},c=e.width<0?8:-8,i=e.height<0?8:-8;return Math.abs(a-n)>40&&(l.n=[n+(a-n)/2+t.scrollX-4,r-4+t.scrollY+i,8,8],l.s=[n+(a-n)/2+t.scrollX-4,o-4+t.scrollY-i,8,8]),Math.abs(o-r)>40&&(l.w=[n-4+t.scrollX+c,r+(o-r)/2+t.scrollY-4,8,8],l.e=[a-4+t.scrollX-c,r+(o-r)/2+t.scrollY-4,8,8]),l.nw=[n-4+t.scrollX+c,r-4+t.scrollY+i,8,8],l.ne=[a-4+t.scrollX-c,r-4+t.scrollY+i,8,8],l.sw=[n-4+t.scrollX+c,o-4+t.scrollY-i,8,8],l.se=[a-4+t.scrollX-c,o-4+t.scrollY-i,8,8],"arrow"===e.type?{nw:l.nw,se:l.se}:l}function L(e,t,n){if("ellipse"===e.type){var a=Math.abs(t-e.x-e.width/2),r=Math.abs(n-e.y-e.height/2),o=.707,l=.707,c=e.width/2,s=e.height/2;return[0,1,2,3].forEach((function(e){var t=c*o,n=s*l,i=(c*c-s*s)*Math.pow(o,3)/c,u=(s*s-c*c)*Math.pow(l,3)/s,h=t-i,f=n-u,d=a-i,v=r-u,m=Math.hypot(f,h),p=Math.hypot(v,d);o=Math.min(1,Math.max(0,(d*m/p+i)/c)),l=Math.min(1,Math.max(0,(v*m/p+u)/s));var g=Math.hypot(l,o);o/=g,l/=g})),Math.hypot(c*o-a,s*l-r)<10}if("rectangle"===e.type){var u=M(e),h=B(e),f=Y(e),d=X(e);return C(t,n,u,f,h,f)<10||C(t,n,h,f,h,d)<10||C(t,n,h,d,u,d)<10||C(t,n,u,d,u,f)<10}if("diamond"===e.type){t-=e.x,n-=e.y;var v=O(e),m=Object(i.a)(v,8),p=m[0],g=m[1],y=m[2],w=m[3],E=m[4],k=m[5],x=m[6],S=m[7];return C(t,n,p,g,y,w)<10||C(t,n,y,w,E,k)<10||C(t,n,E,k,x,S)<10||C(t,n,x,S,p,g)<10}if("arrow"===e.type){var b=D(e),A=Object(i.a)(b,8),L=A[0],T=A[1],N=A[2],U=A[3],j=A[4],K=A[5],R=A[6],W=A[7];return C(t-=e.x,n-=e.y,j,K,N,U)<10||C(t,n,L,T,N,U)<10||C(t,n,R,W,N,U)<10}if("text"===e.type){var P=M(e),F=B(e),z=Y(e),I=X(e);return t>=P&&t<=F&&n>=z&&n<=I}if("selection"===e.type)return console.warn("This should not happen, we need to investigate why it does."),!1;throw new Error("Unimplemented type "+e.type)}function T(e,t,n,a){if("text"===e.type)return!1;var r=A(e,a),o=Object.keys(r).filter((function(e){var o=r[e];return t+a.scrollX>=o[0]&&t+a.scrollX<=o[0]+o[2]&&n+a.scrollY>=o[1]&&n+a.scrollY<=o[1]+o[3]}));return o.length>0&&o[0]}function N(e){return"text"===e.type}var U=v.a.generator(null,null);function j(e){if("selection"===e.type)e.draw=function(t,n,a){var r=a.scrollX,o=a.scrollY,l=n.fillStyle;n.fillStyle="rgba(0, 0, 255, 0.10)",n.fillRect(e.x+r,e.y+o,e.width,e.height),n.fillStyle=l};else if("rectangle"===e.type){var t=x(e.seed,(function(){return U.rectangle(0,0,e.width,e.height,{stroke:e.strokeColor,fill:e.backgroundColor,fillStyle:e.fillStyle,strokeWidth:e.strokeWidth,roughness:e.roughness})}));e.draw=function(n,a,r){var o=r.scrollX,l=r.scrollY;a.globalAlpha=e.opacity/100,a.translate(e.x+o,e.y+l),n.draw(t),a.translate(-e.x-o,-e.y-l),a.globalAlpha=1}}else if("diamond"===e.type){var n=x(e.seed,(function(){var t=O(e),n=Object(i.a)(t,8),a=n[0],r=n[1],o=n[2],l=n[3],c=n[4],s=n[5],u=n[6],h=n[7];return U.polygon([[a,r],[o,l],[c,s],[u,h]],{stroke:e.strokeColor,fill:e.backgroundColor,fillStyle:e.fillStyle,strokeWidth:e.strokeWidth,roughness:e.roughness})}));e.draw=function(t,a,r){var o=r.scrollX,l=r.scrollY;a.globalAlpha=e.opacity/100,a.translate(e.x+o,e.y+l),t.draw(n),a.translate(-e.x-o,-e.y-l),a.globalAlpha=1}}else if("ellipse"===e.type){var a=x(e.seed,(function(){return U.ellipse(e.width/2,e.height/2,e.width,e.height,{stroke:e.strokeColor,fill:e.backgroundColor,fillStyle:e.fillStyle,strokeWidth:e.strokeWidth,roughness:e.roughness})}));e.draw=function(t,n,r){var o=r.scrollX,l=r.scrollY;n.globalAlpha=e.opacity/100,n.translate(e.x+o,e.y+l),t.draw(a),n.translate(-e.x-o,-e.y-l),n.globalAlpha=1}}else{if("arrow"===e.type){var r=D(e),o=Object(i.a)(r,8),l=o[0],c=o[1],s=o[2],u=o[3],h=o[4],f=o[5],d=o[6],v=o[7],m={stroke:e.strokeColor,strokeWidth:e.strokeWidth,roughness:e.roughness},p=x(e.seed,(function(){return[U.line(h,f,s,u,m),U.line(l,c,s,u,m),U.line(d,v,s,u,m)]}));return void(e.draw=function(t,n,a){var r=a.scrollX,o=a.scrollY;n.globalAlpha=e.opacity/100,n.translate(e.x+r,e.y+o),p.forEach((function(e){return t.draw(e)})),n.translate(-e.x-r,-e.y-o),n.globalAlpha=1})}if(!N(e))throw new Error("Unimplemented type "+e.type);e.draw=function(t,n,a){var r=a.scrollX,o=a.scrollY;n.globalAlpha=e.opacity/100;var l=n.font;n.font=e.font;var c=n.fillStyle;n.fillStyle=e.strokeColor,n.fillText(e.text,e.x+r,e.y+e.actualBoundingBoxAscent+o),n.fillStyle=c,n.font=l,n.globalAlpha=1}}}function K(e,t,n,a,r){var o=1/0,l=0,c=1/0,i=0;e.forEach((function(e){o=Math.min(o,M(e)),l=Math.max(l,B(e)),c=Math.min(c,Y(e)),i=Math.max(i,X(e))})),o+=a,l+=a,c+=r,i+=r;var s=Math.max(-o,0),u=Math.max(-(t-l),0),h=Math.max(-c,0),f=Math.max(-(n-i),0),d=null;(s||u)&&(d={x:Math.min(s+4,t-15-4),y:n-6-4,width:Math.max(t-u-s-8,15),height:6});var v=null;return(h||f)&&(v={x:t-6-4,y:Math.min(h+4,n-15-4),width:6,height:Math.max(n-f-h-12,15)}),{horizontal:d,vertical:v}}function R(e,t,n,a,r,o){e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+a-o,n),e.quadraticCurveTo(t+a,n,t+a,n+o),e.lineTo(t+a,n+r-o),e.quadraticCurveTo(t+a,n+r,t+a-o,n+r),e.lineTo(t+o,n+r),e.quadraticCurveTo(t,n+r,t,n+r-o),e.lineTo(t,n+o),e.quadraticCurveTo(t,n,t+o,n),e.closePath(),e.fill(),e.stroke()}function W(e){e.forEach((function(e){e.isSelected=!1}))}function P(e){for(var t=e.length-1;t>=0;--t)e[t].isSelected&&e.splice(t,1)}function F(e){var t=[];return e.forEach((function(e,n){e.isSelected&&t.push(n)})),t}var z=function(e){return e.some((function(e){return e.isSelected}))};function I(e,t){var n=Array.from(new Set(e.filter((function(e){return e.isSelected})).map((function(e){return t(e)}))));return 1===n.length?n[0]:null}function H(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=r.offsetX,l=r.offsetY,c=r.renderScrollbars,i=void 0===c||c,u=r.renderSelection,h=void 0===u||u;if(n){var f=n.getContext("2d"),d=f.fillStyle;"string"===typeof a.viewBackgroundColor?(f.fillStyle=a.viewBackgroundColor,f.fillRect(0,0,n.width,n.height)):f.clearRect(0,0,n.width,n.height),f.fillStyle=d;var v=F(e);if(a=Object(s.a)({},a,{scrollX:"number"===typeof o?o:a.scrollX,scrollY:"number"===typeof l?l:a.scrollY}),e.forEach((function(e){if(e.draw(t,f,a),h&&e.isSelected){var n=M(e),r=B(e),o=Y(e),l=X(e),c=f.getLineDash();if(f.setLineDash([8,4]),f.strokeRect(n-4+a.scrollX,o-4+a.scrollY,r-n+8,l-o+8),f.setLineDash(c),"text"!==e.type&&1===v.length){var i=A(e,a);Object.values(i).forEach((function(e){f.strokeRect(e[0],e[1],e[2],e[3])}))}}})),i){var m=K(e,f.canvas.width/window.devicePixelRatio,f.canvas.height/window.devicePixelRatio,a.scrollX,a.scrollY),p=f.strokeStyle;f.fillStyle="rgba(0,0,0,0.3)",f.strokeStyle="rgba(255,255,255,0.8)",[m.horizontal,m.vertical].forEach((function(e){e&&R(f,e.x,e.y,e.width,e.height,3)})),f.strokeStyle=p,f.fillStyle=d}}}var J=n(92);function V(e,t){var n=document.createElement("a");n.setAttribute("download",e),n.setAttribute("href",t),n.click(),n.remove()}function q(e,t,n){try{return t&&(e.splice.apply(e,[0,e.length].concat(Object(J.a)("string"===typeof t?JSON.parse(t):t))),e.forEach((function(e){e.fillStyle=e.fillStyle||"hachure",e.strokeWidth=e.strokeWidth||1,e.roughness=e.roughness||1,e.opacity=null===e.opacity||void 0===e.opacity?100:e.opacity,j(e)}))),n?JSON.parse(n):null}catch(a){return e.splice(0,e.length),null}}function Z(e,t,n){for(var a=null,r=e.length-1;r>=0;--r)if(L(e[r],t,n)){a=e[r];break}return a}function _(e){return e.charAt(0).toUpperCase()+e.slice(1)}function G(e){return e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement}var Q=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={value:e.value,edit:!1},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({value:e.value})}},{key:"handleEdit",value:function(e){this.setState({value:e.target.value})}},{key:"handleBlur",value:function(){var e=this.state.value;e?(this.props.onChange(e),this.setState({edit:!1})):this.setState({value:this.props.value,edit:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.value,a=t.edit;return h.a.createElement(u.Fragment,null,a?h.a.createElement("input",{className:"project-name-input",name:"name",maxLength:25,value:n,onChange:function(t){return e.handleEdit(t)},onBlur:function(){return e.handleBlur()},onKeyDown:function(t){"Enter"===t.key&&e.handleBlur()},autoFocus:!0}):h.a.createElement("span",{onClick:function(){return e.setState({edit:!0})},className:"project-name"},n))}}]),t}(u.Component),$=(n(263),{elements:Array.of()}.elements),ee="excalidraw-".concat(function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,a=e.getDate(),r=e.getHours(),o=e.getMinutes(),l=e.getSeconds();return"".concat(t).concat(n).concat(a).concat(r).concat(o).concat(l)}()),te=!1,ne=[],ae=[];function re(){return JSON.stringify($.map((function(e){return Object(s.a)({},e,{isSelected:!1})})))}function oe(e){var t=JSON.parse(e);$.splice(0,$.length),t.forEach((function(e){j(e),$.push(e)})),te=!0}var le="ArrowLeft",ce="ArrowRight",ie="ArrowDown",se="ArrowUp",ue="Escape",he="Delete",fe="Backspace",de=[{icon:h.a.createElement("svg",{viewBox:"0 0 320 512"},h.a.createElement("path",{d:"M302.189 329.126H196.105l55.831 135.993c3.889 9.428-.555 19.999-9.444 23.999l-49.165 21.427c-9.165 4-19.443-.571-23.332-9.714l-53.053-129.136-86.664 89.138C18.729 472.71 0 463.554 0 447.977V18.299C0 1.899 19.921-6.096 30.277 5.443l284.412 292.542c11.472 11.179 3.007 31.141-12.5 31.141z"})),value:"selection"},{icon:h.a.createElement("svg",{viewBox:"0 0 448 512"},h.a.createElement("path",{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"})),value:"rectangle"},{icon:h.a.createElement("svg",{viewBox:"0 0 223.646 223.646"},h.a.createElement("path",{d:"M111.823 0L16.622 111.823 111.823 223.646 207.025 111.823z"})),value:"diamond"},{icon:h.a.createElement("svg",{viewBox:"0 0 512 512"},h.a.createElement("path",{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"})),value:"ellipse"},{icon:h.a.createElement("svg",{viewBox:"0 0 448 512"},h.a.createElement("path",{d:"M313.941 216H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12h301.941v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.569 0-33.941l-86.059-86.059c-15.119-15.119-40.971-4.411-40.971 16.971V216z"})),value:"arrow"},{icon:h.a.createElement("svg",{viewBox:"0 0 448 512"},h.a.createElement("path",{d:"M432 416h-23.41L277.88 53.69A32 32 0 0 0 247.58 32h-47.16a32 32 0 0 0-30.3 21.69L39.41 416H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16h-19.58l23.3-64h152.56l23.3 64H304a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM176.85 272L224 142.51 271.15 272z"})),value:"text"}],ve=de.map((function(e){return e.value[0]}));function me(e){return de.reduce((function(t,n){return n.value[0]!==e?t:n.value}),"selection")}function pe(e){return e===le||e===ce||e===ie||e===se}function ge(){document.documentElement.style.cursor=""}function ye(e){ge();var t=prompt("What text do you want?");if(null===t||""===t)return!1;e.text=t,e.font="".concat(20,"px Virgil");var n=Ye.font;Ye.font=e.font;var a=Ye.measureText(e.text),r=a.width,o=a.actualBoundingBoxAscent||20,l=a.actualBoundingBoxDescent||0;e.actualBoundingBoxAscent=o,Ye.font=n;var c=o+l;return e.x-=r/2,e.y-=o,e.width=r,e.height=c,!0}function we(e){var t=e.options,n=e.value,a=e.onChange;return h.a.createElement("div",{className:"buttonList"},t.map((function(e){return h.a.createElement("button",{key:e.text,onClick:function(){return a(e.value)},className:n===e.value?"active":""},e.text)})))}function Ee(e){var t=e.color,n=e.onChange,a=h.a.useState(!1),r=Object(i.a)(a,2),o=r[0],l=r[1];return h.a.createElement("div",null,h.a.createElement("button",{className:"swatch",style:t?{backgroundColor:t}:void 0,onClick:function(){return l(!o)}}),o?h.a.createElement("div",{className:"popover"},h.a.createElement("div",{className:"cover",onClick:function(){return l(!1)}}),h.a.createElement(m.TwitterPicker,{colors:["#000000","#ABB8C3","#FFFFFF","#FF6900","#FCB900","#00D084","#8ED1FC","#0693E3","#EB144C","#F78DA7","#9900EF"],width:"205px",color:t||void 0,onChange:function(e){n(e.hex)}})):null,h.a.createElement("input",{type:"text",className:"swatch-input",value:t||"",onChange:function(e){return n(e.target.value)}}))}var ke=-1,xe=-1,Se=null,Ce=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).state={draggingElement:null,resizingElement:null,elementType:"selection",exportBackground:!0,currentItemStrokeColor:"#000000",currentItemBackgroundColor:"#ffffff",viewBackgroundColor:"#ffffff",scrollX:0,scrollY:0,name:ee},n.onResize=function(){n.forceUpdate()},n.onKeyDown=function(e){if(!G(e.target))if(e.key===ue)W($),n.forceUpdate(),e.preventDefault();else if(e.key===fe||e.key===he)P($),n.forceUpdate(),e.preventDefault();else if(pe(e.key)){var t=e.shiftKey?5:1;$.forEach((function(n){n.isSelected&&(e.key===le?n.x-=t:e.key===ce?n.x+=t:e.key===se?n.y-=t:e.key===ie&&(n.y+=t))})),n.forceUpdate(),e.preventDefault()}else if(e.metaKey&&e.shiftKey&&e.altKey&&"KeyB"===e.code)n.moveOneLeft(),e.preventDefault();else if(e.metaKey&&e.shiftKey&&"KeyB"===e.code)n.moveAllLeft(),e.preventDefault();else if(e.metaKey&&e.shiftKey&&e.altKey&&"KeyF"===e.code)n.moveOneRight(),e.preventDefault();else if(e.metaKey&&e.shiftKey&&"KeyF"===e.code)n.moveAllRight(),e.preventDefault();else if(e.metaKey&&"KeyA"===e.code)$.forEach((function(e){e.isSelected=!0})),n.forceUpdate(),e.preventDefault();else if(ve.includes(e.key.toLowerCase()))n.setState({elementType:me(e.key)});else if(e.metaKey&&"KeyZ"===e.code){var a=re();if(e.shiftKey){var r=ae.pop();void 0!==r&&(oe(r),ne.push(a))}else{var o=ne.pop();a===o&&(o=ne.pop()),void 0!==o&&(oe(o),ae.push(a))}n.forceUpdate(),e.preventDefault()}},n.deleteSelectedElements=function(){P($),n.forceUpdate()},n.clearCanvas=function(){window.confirm("This will clear the whole canvas. Are you sure?")&&($.splice(0,$.length),n.setState({viewBackgroundColor:"#ffffff",scrollX:0,scrollY:0}),n.forceUpdate())},n.moveAllLeft=function(){w($,F($)),n.forceUpdate()},n.moveOneLeft=function(){g($,F($)),n.forceUpdate()},n.moveAllRight=function(){E($,F($)),n.forceUpdate()},n.moveOneRight=function(){y($,F($)),n.forceUpdate()},n.removeWheelEventListener=void 0,n.changeProperty=function(e){$.forEach((function(t){t.isSelected&&(e(t),j(t))})),n.forceUpdate()},n.changeOpacity=function(e){n.changeProperty((function(t){return t.opacity=+e.target.value}))},n.changeStrokeColor=function(e){n.changeProperty((function(t){return t.strokeColor=e})),n.setState({currentItemStrokeColor:e})},n.changeBackgroundColor=function(e){n.changeProperty((function(t){return t.backgroundColor=e})),n.setState({currentItemBackgroundColor:e})},n.handleWheel=function(e){e.preventDefault();var t=e.deltaX,a=e.deltaY;n.setState((function(e){return{scrollX:e.scrollX-t,scrollY:e.scrollY-a}}))},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("resize",this.onResize,!1);var e=q($,localStorage.getItem("excalidraw"),localStorage.getItem("excalidraw-state"));e&&this.setState(e)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("resize",this.onResize,!1)}},{key:"updateProjectName",value:function(e){this.setState({name:e})}},{key:"render",value:function(){var e=this,t=window.innerWidth-250,n=window.innerHeight-0;return h.a.createElement("div",{className:"container",onCut:function(t){t.clipboardData.setData("text/plain",JSON.stringify($.filter((function(e){return e.isSelected})))),P($),e.forceUpdate(),t.preventDefault()},onCopy:function(e){e.clipboardData.setData("text/plain",JSON.stringify($.filter((function(e){return e.isSelected})))),e.preventDefault()},onPaste:function(t){var n,a=t.clipboardData.getData("text");try{n=JSON.parse(a)}catch(t){}Array.isArray(n)&&n.length>0&&n[0].type&&(W($),n.forEach((function(e){e.x+=10,e.y+=10,e.seed=k(),j(e),$.push(e)})),e.forceUpdate()),t.preventDefault()}},h.a.createElement("div",{className:"sidePanel"},h.a.createElement("h4",null,"Shapes"),h.a.createElement("div",{className:"panelTools"},de.map((function(t){var n=t.value,a=t.icon;return h.a.createElement("label",{key:n,className:"tool",title:"".concat(_(n)," - ").concat(_(n)[0])},h.a.createElement("input",{type:"radio",checked:e.state.elementType===n,onChange:function(){e.setState({elementType:n}),W($),document.documentElement.style.cursor="text"===n?"text":"crosshair",e.forceUpdate()}}),h.a.createElement("div",{className:"toolIcon"},a))}))),z($)&&h.a.createElement("div",{className:"panelColumn"},h.a.createElement("h4",null,"Selection"),h.a.createElement("div",{className:"buttonList"},h.a.createElement("button",{onClick:this.moveOneRight},"Bring forward"),h.a.createElement("button",{onClick:this.moveAllRight},"Bring to front"),h.a.createElement("button",{onClick:this.moveOneLeft},"Send backward"),h.a.createElement("button",{onClick:this.moveAllLeft},"Send to back")),h.a.createElement("h5",null,"Stroke Color"),h.a.createElement(Ee,{color:I($,(function(e){return e.strokeColor})),onChange:function(t){return e.changeStrokeColor(t)}}),$.some((function(e){return e.isSelected&&("rectangle"===e.type||"ellipse"===e.type||"diamond"===e.type)}))&&h.a.createElement(h.a.Fragment,null,h.a.createElement("h5",null,"Background Color"),h.a.createElement(Ee,{color:I($,(function(e){return e.backgroundColor})),onChange:function(t){return e.changeBackgroundColor(t)}}),h.a.createElement("h5",null,"Fill"),h.a.createElement(we,{options:[{value:"solid",text:"Solid"},{value:"hachure",text:"Hachure"},{value:"cross-hatch",text:"Cross-hatch"}],value:I($,(function(e){return e.fillStyle})),onChange:function(t){e.changeProperty((function(e){e.fillStyle=t}))}})),function(e){return e.some((function(e){return e.isSelected&&("rectangle"===e.type||"ellipse"===e.type||"diamond"===e.type||"arrow"===e.type)}))}($)&&h.a.createElement(h.a.Fragment,null,h.a.createElement("h5",null,"Stroke Width"),h.a.createElement(we,{options:[{value:1,text:"Thin"},{value:2,text:"Bold"},{value:4,text:"Extra Bold"}],value:I($,(function(e){return e.strokeWidth})),onChange:function(t){e.changeProperty((function(e){e.strokeWidth=t}))}}),h.a.createElement("h5",null,"Sloppiness"),h.a.createElement(we,{options:[{value:0,text:"Draftsman"},{value:1,text:"Artist"},{value:3,text:"Cartoonist"}],value:I($,(function(e){return e.roughness})),onChange:function(t){return e.changeProperty((function(e){e.roughness=t}))}})),h.a.createElement("h5",null,"Opacity"),h.a.createElement("input",{type:"range",min:"0",max:"100",onChange:this.changeOpacity,value:I($,(function(e){return e.opacity}))||0}),h.a.createElement("button",{onClick:this.deleteSelectedElements},"Delete selected")),h.a.createElement("h4",null,"Canvas"),h.a.createElement("div",{className:"panelColumn"},h.a.createElement("h5",null,"Canvas Background Color"),h.a.createElement(Ee,{color:this.state.viewBackgroundColor,onChange:function(t){return e.setState({viewBackgroundColor:t})}}),h.a.createElement("button",{onClick:this.clearCanvas,title:"Clear the canvas & reset background color"},"Clear canvas")),h.a.createElement("h4",null,"Export"),h.a.createElement("div",{className:"panelColumn"},h.a.createElement("h5",null,"Name"),this.state.name&&h.a.createElement(Q,{value:this.state.name,onChange:function(t){return e.updateProjectName(t)}}),h.a.createElement("h5",null,"Image"),h.a.createElement("button",{onClick:function(){!function(e,t,n){var a=n.exportBackground,r=n.exportPadding,o=void 0===r?10:r,l=n.viewBackgroundColor,c=n.name;if(!e.length)return window.alert("Cannot export empty canvas.");var i=1/0,s=0,u=1/0,h=0;function f(e,t){return Math.abs(e>t?e-t:t-e)}e.forEach((function(e){i=Math.min(i,M(e)),s=Math.max(s,B(e)),u=Math.min(u,Y(e)),h=Math.max(h,X(e))}));var d=document.createElement("canvas");d.style.display="none",document.body.appendChild(d),d.width=f(i,s)+2*o,d.height=f(u,h)+2*o,H(e,v.a.canvas(d),d,{viewBackgroundColor:a?l:null,scrollX:0,scrollY:0},{offsetX:-i+o,offsetY:-u+o,renderScrollbars:!1,renderSelection:!1}),V("".concat(c,".png"),d.toDataURL("image/png")),d!==t&&d.remove()}($,Me,e.state)}},"Export to png"),h.a.createElement("label",null,h.a.createElement("input",{type:"checkbox",checked:this.state.exportBackground,onChange:function(t){e.setState({exportBackground:t.target.checked})}}),"background"),h.a.createElement("h5",null,"Scene"),h.a.createElement("button",{onClick:function(){!function(e,t){var n=JSON.stringify({version:1,source:window.location.origin,elements:e});V("".concat(t,".json"),"data:text/plain;charset=utf-8,"+encodeURIComponent(n))}($,e.state.name)}},"Save as..."),h.a.createElement("button",{onClick:function(){(function(e){var t=document.createElement("input"),n=new FileReader;return t.type="file",t.accept=".json",t.onchange=function(){t.files.length?n.readAsText(t.files[0],"utf8"):alert("A file was not selected.")},t.click(),new Promise((function(t){n.onloadend=function(){if(n.readyState===FileReader.DONE){var a=JSON.parse(n.result);q(e,a.elements,null),t()}}}))})($).then((function(){return e.forceUpdate()}))}},"Load file..."))),h.a.createElement("canvas",{id:"canvas",style:{width:t,height:n},width:t*window.devicePixelRatio,height:n*window.devicePixelRatio,ref:function(a){e.removeWheelEventListener&&(e.removeWheelEventListener(),e.removeWheelEventListener=void 0),a&&(a.addEventListener("wheel",e.handleWheel,{passive:!1}),e.removeWheelEventListener=function(){return a.removeEventListener("wheel",e.handleWheel)},t===ke&&n===xe||(ke=t,xe=n,a.getContext("2d").scale(window.devicePixelRatio,window.devicePixelRatio)))},onMouseDown:function(a){if(null!==Se&&Se(a),0===a.button){a.preventDefault(),G(document.activeElement)&&document.activeElement.blur();var r=function(e,t,n,a,r,o,l){var c=K(e,a,r,o,l),s=[c.horizontal,c.vertical].map((function(e){return e&&e.x<=t&&t<=e.x+e.width&&e.y<=n&&n<=e.y+e.height})),u=Object(i.a)(s,2);return{isOverHorizontalScrollBar:u[0],isOverVerticalScrollBar:u[1]}}($,a.clientX-250,a.clientY-0,t,n,e.state.scrollX,e.state.scrollY),o=r.isOverHorizontalScrollBar,l=r.isOverVerticalScrollBar,c=a.clientX-250-e.state.scrollX,s=a.clientY-0-e.state.scrollY,u=S(e.state.elementType,c,s,e.state.currentItemStrokeColor,e.state.currentItemBackgroundColor,"hachure",1,1,100),h=!1,f=!1,d=!1;if("selection"===e.state.elementType){var v=$.find((function(t){return T(t,c,s,{scrollX:e.state.scrollX,scrollY:e.state.scrollY,viewBackgroundColor:e.state.viewBackgroundColor})}));if(e.setState({resizingElement:v||null}),v)h=T(v,c,s,{scrollX:e.state.scrollX,scrollY:e.state.scrollY,viewBackgroundColor:e.state.viewBackgroundColor}),document.documentElement.style.cursor="".concat(h,"-resize"),d=!0;else{var m=Z($,c,s);m?m.isSelected||(a.shiftKey||W($),m.isSelected=!0):W($),(f=z($))&&(document.documentElement.style.cursor="move")}}if(!N(u)||ye(u)){j(u),$.push(u),"text"===e.state.elementType?(e.setState({draggingElement:null,elementType:"selection"}),u.isSelected=!0):e.setState({draggingElement:u});var p=c,g=s;(o||l)&&(p=a.clientX-250,g=a.clientY-0);var y=function(t){if(t.target instanceof HTMLElement){if(o){var n=t.clientX-250,a=n-p;return e.setState((function(e){return{scrollX:e.scrollX-a}})),void(p=n)}if(l){var r=t.clientY-0,c=r-g;return e.setState((function(e){return{scrollY:e.scrollY-c}})),void(g=r)}if(d&&e.state.resizingElement){var i=e.state.resizingElement,s=$.filter((function(e){return e.isSelected}));if(1===s.length){var u=t.clientX-250-e.state.scrollX,v=t.clientY-0-e.state.scrollY;return s.forEach((function(e){switch(h){case"nw":e.width+=e.x-p,e.height+=e.y-g,e.x=p,e.y=g;break;case"ne":e.width=p-e.x,e.height+=e.y-g,e.y=g;break;case"sw":e.width+=e.x-p,e.x=p,e.height=g-e.y;break;case"se":e.width+=u-p,t.shiftKey?e.height=e.width:e.height+=v-g;break;case"n":e.height+=e.y-g,e.y=g;break;case"w":e.width+=e.x-p,e.x=p;break;case"s":e.height=g-e.y;break;case"e":e.width=p-e.x}i.x=e.x,i.y=e.y,j(i)})),p=u,g=v,te=!0,void e.forceUpdate()}}if(f){var m=$.filter((function(e){return e.isSelected}));if(m.length){var y=t.clientX-250-e.state.scrollX,w=t.clientY-0-e.state.scrollY;return m.forEach((function(e){e.x+=y-p,e.y+=w-g})),p=y,g=w,te=!0,void e.forceUpdate()}}var E=e.state.draggingElement;if(E){var k=t.clientX-250-E.x-e.state.scrollX,x=t.clientY-0-E.y-e.state.scrollY;E.width=k,E.height=t.shiftKey?Math.abs(k)*Math.sign(x):x,j(E),"selection"===e.state.elementType&&function(e,t){var n=M(t),a=B(t),r=Y(t),o=X(t);e.forEach((function(e){var t=M(e),l=B(e),c=Y(e),i=X(e);e.isSelected="selection"!==e.type&&n<=t&&r<=c&&a>=l&&o>=i}))}($,E),te=!0,e.forceUpdate()}}},w=function t(n){var a=e.state,r=a.draggingElement,o=a.elementType;if(Se=null,window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",t),ge(),null===r)return W($),void e.forceUpdate();"selection"===o?(f&&(f=!1),$.pop()):r.isSelected=!0,e.setState({draggingElement:null,elementType:"selection"}),e.forceUpdate()};Se=w,window.addEventListener("mousemove",y),window.addEventListener("mouseup",w),te=!0,e.forceUpdate()}}},onDoubleClick:function(t){var n=t.clientX-250-e.state.scrollX,a=t.clientY-0-e.state.scrollY;if(!Z($,n,a)){var r=S("text",n,a,e.state.currentItemStrokeColor,e.state.currentItemBackgroundColor,"hachure",1,1,100);ye(r)&&(j(r),$.push(r),e.setState({draggingElement:null,elementType:"selection"}),r.isSelected=!0,e.forceUpdate())}}}))}},{key:"componentDidUpdate",value:function(){var e,t,n;H($,Be,Me,{scrollX:this.state.scrollX,scrollY:this.state.scrollY,viewBackgroundColor:this.state.viewBackgroundColor}),e=$,t=this.state,localStorage.setItem("excalidraw",JSON.stringify(e)),localStorage.setItem("excalidraw-state",JSON.stringify(t)),te||(n=re(),ne.length>0&&ne[ne.length-1]===n||ne.push(n),ae.splice(0,ae.length)),te=!1}}]),t}(h.a.Component),be=document.getElementById("root");d.a.render(h.a.createElement(Ce,null),be);var Me=document.getElementById("canvas"),Be=v.a.canvas(Me),Ye=Me.getContext("2d");d.a.render(h.a.createElement(Ce,null),be)},93:function(e,t,n){e.exports=n(264)}},[[93,1,2]]]);
//# sourceMappingURL=main.c1bce8a8.chunk.js.map